!function(globals){var define,requireModule;!function(){var a={},b={};define=function(b,c,d){a[b]={deps:c,callback:d}},requireModule=function(c){if(b[c])return b[c];b[c]={};var d=a[c];if(!d)throw new Error("Module '"+c+"' not found.");for(var e,f=d.deps,g=d.callback,h=[],i=0,j=f.length;j>i;i++)"exports"===f[i]?h.push(e={}):h.push(requireModule(f[i]));var k=g.apply(this,h);return b[c]=e||k}}(),define("src/Global",function(){"use strict";function a(){}function b(a){switch(a.type){case"mousemove":M=D,N=E,a.clientX?(D=a.clientX,E=a.clientY):a.offsetX?(D=a.offsetX,E=a.offsetY):a.layerX&&(D=a.layerX,E=a.layerY),F.x=D,F.y=E,L=!0;break;case"mousedown":n=G,p=!0,R=0,X=(new Date).getTime(),q=D,r=E,L=!0;break;case"mouseup":o=G,p=!1,R=0,s=D,t=E,L=!0;break;case"mouseenter":L=!0;break;case"mouseleave":L=!1}}function c(a){d(),resizeWindow()}function d(){0!=y&&(z=j(),A=k(),l.setAttribute("width",z),l.setAttribute("height",A),B=Math.floor(.5*z),C=Math.floor(.5*A))}function e(){0==Z?v.clearRect(0,0,z,A):(v.fillStyle="rgba("+S[0]+","+S[1]+","+S[2]+","+Z+")",v.fillRect(0,0,z,A)),setCursor("default"),H=n==G,I=o==G,J=I&&9>G-n,O=D-M,P=E-N,Q=0!=O||0!=P,p&&(R=(new Date).getTime()-X),cycle(),K=0,M=D,N=E,G++}function f(){clearTimeout(V),clearInterval(U),U=setInterval(e,a._frameRate),u=!0}function g(a){var b;for(b=0;null!=w[b];b++)if(w[b][0]==a.type.replace("DOMMouseScroll","mousewheel")){if(W==G)return;w[b][1].call(w[b][2],a)}}function h(){Y=!0,window.addEventListener&&window.addEventListener("DOMMouseScroll",i,!1),window.onmousewheel=document.onmousewheel=i}function i(a){a||(a=window.event),a.wheelDelta?K=a.wheelDelta/120:a.detail&&(K=-a.detail/3),a.value=K,a.type="mousewheel",g(a)}function j(){var a=document;return Math.max(a.body.offsetWidth,a.documentElement.offsetWidth,a.body.clientWidth,a.documentElement.clientWidth)}function k(){var a=document;return Math.max(a.body.offsetHeight,a.documentElement.offsetHeight,a.body.clientHeight,a.documentElement.clientHeight)}a.userAgent="unknown",init=function(){},cycle=function(){},resizeWindow=function(){},lastCycle=function(){};var l,m,n,o,p,q,r,s,t,u,v,w=[],x="none",y=!0,z=1,A=1,B=1,C=1,D=0,E=0,F=new Point(0,0),G=0,H=!1,I=!1,J=!1,K=0,L=!0,M=0,N=0,O=0,P=0,Q=!1,R=0,S=[255,255,255],T=(2*Math.PI,.5*Math.PI,180/Math.PI,Math.PI/180,console);T.l=T.log;var U,V,W,X,Y=!1,Z=0;Array.prototype.last=function(){return this[this.length-1]},window.addEventListener("load",function(){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){if(x="IE",m=Number(RegExp.$1),9>m)return null}else/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)?(x="FIREFOX",m=Number(RegExp.$1)):null!=navigator.userAgent.match(/Chrome/)?(x="CHROME",m=Number(RegExp.$1)):/Mozilla[\/\s](\d+\.\d+)/.test(navigator.userAgent)||null!=navigator.userAgent.match(/Mozilla/)?(x="MOZILLA",m=Number(RegExp.$1)):null!=navigator.userAgent.match(/Safari/)?(x="Safari",m=Number(RegExp.$1)):null!=navigator.userAgent.match(/iPad/i)?x="IOS":null!=navigator.userAgent.match(/iPhone/i)&&(x="IOS");a.userAgent=x,a._frameRate=30,l=document.getElementById("main"),null!=l&&(v=l.getContext("2d"),d(),l.addEventListener("mousemove",b,!1),l.addEventListener("mousedown",b,!1),l.addEventListener("mouseup",b,!1),l.addEventListener("mouseenter",b,!1),l.addEventListener("mouseleave",b,!1),h(),window.addEventListener("resize",c,!1),f(),init()),T.l("Moebio Framework v2.259 | user agent: "+x+" |Â user agent version: "+m+" | canvas detected: "+(null!=l))},!1),setStructureLocalStorageWithSeed=function(a,b,c){setStructureLocalStorage(a,MD5.hex_md5(b),c)},setStructureLocalStorage=function(a,b,c){var d,e=typeOf(a);switch(e){case"string":d=a;break;case"Network":d=NetworkEncodings.encodeGDF(network);break;default:e="object",d=JSON.stringify(a)}var f={id:b,type:e,comments:c,date:new Date,code:d},g=JSON.stringify(f);localStorage.setItem(b,g)},getStructureLocalStorageFromSeed=function(a,b){return getStructureLocalStorage(MD5.hex_md5(a),b)},getStructureLocalStorage=function(a,b){b=b||!1;var c=localStorage.getItem(a);if(null==c)return null;try{var d=JSON.parse(c)}catch(e){return null}if(null==d.type&&null==d.code)return null;var f,g=d.type,h=d.code;switch(g){case"string":f=h;break;case"Network":f=NetworkEncodings.decodeGDF(h);break;case"object":f=JSON.parse(h)}return b?(d.object=f,d.size=d.code.length,d.date=new Date(d.date),d):f}}),define("src/dataStructures/DataModel",function(){"use strict";function a(){Object.apply(this),this.type="DataModel"}a.prototype={},a.prototype.constructor=a,a.prototype.destroy=function(){delete this.type,delete this.name},a.prototype.setType=function(a){this.type=a},a.prototype.getType=function(a){return this.type},a.prototype.toString=function(){}}),define("src/dataStructures/dates/DateAxis",function(){"use strict";function a(a,b){b=null==b?new Interval(0,1):b,DataModel.apply(this,arguments),this.departureDateInterval=a,this.arrivalInterval=b,this.time0,this.time1,this.dTime,this.arrivalAmplitude,this.setDepartureDateInterval(a),this.setArrivalInterval(b),this.type="DateAxis"}a.prototype=new DataModel,a.prototype.constructor=a,a.prototype.setDepartureDateInterval=function(a){this.departureDateInterval=a,this.time0=this.departureDateInterval.date0.getTime(),this.time1=this.departureDateInterval.date1.getTime(),this.dTime=this.time1-this.time0},a.prototype.setArrivalInterval=function(a){this.arrivalInterval=a,this.arrivalAmplitude=a.getAmplitude()},a.prototype.project=function(a){return this.arrivalInterval.x+this.arrivalAmplitude*(a.getTime()-this.time0)/this.dTime},a.prototype.update=function(){this.time0=this.departureDateInterval.date0.getTime(),this.time1=this.departureDateInterval.date1.getTime(),this.dTime=this.time1-this.time0,this.arrivalAmplitude=this.arrivalInterval.getAmplitude()},a.prototype.toString=function(){return"DateAxis["+this.departureDateInterval.toString()+", "+this.arrivalInterval.toString()+"]"}}),define("src/dataStructures/dates/DateInterval",function(){"use strict";function a(a,b){DataModel.apply(this,arguments),this.date0=a,this.date1=b,this.type="DateInterval"}a.prototype=new DataModel,a.prototype.constructor=a,a.prototype.toString=function(){return"DateInterval["+this.date0+", "+this.date1+"]"},a.prototype.getMax=function(){return this.date1>this.date0?this.date1:this.date0},a.prototype.getMin=function(){return this.date0<this.date1?this.date0:this.date1},a.prototype.getTimesInterval=function(){return new Interval(this.date0.getTime(),this.date1.getTime())},a.prototype.getProduct=function(b){if(null!=b){if("Interval"==b.type){var c=this.date0.getTime(),d=this.date1.getTime(),e=d-c;return new a(new Date(c+b.x*e),new Date(c+b.y*e))}return null}}}),define("src/dataStructures/dates/DateList",function(){"use strict";function a(){for(var b=0;b<arguments.length;b++)arguments[b]=Number(arguments[b]);var c=List.apply(this,arguments);return c=a.fromArray(c)}a.prototype=new List,a.prototype.constructor=a,a.fromArray=function(b,c){c=null==c?!0:c;var d=List.fromArray(b);if(c)for(var e=0;e<d.length;e++)d[e]=Date(d[e]);return d.type="DateList",d.getTimes=a.prototype.getTimes,d.toStringList=a.prototype.toStringList,d.getMin=a.prototype.getMin,d.getMax=a.prototype.getMax,d},a.prototype.getTimes=function(){var a,b=new NumberList;for(a=0;null!=this[a];a++)b.push(this[a].getTime());return b},a.prototype.toStringList=function(){for(var a=new StringList,b=0;null!=this[b];b++)a[b]=DateOperators.dateToString(this[b]);return a},a.prototype.getMin=function(){if(0==this.length)return null;var a,b=this[0];for(a=1;null!=this[a];a++)b=b<this[a]?b:this[a];return b},a.prototype.getMax=function(){if(0==this.length)return null;var a,b=this[0];for(a=1;null!=this[a];a++)b=b>this[a]?b:this[a];return b}}),define("src/dataStructures/geo/Country",function(){"use strict";function a(a,b){Node.apply(this,[a,b]),this.type="Country",this.id=a,this.name=b,this.shortName,this.continentName,this.isoCode,this.alternativeNames,this.wikipediaUrl,this.flagImageUrl,this.smallFlagImageUrl,this.recognized=!1,this.geoCenter,this.polygonList,this.simplePolygonList,this.longestPolygon,this.longestSimplePolygon,this._simplifiedNames,this._simplifiedId,this._simplifiedName,this._frame}a.prototype=new Node,a.prototype.constructor=a,a.prototype.generatesSimplifiedNames=function(){this._simplifiedNames=CountryOperators.getSimplifiedNames(this.alternativeNames),this._simplifiedId=CountryOperators.getSimplifiedName(this.id),this._simplifiedName=CountryOperators.getSimplifiedName(this.name),this.shortName=this.name.replace("Democratic Republic","D.R.").replace("United States","U.S.A").replace("United Arab","U.A.")},a.prototype.nameMatches=function(a){return null==this._simplifiedId&&this.generatesSimplifiedNames(),a=CountryOperators.getSimplifiedName(a),a==this._simplifiedId||a==this._simplifiedName?!0:-1!=this._simplifiedNames.indexOf(a)},a.prototype.getFrame=function(){return null==this._frame&&(this._frame=null==this.simplePolygonList?this.polygonList.getFrame():this.simplePolygonList.getFrame()),this._frame}}),define("src/dataStructures/geo/CountryList",function(){"use strict";function a(){var b=NodeList.apply(this,arguments);return b.name="",b=a.fromArray(b)}a.prototype=new NodeList,a.prototype.constructor=a,a.fromArray=function(b){var c=NodeList.fromArray(b);return c.type="CountryList",c.getCountryFromName=a.prototype.getCountryFromName,c.removeAntarctica=a.prototype.removeAntarctica,c.removeTinyPolygonsFromCountries=a.prototype.removeTinyPolygonsFromCountries,c.removeTinyCountries=a.prototype.removeTinyCountries,c.simplifyAntarctica=a.prototype.simplifyAntarctica,c.assignValuesToCountriesFromTable=a.prototype.assignValuesToCountriesFromTable,c.simplifyPolygons=a.prototype.simplifyPolygons,c},a.prototype.getCountryFromName=function(a){for(var b=0;null!=this[b];b++)if(this[b].nameMatches(a))return this[b];return null},a.prototype.removeAntarctica=function(){this.removeNode(this.getNodeById("AQ"))},a.prototype.removeTinyPolygonsFromCountries=function(a){a=.2;for(var b,c,d=0;null!=this[d];d++)for(b=this[d],c=0;null!=b.polygonList[c];c++)b.polygonList[c].getFrame().getArea()<a&&(b.polygonList.splice(c,1),c--)},a.prototype.removeTinyCountries=function(a){a=.5;for(var b,c,d,e=0;null!=this[e];e++){for(b=this[e],d=!0,c=0;null!=b.polygonList[c];c++)if(b.polygonList[c].getFrame().getArea()>a){d=!1;break}d&&(this.removeNode(this[e]),e--)}},a.prototype.simplifyPolygons=function(a){for(var b,c,d,e,f=0;null!=this[f];f++){for(b=this[f],d=0,c=0;null!=b.polygonList[c];c++)b.polygonList[c]=PolygonOperators.simplifyPolygon(b.polygonList[c],a),b.polygonList[c].length<3?(b.polygonList.splice(c,1),c--):b.polygonList[c].length>d&&(d=b.polygonList[c].length,e=c);b.longestPolygon.destroy(),b.longestPolygon=b.polygonList[e]}},a.prototype.simplifyAntarctica=function(){var a=this.getNodeById("AQ").simplePolygonList;null!=a&&(a[0].splice(10,1),a[0].splice(10,1)),a=this.getNodeById("AQ").polygonList},a.prototype.assignValuesToCountriesFromTable=function(a,b){for(var c,d,e=0;null!=a[0][e];e++)if(d=this.getCountryFromName(a[0][e]),null!=d)for(c=1;null!=a[c];c++)d[a[c].name]=a[c][e]==b?null:a[c][e]}}),define("src/dataStructures/geometry/Point",function(){"use strict";function a(a,b){DataModel.apply(this,arguments),this.type="Point",this.x=Number(a)||0,this.y=Number(b)||0}a.prototype=new DataModel,a.prototype.constructor=a,a.prototype.getNorm=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))},a.prototype.getAngle=function(){return Math.atan2(this.y,this.x)},a.prototype.factor=function(b){return b>=0||0>b?new a(this.x*b,this.y*b):null!=b.type&&"Point"==b.type?new a(this.x*b.x,this.y*b.y):void 0},a.prototype.normalize=function(){var b=Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2));return new a(this.x/b,this.y/b)},a.prototype.normalizeToValue=function(b){var c=b/Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2));return new a(this.x*c,this.y*c)},a.prototype.subtract=function(b){return new a(this.x-b.x,this.y-b.y)},a.prototype.add=function(b){return new a(b.x+this.x,b.y+this.y)},a.prototype.addCoordinates=function(b,c){return new a(b+this.x,c+this.y)},a.prototype.distanceToPoint=function(a){return Math.sqrt(Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2))},a.prototype.distanceToPointSquared=function(a){return Math.pow(this.x-a.x,2)+Math.pow(this.y-a.y,2)},a.prototype.angleToPoint=function(a){return Math.atan2(a.y-this.y,a.x-this.x)},a.prototype.expandFromPoint=function(b,c){return new a(b.x+c*(this.x-b.x),b.y+c*(this.y-b.y))},a.prototype.interpolate=function(b,c){return new a((1-c)*this.x+c*b.x,(1-c)*this.y+c*b.y)},a.prototype.cross=function(a){return this.x*a.y-this.y*a.x},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y},a.prototype.getRotated=function(b,c){return c=null==c?new a:c,new a(Math.cos(b)*(this.x-c.x)-Math.sin(b)*(this.y-c.y)+c.x,Math.sin(b)*(this.x-c.x)+Math.cos(b)*(this.y-c.y)+c.y)},a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.toString=function(){return"(x="+this.x+", y="+this.y+")"},a.prototype.destroy=function(){delete this.type,delete this.name,delete this.x,delete this.y}}),define("src/dataStructures/geometry/Point3D",function(){"use strict";function a(a,b,c){Point.apply(this,arguments),this.type="Point3D",this.z=c}a.prototype=new Point,a.prototype.constructor=a,a.prototype.distanceToPoint3D=function(a){return Math.sqrt(Math.pow(Math.abs(this.x-a.x),2)+Math.pow(Math.abs(this.y-a.y),2)+Math.pow(Math.abs(this.z-a.z),2))},a.prototype.distanceToPointSquared=function(a){return Math.pow(Math.abs(this.x-a.x),2)+Math.pow(Math.abs(this.y-a.y),2)+Math.pow(Math.abs(this.z-a.z),2)},a.prototype.getNorm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},a.prototype.normalizeToValue=function(b){var c=b/Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2)+Math.pow(this.z,2));return new a(this.x*c,this.y*c,this.z*c)},a.prototype.cross=function(b){var c=this.y*b.z-this.z*b.y,d=this.z*b.x-this.x*b.z,e=this.x*b.y-this.y*b.x;return new a(c,d,e)},a.prototype.dot=function(a){return this.x*a.x+this.y*a.y+this.z*a.z},a.prototype.add=function(b){return new a(b.x+this.x,b.y+this.y,b.z+this.z)},a.prototype.subtract=function(b){return new a(this.x-b.x,this.y-b.y,this.z-b.z)},a.prototype.factor=function(b){return new a(this.x*b,this.y*b,this.z*b)},a.prototype.interpolate=function(b,c){return new a((1-c)*this.x+c*b.x,(1-c)*this.y+c*b.y,(1-c)*this.z+c*b.z)},a.prototype.getAngles=function(){var b=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z),c=.5*Math.PI-Math.atan2(this.z/b,this.y/b),d=-Math.asin(this.x/b);return c<-Math.PI&&(c+=2*Math.PI),c>Math.PI&&(c-=2*Math.PI),d<-Math.PI&&(d+=2*Math.PI),d>Math.PI&&(d-=2*Math.PI),new a(c,d,0)},a.prototype.getInverseAngles=function(){var b=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z),c=-.5*Math.PI+Math.atan2(-this.z/b,-this.y/b),d=Math.asin(-this.x/b);return c<-Math.PI&&(c+=2*Math.PI),c>Math.PI&&(c-=2*Math.PI),d<-Math.PI&&(d+=2*Math.PI),d>Math.PI&&(d-=2*Math.PI),new a(c,d,0)},a.prototype.clone=function(){return new a(this.x,this.y,this.z)},a.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", z="+this.z+")"},a.prototype.destroy=function(){delete this.type,delete this.name,delete this.x,delete this.y,delete this.z}}),define("src/dataStructures/geometry/Polygon",function(){"use strict";function a(){var b=List.apply(this,arguments);return b=a.fromArray(b)}a.prototype=new List,a.prototype.constructor=a,a.fromArray=function(b){var c=List.fromArray(b);return c.type="Polygon",c.getFrame=a.prototype.getFrame,c.getBarycenter=a.prototype.getBarycenter,c.add=a.prototype.add,c.factor=a.prototype.factor,c.getRotated=a.prototype.getRotated,c.getClosestPoint=a.prototype.getClosestPoint,c.toNumberList=a.prototype.toNumberList,c.containsPoint=a.prototype.containsPoint,c.approach=a.prototype.approach,c.clone=a.prototype.clone,c},a.prototype.getFrame=function(){if(0==this.length)return null;for(var a,b=new Rectangle(this[0].x,this[0].y,this[0].x,this[0].y),c=1;null!=this[c];c++)a=this[c],b.x=Math.min(b.x,a.x),b.y=Math.min(b.y,a.y),b.width=Math.max(b.width,a.x),b.height=Math.max(b.height,a.y);return b.width-=b.x,b.height-=b.y,b},a.prototype.getBarycenter=function(a){var b;if(a=null==a?!0:a,cLPN=1-Number(a),0==this.length)return null;var c=new Point(this[0].x,this[0].y);for(b=1;null!=this[b+cLPN];b++)c.x+=this[b].x,c.y+=this[b].y;return c.x/=this.length,c.y/=this.length,c},a.prototype.add=function(b){var c,d=typeOf(b);switch(d){case"Point":var e=new a;for(c=0;null!=this[c];c++)e[c]=this[c].add(b);return e.name=this.name,e}},a.prototype.factor=function(b){var c,d=new a;if(d.name=this.name,b>=0||0>b){for(c=0;null!=this[c];c++)d[c]=new Point(this[c].x*b,this[c].y*b);return d}if(null!=b.type&&"Point"==b.type){for(c=0;null!=this[c];c++)d[c]=new Point(this[c].x*b.x,this[c].y*b.y);return d}return null},a.prototype.getRotated=function(b,c){c=null==c?new Point:c;for(var d=new a,e=0;null!=this[e];e++)d[e]=new Point(Math.cos(b)*(this[e].x-c.x)-Math.sin(b)*(this[e].y-c.y)+c.x,Math.sin(b)*(this[e].x-c.x)+Math.cos(b)*(this[e].y-c.y)+c.y);return d.name=this.name,d},a.prototype.getClosestPoint=function(a){for(var b,c=this[0],d=Math.pow(a.x-c.x,2)+Math.pow(a.y-c.y,2),e=1;null!=this[e];e++)b=Math.pow(a.x-this[e].x,2)+Math.pow(a.y-this[e].y,2),d>b&&(d=b,c=this[e]);return c},a.prototype.toNumberList=function(){var a,b=new NumberList;for(a=0;null!=this[a];a++)b[2*a]=this[a].x,b[2*a+1]=this[a].y;return b},a.prototype.containsPoint=function(a){for(var b,c,d,e=!1,b=-1,d=this.length,c=d-1;++b<d;c=b)(this[b].y<=a.y&&a.y<this[c].y||this[c].y<=a.y&&a.y<this[b].y)&&a.x<(this[c].x-this[b].x)*(a.y-this[b].y)/(this[c].y-this[b].y)+this[b].x&&(e=!e);return e},a.prototype.approach=function(a,b){b=b||.5;var c=1-b;this.forEach(function(d,e){d.x=c*d.x+b*a[e].x,d.y=c*d.y+b*a[e].y})},a.prototype.clone=function(){for(var b=new a,c=0;null!=this[c];c++)b[c]=this[c].clone();return b.name=this.name,b}}),define("src/dataStructures/geometry/Polygon3D",function(){"use strict";function a(){var b=List.apply(this,arguments);return b=a.fromArray(b)}a.prototype=new List,a.prototype.constructor=a,a.fromArray=function(a){var b=List.fromArray(a);return b.type="Polygon3D",b}}),define("src/dataStructures/geometry/Polygon3DList",function(){"use strict";function a(){var b=List.apply(this,arguments);return b=a.fromArray(b)}a.prototype=new List,a.prototype.constructor=a,a.fromArray=function(a){var b=List.fromArray(a);return b.type="Polygon3DList",b}}),define("src/dataStructures/geometry/PolygonList",function(){"use strict";function a(){var b=Table.apply(this,arguments);return b=a.fromArray(b)}a.prototype=new Table,a.prototype.constructor=a,a.fromArray=function(b){var c=Table.fromArray(b);return c.type="PolygonList",c.getFrame=a.prototype.getFrame,c.add=a.prototype.add,c.factor=a.prototype.factor,c.clone=a.prototype.clone,c.getString=a.prototype.getString,c},a.prototype.getFrame=function(){if(0==this.length)return null;for(var a=this[0].getFrame(),b=new Rectangle(a.x,a.y,a.getRight(),a.getBottom()),c=1;null!=this[c];c++)a=this[c].getFrame(),b.x=Math.min(b.x,a.x),b.y=Math.min(b.y,a.y),b.width=Math.max(b.width,a.getRight()),b.height=Math.max(b.height,a.getBottom());return b.width-=b.x,b.height-=b.y,b},a.prototype.add=function(b){var c,d=typeOf(b);switch(d){case"Point":var e=new a;for(c=0;null!=this[c];c++)e[c]=this[c].add(b);return e.name=this.name,e}},a.prototype.factor=function(b){for(var c=new a,d=0;null!=this[d];d++)c[d]=this[d].factor(b);return c.name=this.name,c},a.prototype.clone=function(){for(var b=new a,c=0;null!=this[c];c++)b[c]=this[c].clone();return b.name=this.name,b}}),define("src/dataStructures/geometry/Rectangle",function(){"use strict";function a(a,b,c,d){DataModel.apply(this),this.name="",this.type="Rectangle",this.x=Number(a)||0,this.y=Number(b)||0,this.width=Number(c)||0,this.height=Number(d)||0}a.prototype=new DataModel,a.prototype.constructor=a,a.prototype.getRight=function(){return this.x+this.width},a.prototype.getBottom=function(){return this.y+this.height},a.prototype.setRight=function(a){this.width=a-this.x},a.prototype.setBottom=function(a){this.height=a-this.y},a.prototype.getTopLeft=function(){return new Point(this.x,this.y)},a.prototype.getTopRight=function(){return new Point(this.x+this.width,this.y)},a.prototype.getBottomRight=function(){return new Point(this.x+this.width,this.y+this.height)},a.prototype.getBottomLeft=function(){return new Point(this.x,this.y+this.height)},a.prototype.getCenter=function(){return new Point(this.x+.5*this.width,this.y+.5*this.height)},a.prototype.getRandomPoint=function(){return new Point(this.x+Math.random()*this.width,this.y+Math.random()*this.height)},a.prototype.getIntersection=function(b){if(b.x+b.width<this.x||b.x>this.x+this.width||b.y+b.height<this.y||b.y>this.y+this.height)return null;var c=Math.max(b.x,this.x),d=Math.max(b.y,this.y);return new a(c,d,Math.min(b.x+b.width,this.x+this.width)-c,Math.min(b.y+b.height,this.y+this.height)-d)},a.prototype.interpolate=function(b,c){var d=1-c;return new a(d*this.x+c*b.x,d*this.y+c*b.y,d*this.width+c*b.width,d*this.height+c*b.height)},a.prototype.getRatio=function(){return Math.max(this.width,this.height)/Math.min(this.width,this.height)},a.prototype.getArea=function(){return this.width*this.height},a.prototype.containsPoint=function(a){return this.x<=a.x&&this.x+this.width>=a.x&&this.y<=a.y&&this.y+this.height>=a.y},a.prototype.pointIsOnBorder=function(a,b){if(b=null==b?1:b,a.x>=this.x-b&&a.x<=this.x+this.width+b){if(a.y>=this.y-b&&a.y<=this.y+b)return!0;if(a.y>=this.y+this.height-b&&a.y<=this.y+this.height+b)return!0;if(a.y>=this.y-b&&a.y<=this.y+this.height+b&&(a.x<this.x+b||a.x>this.x+this.width-b))return!0}return!1},a.prototype.getNormalRectangle=function(){return new a(Math.min(this.x,this.x+this.width),Math.min(this.y,this.y+this.height),Math.abs(this.width),Math.abs(this.height))},a.prototype.intersectsRectangle=function(a){return!(this.x+this.width<a.x||this.y+this.height<a.y||a.x+a.width<this.x||a.y+a.height<this.y)},a.prototype.expand=function(b,c){return c=c||new Point(this.x+.5*this.width,this.y+.5*this.height),new a((this.x-c.x)*b+c.x,(this.y-c.y)*b+c.y,this.width*b,this.height*b)},a.prototype.isEqual=function(a){return this.x==a.x&&this.y==a.y&&this.width==a.width&&this.height==a.height},a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.toString=function(){return"(x="+this.x+", y="+this.y+", w="+this.width+", h="+this.height+")"},a.prototype.destroy=function(){delete this.x,delete this.y,delete this.width,delete this.height}}),define("src/dataStructures/geometry/RectangleList",function(){"use strict";function a(){var b=List.apply(this,arguments);return b=a.fromArray(b)}a.prototype=new List,a.prototype.constructor=a,a.fromArray=function(b){var c=List.fromArray(b);return c.type="RectangleList",c.getFrame=a.prototype.getFrame,c.add=a.prototype.add,c.factor=a.prototype.factor,c.getAddedArea=a.prototype.getAddedArea,c.getIntersectionArea=a.prototype.getIntersectionArea,c},a.prototype.getFrame=function(){if(0==this.length)return null;var a=this[0];a.width=a.getRight(),a.height=a.getBottom();for(var b=1;null!=this[b];b++)a.x=Math.min(a.x,this[b].x),a.y=Math.min(a.y,this[b].y),a.width=Math.max(this[b].getRight(),a.width),a.height=Math.max(this[b].getBottom(),a.height);return a.width-=a.x,a.height-=a.y,a},a.prototype.add=function(){},a.prototype.factor=function(){},a.prototype.getAddedArea=function(){},a.prototype.getIntersectionArea=function(){for(var a,b,c,d=0,e=0;null!=this[e+1];e++){a=this[e];for(var f=e+1;null!=this[f];f++)b=this[f],c=a.getIntersection(b),d+=null==c?0:c.getArea()}return d}}),define("src/dataStructures/graphic/ColorList",function(){"use strict";function a(){var b;for(b=0;b<arguments.length;b++)arguments[b]=arguments[b];var c=List.apply(this,arguments);return c=a.fromArray(c)}a.prototype=new List,a.prototype.constructor=a,a.fromArray=function(b){var c=List.fromArray(b);return c.type="ColorList",c.getRgbArrays=a.prototype.getRgbArrays,c.getInterpolated=a.prototype.getInterpolated,c.getInverted=a.prototype.getInverted,c.addAlpha=a.prototype.addAlpha,c},a.prototype.getRgbArrays=function(){for(var a=new List,b=0;null!=this[b];b++)a[b]=ColorOperators.colorStringToRGB(this[b]);return a},a.prototype.getInterpolated=function(b,c){for(var d=new a,e=0;null!=this[e];e++)d[e]=ColorOperators.interpolateColors(this[e],b,c);return d.name=this.name,d},a.prototype.getInverted=function(){for(var b=new a,c=0;null!=this[c];c++)b[c]=ColorOperators.invertColor(this[c]);return b.name=this.name,b},a.prototype.addAlpha=function(b){for(var c=new a,d=0;null!=this[d];d++)c[d]=ColorOperators.addAlpha(this[d],b);return c.name=this.name,c}}),define("src/dataStructures/graphic/ColorScale",function(){"use strict";function a(a){DataModel.apply(this,arguments),this.name="",this.type="ColorScale",this.colorScaleFunction=a?a:ColorScales.blackScale}a.prototype=new DataModel,a.prototype.constructor=a,a.prototype.getColor=function(a){return this.colorScaleFunction(a)},a.prototype.getColorList=function(a){var b,c=new ColorList;for(b=0;a>b;b++)c.push(this.getColor(b/(a-1)));return c}}),define("src/dataStructures/lists/List",function(){"use strict";function a(){DataModel.apply(this);var b,c=[];for(b=0;b<arguments.length;b++)c.push(arguments[b]);return c=a.fromArray(c)}a.prototype=new DataModel,a.prototype.constructor=a,a.fromArray=function(b){return b.type="List",b.name=b.name||"",b.setType=a.prototype.setType,b.setArray=a.prototype.setArray,b._constructor=a,b.getImproved=a.prototype.getImproved,b.sameElements=a.prototype.sameElements,b.getLength=a.prototype.getLength,b.getTypeOfElements=a.prototype.getTypeOfElements,b.getTypes=a.prototype.getTypes,b.getType=a.prototype.getType,b.getLengths=a.prototype.getLengths,b.getWithoutRepetitions=a.prototype.getWithoutRepetitions,b.getElementsRepetitionCount=a.prototype.getElementsRepetitionCount,b.allElementsEqual=a.prototype.allElementsEqual,b.countElement=a.prototype.countElement,b.countOccurrences=a.prototype.countOccurrences,b.getMostRepeatedElement=a.prototype.getMostRepeatedElement,b.getMin=a.prototype.getMin,b.getMax=a.prototype.getMax,b.indexesOf=a.prototype.indexesOf,b.indexOfElements=a.prototype.indexOfElements,b.indexOfByPropertyValue=a.prototype.indexOfByPropertyValue,b.getFirstElementByName=a.prototype.getFirstElementByName,b.getElementsByNames=a.prototype.getElementsByNames,b.getFirstElementByPropertyValue=a.prototype.getFirstElementByPropertyValue,b.add=a.prototype.add,b.multiply=a.prototype.multiply,b.getSubList=a.prototype.getSubList,b.getSubListByIndexes=a.prototype.getSubListByIndexes,b.getSubListByType=a.prototype.getSubListByType,b.getElementNumberOfOccurrences=a.prototype.getElementNumberOfOccurrences,b.getPropertyValues=a.prototype.getPropertyValues,b.getRandomElement=a.prototype.getRandomElement,b.getRandomElements=a.prototype.getRandomElements,b.containsElement=a.prototype.containsElement,b.indexOfElement=a.prototype.indexOfElement,b.sortIndexed=a.prototype.sortIndexed,b.sortNumericIndexed=a.prototype.sortNumericIndexed,b.sortNumeric=a.prototype.sortNumeric,b.sortNumericIndexedDescending=a.prototype.sortNumericIndexedDescending,b.sortNumericDescending=a.prototype.sortNumericDescending,b.sortOnIndexes=a.prototype.sortOnIndexes,b.getReversed=a.prototype.getReversed,b.getSortedByProperty=a.prototype.getSortedByProperty,b.getSorted=a.prototype.getSorted,b.getSortedByList=a.prototype.getSortedByList,b.getSortedRandom=a.prototype.getSortedRandom,b.getFilteredByPropertyValue=a.prototype.getFilteredByPropertyValue,b.getFilteredByBooleanList=a.prototype.getFilteredByBooleanList,b.toNumberList=a.prototype.toNumberList,b.toStringList=a.prototype.toStringList,b.clone=a.prototype.clone,b.toString=a.prototype.toString,b.getNames=a.prototype.getNames,b.applyFunction=a.prototype.applyFunction,b.getWithoutElementAtIndex=a.prototype.getWithoutElementAtIndex,b.getWithoutElement=a.prototype.getWithoutElement,b.getWithoutElements=a.prototype.getWithoutElements,b.getWithoutElementsAtIndexes=a.prototype.getWithoutElementsAtIndexes,b.getFilteredByFunction=a.prototype.getFilteredByFunction,b._concat=Array.prototype.concat,b.concat=a.prototype.concat,b.getReport=a.prototype.getReport,b.pushIfUnique=a.prototype.pushIfUnique,b.removeElement=a.prototype.removeElement,b.removeElementAtIndex=a.prototype.removeElementAtIndex,b.removeElementsAtIndexes=a.prototype.removeElementsAtIndexes,b.removeElements=a.prototype.removeElements,b.removeRepetitions=a.prototype.removeRepetitions,b.replace=a.prototype.replace,b.assignNames=a.prototype.assignNames,b._splice=Array.prototype.splice,b.splice=a.prototype.splice,b.isList=!0,b.destroy=a.prototype.destroy,b},a.prototype.getImproved=function(){if(0==this.length)return this;var a=this.getTypeOfElements();switch(a){case"number":var b=NumberList.fromArray(this,!1);break;case"string":var b=StringList.fromArray(this,!1);break;case"Rectangle":return this;case"date":var b=DateList.fromArray(this,!1);break;case"List":case"DateList":case"IntervalList":case"StringList":case"Table":var b=Table.fromArray(this,!1);break;case"NumberList":var b=NumberTable.fromArray(this,!1);break;case"Point":var b=Polygon.fromArray(this,!1);break;case"Polygon":var b=PolygonList.fromArray(this,!1);break;case"Node":var b=NodeList.fromArray(this,!1);break;case"Relation":var b=RelationList.fromArray(this,!1)}if(null==b||""==b){var c,d=!0;for(c=0;null!=this[c];c++)if(!this[c].isList){d=!1;break}d&&(b=Table.fromArray(this,!1))}return null!=b?(b.name=this.name,b):this},a.prototype.sameElements=function(a){if(this.length!=a.length)return!1;var b;for(b=0;null!=this[b];b++)if(this[b]!=a[b])return!1;return!0},a.prototype.getLength=function(){return this.length},a.prototype.getLengths=function(){return null},a.prototype.getTypeOfElements=function(){for(var a=typeOf(this[0]),b=1;null!=this[b];b++)if(typeOf(this[b])!=a)return"";return a},a.prototype.getTypes=function(){var a=new StringList;for(i=0;null!=this[i];i++)a[i]=typeOf(this[i]);return a},a.prototype.toString=function(){var a,b="[";for(a=0;a<this.length-1;a++)b+=this[a]+", ";return b+=this[this.length-1]+"]"},a.prototype.getNames=function(){var a=new StringList;for(i=0;null!=this[i];i++)a[i]=this[i].name;return a},a.prototype.getReversed=function(){for(var a=instantiateWithSameType(this),b=0;null!=this[b];b++)a.unshift(this[b]);return a},a.prototype.getSubList=function(){if(arguments[0].isList)return this.getSubListByIndexes(arguments[0]);if(arguments.length>2)return this.getSubListByIndexes(arguments);"number"==typeOf(arguments[0])?null!=typeOf(arguments[1])&&"number"==typeOf(arguments[1])?interval=new Interval(arguments[0],arguments[1]):interval=new Interval(arguments[0],this.length-1):interval=arguments[0];var b,c=new Interval(Math.max(Math.min(Math.floor(interval.x),this.length),0),Math.max(Math.min(Math.floor(interval.y),this.length-1),0));if("NumberList"==this.type)return b=NumberList.fromArray(this.slice(interval.x,interval.y+1),!1),b.name=this.name,b;if("StringList"==this.type)return b=StringList.fromArray(this.slice(interval.x,interval.y+1),!1),b.name=this.name,b;b="List"==this.type||"Table"==this.type?new a:instantiate(typeOf(this));for(var d=c.x;d<=c.y;d++)b.push(this[d]);return b.name=this.name,"List"==this.type||"Table"==this.type?b.getImproved():b},a.prototype.getSubListByType=function(b){var c=new a;return c.name=this.name,this.forEach(function(a){typeOf(a)==b&&c.push(a)}),c.getImproved()},a.prototype.getSubListByIndexes=function(){if(this.length<1)return this;var b;if(b="number"==typeOf(arguments[0])?arguments:arguments[0],null!=b){if("List"==this.type)var c=new a;else c=instantiate(typeOf(this));if(0==b.length)return c;c.name=this.name;var d,e=this.length,f=b.length;for(d=0;f>d;d++)b[d]<e&&c.push(this[(b[d]+this.length)%this.length]);return"List"==this.type||"Table"==this.type?c.getImproved():c}},a.prototype.getElementNumberOfOccurrences=function(a){for(var b=0,c=0,d=this.indexOf(a,c);d>-1;)b++,c=d+1,d=this.indexOf(a,c);return b},
a.prototype.clone=function(){var a,b=instantiateWithSameType(this);for(a=0;null!=this[a];a++)b.push(this[a]);return b.name=this.name,b},a.prototype.getWithoutRepetitions=function(){var a,b;if(newList=instantiateWithSameType(this),newList.name=this.name,"NumberList"==this.type||"StringList"==this.type)for(b={},a=0;null!=this[a];a++)b[this[a]]||(newList.push(this[a]),b[this[a]]=!0);else for(a=0;null!=this[a];a++)-1==newList.indexOf(this[a])&&newList.push(this[a]);return newList},a.prototype.countElement=function(a){return n=0,this.forEach(function(b){a==b&&n++}),n},a.prototype.countOccurrences=function(){for(var a=new NumberList,b=0;null!=this[b];b++)a[b]=this.indexesOf(this[b]).length;return a},a.prototype.getElementsRepetitionCount=function(b){b=null==b?!0:b;var c,d,e=new a,f=new NumberList,g=this.length;for(i=0;i<g;i++)c=this[i],d=e.indexOf(c),-1!=d?f[d]++:(e.push(c),f.push(1));var h=new Table;return h.push(e),h.push(f),b&&(h=h.getListsSortedByList(f,!1)),h},a.prototype.allElementsEqual=function(){var a;if(this.length<2)return!0;for(first=this[0],a=1;null!=this[a];a++)if(this[a]!=first)return!1;return!0},a.prototype.getMostRepeatedElement=function(){return ListOperators.countElementsRepetitionOnList(this,!0)[0][0]},a.prototype.getMin=function(){if(0==this.length)return null;var a,b=this[0];for(a=1;a<this.length;a++)b=Math.min(b,this[a]);return b},a.prototype.getMax=function(){if(0==this.length)return null;var a,b=this[0];for(a=1;a<this.length;a++)b=Math.max(b,this[a]);return b},a.prototype.add=function(a){if(a.constructor==Number){var b,c=instantiateWithSameType(this);for(b=0;b<this.length;b++)c.push(this[b]+a);return c}},a.prototype.getRandomElement=function(){return this[Math.floor(this.length*Math.random())]},a.prototype.getRandomElements=function(a,b){b=null==b?!0:b,a=Math.min(a,this.length);for(var c,d=instantiateWithSameType(this);d.length<a;)c=this[Math.floor(this.length*Math.random())],b&&-1!=d.indexOf(c)||d.push(c);return d},a.prototype.containsElement=function(a){var b;for(b=0;null!=this[b];b++)if(this[b]==a)return!0;return!1},a.prototype.indexOfElement=function(a){var b;for(b=0;null!=this[b];b++)if(this[b]==a)return b;return-1},a.prototype.getPropertyValues=function(b,c){var d=new a;d.name=b;for(var e,f=0;null!=this[f];f++)e=this[f][b],d[f]=null==e?c:e;return d.getImproved()},a.prototype.sortIndexed=function(){var a,b=[];for(a=0;a<this.length;a++)b.push({index:a,value:this[a]});var c=function(a,b){var c=a.value,d=b.value;return d>c?-1:c>d?1:0};b=b.sort(c);var d=new NumberList;for(a=0;a<b.length;a++)d.push(b[a].index);return d},a.prototype.sortOnIndexes=function(a){var b=instantiateWithSameType(this);b.name=this.name;var c;for(c=0;null!=this[c];c++)-1!=a[c]&&b.push(this[a[c]]);return b},a.prototype.getSortedByProperty=function(a,b){b=null==b?!0:b;var c;return c=b?function(b,c){return b[a]>c[a]?1:-1}:function(b,c){return c[a]>b[a]?1:-1},this.clone().sort(c)},a.prototype.getSorted=function(a){a=null==a?!0:a;var b;return b=a?function(a,b){return a>b?1:-1}:function(a,b){return a>b?-1:1},this.clone().sort(b)},a.prototype.getSortedByList=function(a,b){b=null==b?!0:b;var c,d=[];for(c=0;null!=this[c];c++)d[c]=[this[c],a[c]];var e;e=b?function(a,b){return a[1]<b[1]?-1:1}:function(a,b){return a[1]<b[1]?1:-1},d=d.sort(e);var f=instantiateWithSameType(this);for(f.name=this.name,c=0;null!=this[c];c++)f[c]=d[c][0];return f},a.prototype.getSortedRandom=function(){var a=this.clone();return a.name=this.name,a.sort(function(a,b){return Math.random()<.5?1:-1}),a},a.prototype.indexesOf=function(a){for(var b=this.indexOf(a),c=new NumberList;-1!=b;)c.push(b),b=this.indexOf(a,b+1);return c},a.prototype.indexOfElements=function(a){for(var b=new NumberList,c=0;null!=a[c];c++)b[c]=this.indexOf(a[c]);return b},a.prototype.getFirstElementByName=function(a,b){for(var c=0;null!=this[c];c++)if(this[c].name==a)return b?c:this[c];return b?-1:null},a.prototype.getElementsByNames=function(b,c){var d,e=c?new NumberList:new a;return b.forEach(function(a){for(d=0;null!=this[d];d++)if(this[d].name==a){e.push(c?d:this[d]);break}e.push(c?-1:null)}),c?e:e.getImproved()},a.prototype.getFirstElementByPropertyValue=function(a,b){for(var c=0;null!=this[c];c++)if(this[c][a]==b)return this[c];return null},a.prototype.indexOfByPropertyValue=function(a,b){for(var c=0;null!=this[c];c++)if(this[c][a]==b)return c;return-1},a.prototype.getFilteredByBooleanList=function(b){var c=new a;c.name=this.name;var d;for(d=0;null!=this[d];d++)b[d]&&c.push(this[d]);return c.getImproved()},a.prototype.getFilteredByValue=function(b,c){c=null==c?"equal":c;var d=new a;d.name="filtered_"+this.name;var e;switch(c){case"equal":for(e=0;null!=this[e];e++)this[e][propertyName]==propertyValue&&d.push(this[e]);break;case"different":for(e=0;null!=this[e];e++)this[e][propertyName]!=propertyValue&&d.push(this[e]);break;case"greater":for(e=0;null!=this[e];e++)this[e][propertyName]>propertyValue&&d.push(this[e]);break;case"lower":for(e=0;null!=this[e];e++)this[e][propertyName]>propertyValue&&d.push(this[e])}return d.getImproved()},a.prototype.getFilteredByPropertyValue=function(b,c,d){d=null==d?"equal":d;var e=new a;e.name="filtered_"+this.name;var f;switch(d){case"equal":for(f=0;null!=this[f];f++)this[f][b]==c&&e.push(this[f]);break;case"different":for(f=0;null!=this[f];f++)this[f][b]!=c&&e.push(this[f]);break;case"greater":for(f=0;null!=this[f];f++)this[f][b]>c&&e.push(this[f]);break;case"lower":for(f=0;null!=this[f];f++)this[f][b]>c&&e.push(this[f])}return e.getImproved()},a.prototype.toNumberList=function(){var a=new NumberList;a.name=this.name;var b;for(b=0;null!=this[b];b++)a[b]=Number(this[b]);return a},a.prototype.toStringList=function(){var a,b=new StringList;for(b.name=this.name,a=0;null!=this[a];a++)"number"==typeof this[a]?b[a]=String(this[a]):b[a]=this[a].toString();return b},a.prototype.applyFunction=function(b){var c=new a;c.name=this.name;var d;for(d=0;null!=this[d];d++)c[d]=b(this[d]);return c.getImproved()},a.prototype.getWithoutElementsAtIndexes=function(b){var c;if("List"==this.type)var d=new a;else d=instantiate(typeOf(this));for(c=0;c<this.length;c++)-1==b.indexOf(c)&&d.push(this[c]);return"List"==this.type?d.getImproved():d},a.prototype.getWithoutElementAtIndex=function(b){if("List"==this.type)var c=new a;else var c=instantiateWithSameType(this);for(var d=0;null!=this[d];d++)d!=b&&c.push(this[d]);return c.name=this.name,"List"==this.type?c.getImproved():c},a.prototype.getWithoutElement=function(b){var c=this.indexOf(b);if(-1==c)return this;if("List"==this.type)var d=new a;else var d=instantiateWithSameType(this);d.name=this.name;var e;for(e=0;null!=this[e];e++)e!=c&&d.push(this[e]);return"List"==this.type?d.getImproved():d},a.prototype.getWithoutElements=function(b){if("List"==this.type)var c=new a;else var c=instantiateWithSameType(this);for(var d=0;null!=this[d];d++)-1==b.indexOf(this[d])&&c.push(this[d]);return c.name=this.name,"List"==this.type?c.getImproved():c},a.prototype.getFilteredByFunction=function(a){for(var b=instantiateWithSameType(this),c=0;null!=this[c];c++)a(this[c])&&b.push(this[c]);return b.name=this.name,"List"==this.type?b.getImproved():b},a.prototype.concat=function(){if(null==arguments[0])return this;if(arguments[0].type==this.type){if("NumberList"==this.type)return NumberList.fromArray(this._concat.apply(this,arguments),!1);if("StringList"==this.type)return StringList.fromArray(this._concat.apply(this,arguments),!1);if("NodeList"==this.type)return NodeList.fromArray(this._concat.apply(this,arguments),!1);if("DateList"==this.type)return DateList.fromArray(this._concat.apply(this,arguments),!1);if("Table"==this.type)return Table.fromArray(this._concat.apply(this,arguments),!1);if("NumberTable"==this.type)return NumberTable.fromArray(this._concat.apply(this,arguments),!1)}return a.fromArray(this._concat.apply(this,arguments)).getImproved()},a.prototype.getReport=function(a){var b,c="\n"+(a>0?StringOperators.repeatString("  ",a):""),d=a>0?c+"////report of instance of List////":"///////////report of instance of List//////////",e=this.length;if(d+=c+"name: "+this.name,d+=c+"type: "+this.type,0==e)return d+=c+"single element: ["+this[0]+"]";switch(d+=c+"length: "+e,d+=c+"first element: ["+this[0]+"]",this.type){case"NumberList":var f=this.getMin(),g=this.getMax(),h=.5*(f+g);d+=c+"min: "+f,d+=c+"max: "+g,d+=c+"average: "+h,101>e&&(d+=c+"numbers: "+this.join(", "));break;case"StringList":case"List":var i=this.getElementsRepetitionCount(!0);for(d+=c+"number of different elements: "+i[0].length,d+=i[0].length<10?c+"elements frequency:":c+"some elements frequency:",b=0;null!=i[0][b]&&10>b;b++)d+=c+"  ["+String(i[0][b])+"]: "+i[1][b];var j;j="List"==this.type?this.join("], ["):this.toStringList().join("], ["),j.length<2e3&&(d+=c+"strings: ["+j+"]")}return d},a.prototype.pushIfUnique=function(a){-1==this.indexOf(a)&&this.push(a)},a.prototype.removeElements=function(a){for(var b=0;b<this.length;b++)a.indexOf(this[b])>-1&&(this.splice(b,1),b--)},a.prototype.removeElement=function(a){var b=this.indexOf(a);-1!=b&&this.splice(b,1)},a.prototype.removeElementAtIndex=function(a){this.splice(a,1)},a.prototype.removeElementsAtIndexes=function(a){a=a.sort(function(a,b){return a-b});for(var b=0;null!=a[b];b++)this.splice(a[b]-b,1)},a.prototype.removeRepetitions=function(){for(var a=0;null!=this[a];a++)-1!=this.indexOf(this[a],a+1)&&this.splice(a,1)},a.prototype.replace=function(a,b){for(var c=this.length,d=0;c>d;d++)this[d]==a&&(this[d]=b)},a.prototype.assignNames=function(a){if(null==a)return this;var b=a.length;return this.forEach(function(c,d){c.name=a[d%b]}),this},a.prototype.splice=function(){switch(this.type){case"NumberList":return NumberList.fromArray(this._splice.apply(this,arguments));case"StringList":return StringList.fromArray(this._splice.apply(this,arguments));case"NodeList":return NodeList.fromArray(this._splice.apply(this,arguments));case"DateList":return DateList.fromArray(this._splice.apply(this,arguments))}return a.fromArray(this._splice.apply(this,arguments)).getImproved()},a.prototype.destroy=function(){for(var a=0;null!=this[a];a++)delete this[a]}}),define("src/dataStructures/lists/Table",function(){"use strict";function a(){var b,c=[];for(b=0;b<arguments.length;b++)c[b]=new List(arguments[b]);var d=List.apply(this,c);return d=a.fromArray(d)}a.prototype=new List,a.prototype.constructor=a,a.fromArray=function(b){var c=List.fromArray(b);return c.type="Table",c.applyFunction=a.prototype.applyFunction,c.getRow=a.prototype.getRow,c.getRows=a.prototype.getRows,c.getLengths=a.prototype.getLengths,c.getListLength=a.prototype.getListLength,c.sliceRows=a.prototype.sliceRows,c.getSubListsByIndexes=a.prototype.getSubListsByIndexes,c.getWithoutRow=a.prototype.getWithoutRow,c.getWithoutRows=a.prototype.getWithoutRows,c.getTransposed=a.prototype.getTransposed,c.getListsSortedByList=a.prototype.getListsSortedByList,c.sortListsByList=a.prototype.sortListsByList,c.getReport=a.prototype.getReport,c.clone=a.prototype.clone,c.print=a.prototype.print,c.removeRow=a.prototype.removeRow,c.destroy=a.prototype.destroy,c.isTable=!0,c},a.prototype.applyFunction=function(b){var c,d=new a;for(d.name=this.name,c=0;null!=this[c];c++)d[c]=this[c].applyFunction(b);return d.getImproved()},a.prototype.getRow=function(a){var b,c=new List;for(b=0;b<this.length;b++)c[b]=this[b][a];return c.getImproved()},a.prototype.getListLength=function(a){return this[a||0].length},a.prototype.getLengths=function(){for(var a=new NumberList,b=0;null!=this[b];b++)a[b]=this[b].length;return a},a.prototype.sliceRows=function(b,c){c=null==c?this[0].length-1:c;var d,e,f=new a;for(f.name=this.name,d=0;null!=this[d];d++)e=this[d].getSubList(b,c),e.name=this[d].name,f.push(e);return f.getImproved()},a.prototype.getSubListsByIndexes=function(b){var c=new a;return this.forEach(function(a){c.push(a.getSubListByIndexes(b))}),c.getImproved()},a.prototype.getRows=function(b){return a.prototype.getSubListsByIndexes(indexes)},a.prototype.getWithoutRow=function(b){var c=new a;c.name=this.name;for(var d=0;null!=this[d];d++)c[d]=List.fromArray(this[d].slice(0,b).concat(this[d].slice(b+1))).getImproved(),c[d].name=this[d].name;return c.getImproved()},a.prototype.getWithoutRows=function(b){var c=new a;c.name=this.name;for(var d=0;null!=this[d];d++){for(c[d]=new List,j=0;null!=this[d][j];j++)-1==b.indexOf(j)&&c[d].push(this[d][j]);c[d].name=this[d].name}return c.getImproved()},a.prototype.getListsSortedByList=function(a,b){if(null!=a){var c=instantiateWithSameType(this),d=a.isList?a.clone():this[a];return this.forEach(function(a){c.push(a.getSortedByList(d,b))}),c}},a.prototype.getTransposed=function(a){var b=a?this.getSubList(1):this,c=instantiate(typeOf(b));if(0==b.length)return c;var d,e,f;b[0].length;for(d=0;null!=b[d];d++)for(f=b[d],e=0;null!=f[e];e++)0==d&&(c[e]=new List),c[e][d]=b[d][e];for(e=0;null!=b[0][e];e++)c[e]=c[e].getImproved();return a&&this[0].forEach(function(a,b){c[b].name=String(a)}),c},a.prototype.getReport=function(a){var b="\n"+(a>0?StringOperators.repeatString("  ",a):""),c=this.getLengths(),d=c.getMin(),e=c.getMax(),f=.5*(d+e),g=d==e,h=a>0?b+"////report of instance of Table////":"///////////report of instance of Table//////////";if(0==this.length)return h+=b+"this table has no lists";h+=b+"name: "+this.name,h+=b+"type: "+this.type,h+=b+"number of lists: "+this.length,h+=b+"all lists have same length: "+(g?"true":"false"),g?h+=b+"lists length: "+this[0].length:(h+=b+"min length: "+d,h+=b+"max length: "+e,h+=b+"average length: "+f,h+=b+"all lengths: "+c.join(", "));var i=this.getNames(),j=this.getTypes();h+=b+"--",i.forEach(function(a,c){h+=b+a+" ["+TYPES_SHORT_NAMES_DICTIONARY[j[c]]+"]"}),h+=b+"--";var k=j.allElementsEqual();if(h+=k?b+"types of all lists: "+j[0]:b+"types: "+j.join(", "),h+=b+"names: "+i.join(", "),this.length<101){h+=b+b+"--------lists reports---------";var l;for(l=0;null!=this[l];l++){h+="\n"+b+("("+l+"/0-"+(this.length-1)+")");try{h+=this[l].getReport(1)}catch(m){h+=b+"[!] something wrong with list "+m}}}return h},a.prototype.getReportHtml=function(){},a.prototype.getReportObject=function(){},a.prototype.removeRow=function(a){for(var b=0;null!=this[b];b++)this[b].splice(a,1)},a.prototype.clone=function(){var a=instantiateWithSameType(this);a.name=this.name;for(var b=0;null!=this[b];b++)a.push(this[b].clone());return a},a.prototype.destroy=function(){for(var a=0;null!=this[a];a++)this[a].destroy(),delete this[a]},a.prototype.print=function(){c.log("///////////// <"+this.name+"////////////////////////////////////////////////////"),c.log(TableEncodings.TableToCSV(this,null,!0)),c.log("/////////////"+this.name+"> ////////////////////////////////////////////////////")}}),define("src/dataStructures/numeric/Axis",function(){"use strict";function a(a,b){a=null==a?new Interval(0,1):a,b=null==b?new Interval(0,1):b,DataModel.apply(this,arguments),this.departureInterval=a,this.arrivalInterval=b,this.departureAmplitude,this.arrivalAmplitude,this.setDepartureInterval(a),this.setArrivalInterval(b),this.type="Axis"}a.prototype=new DataModel,a.prototype.constructor=a,a.prototype.setDepartureInterval=function(a){this.departureInterval=a,c.log("--> departureInterval",a),this.departureAmplitude=a.getSignedAmplitude()},a.prototype.setArrivalInterval=function(a){this.arrivalInterval=a,this.arrivalAmplitude=a.getSignedAmplitude()},a.prototype.project=function(a){return this.arrivalInterval.x+this.arrivalAmplitude*(a-this.departureInterval.x)/this.departureAmplitude},a.prototype.update=function(){this.departureAmplitude=this.departureInterval.getSignedAmplitude(),this.arrivalAmplitude=this.arrivalInterval.getSignedAmplitude()},a.prototype.toString=function(){return"Axis["+this.departureInterval.toString()+", "+this.arrivalInterval.toString()+"]"}}),define("src/dataStructures/numeric/Axis2D",function(){"use strict";function a(a,b){b=null==b?new Rectangle(0,0,1,1):b,DataModel.apply(this,arguments),this.departureFrame=a,this.arrivalFrame=b,this.pW,this.pH,this.setFrames(a,b),this.type="Axis2D"}a.prototype=new DataModel,a.prototype.constructor=a,a.prototype.setFrames=function(a,b){this.departureFrame=a,this.arrivalFrame=b,this._update()},a.prototype.setDepartureFrame=function(a){this.departureFrame=a,this._update()},a.prototype.setArrivalFrame=function(a){this.arrivalFrame=a,this._update()},a.prototype.project=function(a){return new Point((a.x-this.departureFrame.x)*this.pW+this.arrivalFrame.x,(a.y-this.departureFrame.y)*this.pH+this.arrivalFrame.y)},a.prototype.projectX=function(a){return(a-this.departureFrame.x)*this.pW+this.arrivalFrame.x},a.prototype.projectY=function(a){return(a-this.departureFrame.y)*this.pH+this.arrivalFrame.y},a.prototype.inverseProject=function(a){return new Point((a.x-this.arrivalFrame.x)/this.pW+this.departureFrame.x,(a.y-this.arrivalFrame.y)/this.pH+this.departureFrame.y)},a.prototype.inverseProjectX=function(a){return(a-this.arrivalFrame.x)/this.pW+this.departureFrame.x},a.prototype.inverseProjectY=function(a){return(a-this.arrivalFrame.y)/this.pH+this.departureFrame.y},a.prototype._update=function(){this.pW=this.arrivalFrame.width/this.departureFrame.width,this.pH=this.arrivalFrame.height/this.departureFrame.height},a.prototype.toString=function(){return"Axis2D["+this.departureFrame.toString()+", "+this.arrivalFrame.toString()+"]"}}),define("src/dataStructures/numeric/Interval",function(){"use strict";function a(a,b){DataModel.apply(this,arguments),this.x=Number(a),this.y=Number(b),this.type="Interval"}a.prototype=new Point,a.prototype.constructor=a,a.prototype.getMin=function(){return Math.min(x,y)},a.prototype.getMax=function(){return Math.max(x,y)},a.prototype.getAmplitude=function(){return Math.abs(this.x-this.y)},a.prototype.getSignedAmplitude=function(){return this.x-this.y},a.prototype.getMiddle=function(){return.5*(this.x+this.y)},a.prototype.getSign=function(){return this.x==this.y?0:this.getAmplitude()/this.getSignedAmplitude()},a.prototype.getScaled=function(b){var c=.5*(this.y-this.x),d=.5*(this.x+this.y);return new a(d-c*b,d+c*b)},a.prototype.getScaledFromProportion=function(b,c){var d=1-c,e=c*(this.y-this.x),f=d*(this.y-this.x),g=d*this.x+c*this.y;return new a(g-e*b,g+f*b)},a.prototype.add=function(b){return new a(this.x+b,this.y+b)},a.prototype.invert=function(){var a=this.x;this.x=this.y,this.y=a},a.prototype.getInterpolatedValue=function(a){return a*Number(this.getSignedAmplitude())+this.x},a.prototype.getInverseInterpolatedValue=function(a){return(a-this.x)/this.getSignedAmplitude()},a.prototype.getInterpolatedValues=function(a){for(var b=[],c=a.length,d=0;c>d;d++)b.push(this.getInterpolatedValue(a[d]));return b},a.prototype.getInverseInterpolatedValues=function(a){for(var b=[],c=a.length,d=0;c>d;d++)b.push(this.getInverseInterpolatedValue(a[d]));return b},a.prototype.intersect=function(b){return new a(Math.max(this.x,b.x),Math.min(this.y,b.y))},a.prototype.clone=function(){var b=new a(this.x,this.y);return b.name=name,b},a.prototype.contains=function(a){return this.y>this.x?a>=this.x&&a<=this.y:a>=this.y&&a<=this.y},a.prototype.isEquivalent=function(a){return this.x==a.x&&this.y==a.y},a.prototype.toString=function(){return"Interval[x:"+this.x+"| y:"+this.y+"| amplitude:"+this.getAmplitude()+"]"}}),define("src/dataStructures/numeric/Matrix",function(){"use strict";function a(a,b,c,d,e,f){DataModel.apply(this,arguments),this.name="",this.type="Matrix",this.a=null==a?1:a,this.b=null==b?0:b,this.c=null==c?0:c,this.d=null==d?1:d,this.tx=null==e?0:e,this.ty=null==f?0:f}a.prototype=new DataModel,a.prototype.constructor=a,a.prototype.transformPoint=function(a){return new Point(this.a*a.x+this.c*a.y+this.tx,this.b*a.x+this.d*a.y+this.ty)},a.prototype.concat=function(b){return a(this.a*b.a+this.c*b.b,this.b*b.a+this.d*b.b,this.a*b.c+this.c*b.d,this.b*b.c+this.d*b.d,this.a*b.tx+this.c*b.ty+this.tx,this.b*b.tx+this.d*b.ty+this.ty)},a.prototype.deltaTransformPoint=function(a){return Point(this.a*a.x+this.c*a.y,this.b*a.x+this.d*a.y)},a.prototype.getInverse=function(){var b=this.a*this.d-this.b*this.c;return new a(this.d/b,-this.b/b,-this.c/b,this.a/b,(this.c*this.ty-this.d*this.tx)/b,(this.b*this.tx-this.a*this.ty)/b)},a.prototype.rotate=function(b,c){return this.concat(a.rotation(b,c))},a.prototype.scale=function(b,c,d){return this.concat(a.scale(b,c,d))},a.prototype.translate=function(b,c){return this.concat(a.translation(b,c))}}),define("src/dataStructures/numeric/NumberList",function(){"use strict";function a(){for(var b=0;b<arguments.length;b++)arguments[b]=Number(arguments[b]);var c=List.apply(this,arguments);return c=a.fromArray(c)}a.prototype=new List,a.prototype.constructor=a,a.fromArray=function(b,c){c=null==c?!0:c;var d=List.fromArray(b);if(c)for(var e=0;e<d.length;e++)d[e]=Number(d[e]);return d.type="NumberList",d.unit=a.prototype.unit,d.tenPower=a.prototype.tenPower,d.getMin=a.prototype.getMin,d.getMax=a.prototype.getMax,d.getAmplitude=a.prototype.getAmplitude,d.getMinMaxInterval=a.prototype.getMinMaxInterval,d.getSum=a.prototype.getSum,d.getProduct=a.prototype.getProduct,d.getInterval=a.prototype.getInterval,d.getNormalized=a.prototype.getNormalized,d.getNormalizedToMax=a.prototype.getNormalizedToMax,d.getNormalizedToSum=a.prototype.getNormalizedToSum,d.toPolygon=a.prototype.toPolygon,d.getAverage=a.prototype.getAverage,d.getNorm=a.prototype.getNorm,d.getStandardDeviation=a.prototype.getStandardDeviation,d.getVariance=a.prototype.getVariance,d.getMedian=a.prototype.getMedian,d.getQuantiles=a.prototype.getQuantiles,d.getSorted=a.prototype.getSorted,d.getSortIndexes=a.prototype.getSortIndexes,d.factor=a.prototype.factor,d.add=a.prototype.add,d.subtract=a.prototype.subtract,d.divide=a.prototype.divide,d.dotProduct=a.prototype.dotProduct,d.distance=a.prototype.distance,d.sqrt=a.prototype.sqrt,d.pow=a.prototype.pow,d.log=a.prototype.log,d.isEquivalent=a.prototype.isEquivalent,d.toStringList=a.prototype.toStringList,d.approach=a.prototype.approach,d.clone=a.prototype.clone,d._slice=Array.prototype.slice,d.slice=a.prototype.slice,d},a.prototype.unit="",a.prototype.tenPower=0,a.prototype.getMin=function(){if(0==this.length)return null;var a,b=this[0];for(a=1;a<this.length;a++)b=Math.min(b,this[a]);return b},a.prototype.getMax=function(){if(0==this.length)return null;var a,b=this[0];for(a=1;a<this.length;a++)b=Math.max(b,this[a]);return b},a.prototype.getAmplitude=function(){if(0==this.length)return 0;for(var a=this[0],b=this[0],c=1;null!=this[c];c++)a=Math.min(a,this[c]),b=Math.max(b,this[c]);return b-a},a.prototype.getMinMaxInterval=function(){return new Interval(this.getMin(),this.getMax())},a.prototype.getSum=function(){if(0==this.length)return 0;var a,b=this[0];for(a=1;a<this.length;a++)b+=this[a];return b},a.prototype.getProduct=function(){if(0==this.length)return null;var a,b=this[0];for(a=1;a<this.length;a++)b*=this[a];return b},a.prototype.getNormalizedToSum=function(b,c){b=null==b?1:b;var d=new a;if(d.name=this.name,0==this.length)return d;var e,c=null==c?this.getSum():c;if(0==c)return this.clone();for(e=0;e<this.length;e++)d.push(b*this[e]/c);return d},a.prototype.getNormalized=function(b){if(b=null==b?1:b,0==this.length)return null;var c,d=this.getMinMaxInterval(),e=d.getAmplitude(),f=new a;for(c=0;c<this.length;c++)f.push(b*((this[c]-d.x)/e));return f.name=this.name,f},a.prototype.getNormalizedToMax=function(b){if(b=null==b?1:b,0==this.length)return null;var c=this.getMax();if(0==c&&(c=this.getMin(),0==c))return ListGenerators.createListWithSameElement(this.length,0);for(var d=new a,e=0;null!=this[e];e++)d.push(b*(this[e]/c));return d.name=this.name,d},a.prototype.getInterval=function(){if(0==this.length)return null;for(var a=this[0],b=this[0],c=1;null!=this[c];c++)a=Math.max(a,this[c]),b=Math.min(b,this[c]);var d=new Interval(b,a);return d},a.prototype.toPolygon=function(){if(0==this.length)return null;for(var a=new Polygon,b=0;null!=this[b+1];b+=2)a.push(new Point(this[b],this[b+1]));return a},a.prototype.getAverage=function(){return this.getSum()/this.length},a.prototype.getGeometricMean=function(){var a=0;return this.forEach(function(b){a+=Math.log(b)}),Math.pow(Math.E,a/this.length)},a.prototype.getNorm=function(){for(var a=0,b=0;null!=this[b];b++)a+=Math.pow(this[b],2);return Math.sqrt(a)},a.prototype.getVariance=function(){for(var a=0,b=this.getAverage(),c=0;null!=this[c];c++)a+=Math.pow(this[c]-b,2);return a/this.length},a.prototype.getStandardDeviation=function(){return Math.sqrt(this.getVariance())},a.prototype.getMedian=function(b){var c=this.getSorted(!0),d=(this.length-1)/2,e=Math.floor(d),f=d==e;new a;return f?c[d]:.5*c[e]+.5*c[e+1]},a.prototype.getQuantiles=function(b){for(var c=this.getSorted(!0),d=this.length/b,e=Math.floor(d),f=d==e,g=new a,h=0;b-1>h;h++)g[h]=f?c[(h+1)*d]:.5*c[(h+1)*e]+.5*c[(h+1)*e+1];return g},a.prototype.getSorted=function(b){return b=null==b?!0:b,b?a.fromArray(this.slice().sort(function(a,b){return a-b}),!1):a.fromArray(this.slice().sort(function(a,b){return b-a}),!1)},a.prototype.getSortIndexes=function(b){null==b&&(b=!0);var c=[],d=new a;if(0==this.length)return d;for(var e=0;null!=this[e];e++)c.push([e,this[e]]);for(b?c.sort(function(a,b){return a[1]<b[1]?1:-1}):c.sort(function(a,b){return a[1]<b[1]?-1:1}),e=0;null!=c[e];e++)d.push(c[e][0]);return d.name=this.name,d},a.prototype.factor=function(b){var c,d=new a;for(c=0;c<this.length;c++)d.push(this[c]*b);return d.name=this.name,d},a.prototype.add=function(b){var c,d=new a,e=typeOf(b);switch(e){case"number":for(c=0;null!=this[c];c++)d[c]=this[c]+b;break;case"NumberList":for(c=0;null!=this[c];c++)d[c]=this[c]+b[c%b.length]}return d.name=this.name,d},a.prototype.subtract=function(b){var c,d=new a,e=typeOf(b);switch(e){case"number":for(c=0;null!=this[c];c++)d[c]=this[c]-b;break;case"NumberList":for(c=0;null!=this[c];c++)d[c]=this[c]-b[c%b.length]}return d.name=this.name,d},a.prototype.divide=function(b){var c,d=new a,e=typeOf(b);switch(e){case"number":for(c=0;null!=this[c];c++)d[c]=this[c]/b;break;case"NumberList":for(c=0;null!=this[c];c++)d[c]=this[c]/b[c%b.length]}return d.name=this.name,d},a.prototype.sqrt=function(){var b,c=new a;for(b=0;b<this.length;b++)c.push(Math.sqrt(this[b]));return c.name=this.name,c},a.prototype.pow=function(b){var c,d=new a;for(c=0;c<this.length;c++)d.push(Math.pow(this[c],b));return d.name=this.name,d},a.prototype.log=function(b){b=b||0;var c,d=new a;for(c=0;null!=this[c];c++)d[c]=Math.log(this[c]+b);return d.name=this.name,d},a.prototype.dotProduct=function(a){var b,c=0,d=Math.min(this.length,a.length);for(b=0;d>b;b++)c+=this[b]*a[b];return c},a.prototype.distance=function(a){var b,c=0,d=Math.min(this.length,a.length);for(b=0;d>b;b++)c+=Math.pow(this[b]-a[b],2);return Math.sqrt(c)},a.prototype.isEquivalent=function(a){for(i=0;null!=this[i];i++)if(this[i]!=a[i])return!1;return!0},a.prototype.toStringList=function(){var a,b=new StringList;for(a=0;null!=this[a];a++)b[a]=String(this[a]);return b.name=this.name,b},a.prototype.approach=function(a,b){b=b||.5;var c,d=1-b;for(c=0;null!=this[c];c++)this[c]=d*this[c]+b*a[c]},a.prototype.clone=function(){var b=a.fromArray(this._slice(),!1);return b.name=this.name,b},a.prototype.slice=function(){return a.fromArray(this._slice.apply(this,arguments),!1)}}),define("src/dataStructures/numeric/NumberTable",function(){"use strict";function a(){var b,c;if(arguments.length>0&&Number(arguments[0])==arguments[0]){c=[];var d;for(d=0;d<arguments[0];d++)c.push(new NumberList)}else{for(var d=0;null!=arguments[d];d++)b=NumberList.fromArray(arguments[d]),b.name=arguments[d].name,arguments[d]=b;c=Table.apply(this,arguments)}return c=a.fromArray(c)}a.prototype=new Table,a.prototype.constructor=a,a.fromArray=function(b){var c=Table.fromArray(b);return c.type="NumberTable",c.getNumberListsNormalized=a.prototype.getNumberListsNormalized,c.getNormalizedToMax=a.prototype.getNormalizedToMax,c.getNumberListsNormalizedToMax=a.prototype.getNumberListsNormalizedToMax,c.getNumberListsNormalizedToSum=a.prototype.getNumberListsNormalizedToSum,c.getSums=a.prototype.getSums,c.getRowsSums=a.prototype.getRowsSums,c.getAverages=a.prototype.getAverages,c.getRowsAverages=a.prototype.getRowsAverages,c.factor=a.prototype.factor,c.add=a.prototype.add,c.getMax=a.prototype.getMax,c.getMinMaxInterval=a.prototype.getMinMaxInterval,c},a.prototype.getNumberListsNormalized=function(b){b=null==b?1:b;var c,d=new a;for(c=0;null!=this[c];c++)numberList=this[c],d[c]=numberList.getNormalized(b);return d.name=this.name,d},a.prototype.getNormalizedToMax=function(b){b=null==b?1:b;var c,d=new a,e=b/this.getMax();for(c=0;null!=this[c];c++)d[c]=this[c].factor(e);return d.name=this.name,d},a.prototype.getNumberListsNormalizedToMax=function(b){for(var c=new a,d=0;null!=this[d];d++)numberList=this[d],c[d]=numberList.getNormalizedToMax(b);return c.name=this.name,c},a.prototype.getNumberListsNormalizedToSum=function(){for(var b=new a,c=0;null!=this[c];c++)numberList=this[c],b[c]=numberList.getNormalizedToSum();return b.name=this.name,b},a.prototype.getMax=function(){if(0==this.length)return null;var a,b=this[0].getMax();for(a=1;null!=this[a];a++)b=Math.max(this[a].getMax(),b);return b},a.prototype.getMinMaxInterval=function(){if(0==this.length)return null;for(var a=this[0].getMinMaxInterval(),b=1;null!=this[b];b++){var c=this[b].getMinMaxInterval();a.x=Math.min(a.x,c.x),a.y=Math.max(a.y,c.y)}return a},a.prototype.getSums=function(){for(var a=new NumberList,b=0;null!=this[b];b++)a[b]=this[b].getSum();return a},a.prototype.getRowsSums=function(){for(var a,b=this[0].clone(),c=1;null!=this[c];c++){a=this[c];for(var d=0;null!=a[d];d++)b[d]+=a[d]}return b},a.prototype.getAverages=function(){for(var a=new NumberList,b=0;null!=this[b];b++)a[b]=this[b].getAverage();return a},a.prototype.getRowsAverages=function(){var a,b,c,d=this.length,e=this[0].clone().factor(1/d);for(b=1;null!=this[b];b++)for(a=this[b],c=0;null!=a[c];c++)e[c]+=a[c]/d;return e},a.prototype.factor=function(b){var c,d=new a;switch(typeOf(b)){case"number":for(c=0;null!=this[c];c++)numberList=this[c],d[c]=numberList.factor(b);break;case"NumberList":for(c=0;null!=this[c];c++)numberList=this[c],d[c]=numberList.factor(b[c])}return d.name=this.name,d},a.prototype.add=function(b){for(var c=new a,d=0;null!=this[d];d++)numberList=this[d],c[d]=numberList.add(b);return c.name=this.name,c}}),define("src/dataStructures/spaces/Space2D",function(){"use strict";function a(a){a=null==a?{}:a,this.center=null==a.center?new Point(0,0):a.center,this.scale=1,a.interactionActive&&this.activeInteraction(),this.MIN_SCALE=null==a.minScale?.05:a.minScale,this.MAX_SCALE=null==a.maxScale?20:a.maxScale,this.active=a.interactionActive}a.prototype.activeInteraction=function(){this.active||(this.active=!0,addInteractionEventListener("mousedown",this.onMouse,this),addInteractionEventListener("mouseup",this.onMouse,this),addInteractionEventListener("mousewheel",this.wheel,this))},a.prototype.deActivate=function(){this.active=!1,this.dragging=!1,removeInteractionEventListener("mousedown",this.onMouse,this),removeInteractionEventListener("mouseup",this.onMouse,this),removeInteractionEventListener("mousemove",this.onMouse,this),removeInteractionEventListener("mousewheel",this.wheel,this)},a.prototype.stopDragging=function(){removeInteractionEventListener("mousemove",this.onMouse,this)},a.prototype.project=function(a){return new Point((a.x-this.center.x)*this.scale,(a.y+this.center.y)*this.scale)},a.prototype.projectX=function(a){return(a-this.center.x)*this.scale},a.prototype.projectY=function(a){return(a-this.center.y)*this.scale},a.prototype.inverseProject=function(a){return new Point(a.x/this.scale+this.center.x,a.y/this.scale+this.center.y)},a.prototype.inverseProjectX=function(a){return a/this.scale+this.center.x},a.prototype.inverseProjectY=function(a){return a/this.scale+this.center.y},a.prototype.move=function(a,b){this.center=this.center.subtract(b?a.factor(1/this.scale):a)},a.prototype.factorScaleFromPoint=function(a,b){var c=(1-1/b)/this.scale;this.center.x=c*a.x+this.center.x,this.center.y=c*a.y+this.center.y,
this.scale*=b},a.prototype.fixX=function(a,b){this.center.x=a-b/this.scale},a.prototype.fixY=function(a,b){this.center.y=a-b/this.scale},a.prototype.fixHorizontalInterval=function(a,b){this.scale=b.getAmplitude()/a.getAmplitude(),this.fixX(.5*(a.x+a.y),.5*cW)},a.prototype.onMouse=function(a){switch(a.type){case"mousedown":if(!this.active)return;this.dragging=!0,this.prev_mX=mX,this.prev_mY=mY,addInteractionEventListener("mousemove",this.onMouse,this);break;case"mouseup":this.dragging=!1,removeInteractionEventListener("mousemove",this.onMouse,this);break;case"mousemove":if(!this.active)return;this.center.x+=(this.prev_mX-mX)/this.scale,this.center.y+=(this.prev_mY-mY)/this.scale,this.prev_mX=mX,this.prev_mY=mY}},a.prototype.wheel=function(a){return this.active?this.scale<=this.MIN_SCALE&&a.value>0?void(this.scale=this.MIN_SCALE):this.scale>=this.MAX_SCALE&&a.value<0?void(this.scale=this.MAX_SCALE):void this.factorScaleFromPoint(new Point(mX-0,mY-0),1-.02*a.value):void 0}}),define("src/dataStructures/strings/StringList",function(){"use strict";function a(){for(var b=0;b<arguments.length;b++)arguments[b]=String(arguments[b]);var c=List.apply(this,arguments);return c=a.fromArray(c)}a.prototype=new List,a.prototype.constructor=a,a.fromArray=function(b,c){c=null==c?!0:c;var d=List.fromArray(b);if(c)for(var e=0;e<d.length;e++)d[e]=String(d[e]);return d.type="StringList",d.getLengths=a.prototype.getLengths,d.toLowerCase=a.prototype.toLowerCase,d.toUpperCase=a.prototype.toUpperCase,d.append=a.prototype.append,d.getSurrounded=a.prototype.getSurrounded,d.replace=a.prototype.replace,d.getConcatenated=a.prototype.getConcatenated,d.toNumberList=a.prototype.toNumberList,d.toDateList=a.prototype.toDateList,d.trim=a.prototype.trim,d.clone=a.prototype.clone,d},a.prototype.getLengths=function(){var a=new NumberList;return this.forEach(function(b){a.push(b.length)}),a},a.prototype.append=function(b,c){c=null==c?!0:c;var d=new a;d.name=this.name;var e,f="StringList"==typeOf(b);if(c)for(e=0;null!=this[e];e++)d[e]=this[e]+(f?b[e]:b);else for(e=0;null!=this[e];e++)d[e]=(f?b[e]:b)+this[e];return d},a.prototype.getSurrounded=function(b,c){var d=new a;d.name=this.name;var e,f=Array.isArray(b),g=Array.isArray(c);for(e=0;null!=this[e];e++)d[e]=(f?b[e]:b)+this[e]+(g?c[e]:c);return d},a.prototype.replace=function(b,c){var d=new a;d.name=this.name;for(var e=0;null!=this[e];e++)d[e]=this[e].replace(b,c);return d},a.prototype.replaceSubStringsInStrings=function(b,c){var d=new a;d.name=this.name;for(var e=0;null!=this[e];e++)d[e]=StringOperators.replaceString(string,b,c);return d},a.prototype.getConcatenated=function(a){var b,c="";for(b=0;null!=this[b];b++)c+=this[b],b<this.length-1&&(c+=a);return c},a.prototype.toLowerCase=function(){var b=new a;b.name=this.name;var c;for(c=0;null!=this[c];c++)b[c]=this[c].toLowerCase();return b},a.prototype.toUpperCase=function(){var b=new a;b.name=this.name;var c;for(c=0;null!=this[c];c++)b[c]=this[c].toUpperCase();return b},a.prototype.toNumberList=function(){var a=new NumberList;a.name=this.name;var b;for(b=0;null!=this[b];b++)a[b]=Number(this[b]);return a},a.prototype.toDateList=function(a,b){var c,d=new DateList;for(c=0;null!=this[c];c++)d.push(DateOperators.stringToDate(this[c],a,b));return d},a.prototype.trim=function(){var b,c=new a;for(b=0;null!=this[b];b++)c[b]=this[b].trim();return c.name=this.name,c},a.prototype.clone=function(){var b=a.fromArray(this.slice(),!1);return b.name=this.name,b}}),define("src/dataStructures/structures/elements/Node",function(){"use strict";function a(a,b){this.id=null==a?"":a,this.name=null!=b?b:"",this.type="Node",this.nodeType,this.x=0,this.y=0,this.z=0,this.nodeList=new NodeList,this.relationList=new RelationList,this.toNodeList=new NodeList,this.toRelationList=new RelationList,this.fromNodeList=new NodeList,this.fromRelationList=new RelationList,this.weight=1,this.descentWeight=1,this.level=0,this.parent=null,this.vx=0,this.vy=0,this.vz=0,this.ax=0,this.ay=0,this.az=0}a.prototype=new DataModel,a.prototype.constructor=a,a.prototype.cleanRelations=function(){this.nodeList=new NodeList,this.relationList=new RelationList,this.toNodeList=new NodeList,this.toRelationList=new RelationList,this.fromNodeList=new NodeList,this.fromRelationList=new RelationList},a.prototype.destroy=function(){DataModel.prototype.destroy.call(this),delete this.id,delete this.name,delete this.nodeType,delete this.x,delete this.y,delete this.z,delete this.nodeList,delete this.relationList,delete this.toNodeList,delete this.toNodeList,delete this.fromNodeList,delete this.fromRelationList,delete this.parent,delete this.weight,delete this.descentWeight,delete this.level,delete this.vx,delete this.vy,delete this.vz,delete this.ax,delete this.ay,delete this.az},a.prototype.getDegree=function(){return this.relationList.length},a.prototype.getParent=function(){return this.parent},a.prototype.getLeaves=function(){var a=new NodeList,b=function(c){return 0==c.toNodeList.length?void a.addNode(c):void c.toNodeList.forEach(b)};return b(this),a},a.prototype.loadImage=function(a){Loader.loadImage(a,function(a){this.image=a.result},this)},a.prototype.clone=function(){var b=new a(this.id,this.name);return b.x=this.x,b.y=this.y,b.z=this.z,b.nodeType=this.nodeType,b.weight=this.weight,b.descentWeight=this.descentWeight,b}}),define("src/dataStructures/structures/elements/Relation",function(){"use strict";function a(a,b,c,d,e,f){Node.apply(this,[a,b]),this.type="Relation",this.node0=c,this.node1=d,this.weight=null==e?1:e,this.content=null==f?"":f}a.prototype=new Node,a.prototype.constructor=a,a.prototype.destroy=function(){Node.prototype.destroy.call(this),delete this.node0,delete this.node1,delete this.content},a.prototype.getOther=function(a){return a==this.node0?this.node1:this.node0},a.prototype.clone=function(){var b=new a(this.id,this.name,this.node0,this.node1);return b.x=this.x,b.y=this.y,b.z=this.z,b.nodeType=this.nodeType,b.weight=this.weight,b.descentWeight=this.descentWeight,b}}),define("src/dataStructures/structures/lists/NodeList",function(){"use strict";function a(){if(array=a.fromArray([]),arguments&&arguments.length>0){var b=Array.prototype.slice.call(arguments);b.forEach(function(a){array.addNode(a)})}return array}a.prototype=new List,a.prototype.constructor=a,a.fromArray=function(b,d){d=null==d?!1:d;var e=List.fromArray(b);if(d)for(var f=0;f<e.length;f++)e[f]="Node"==typeOf(e[f])?e[f]:new Node(String(e[f]),String(e[f]));var e=List.fromArray(b);return e.type="NodeList",e.ids={},Array(),e.deleteNodes=a.prototype.deleteNodes,e.addNode=a.prototype.addNode,e.addNodes=a.prototype.addNodes,e.removeNode=a.prototype.removeNode,e.removeNodeAtIndex=a.prototype.removeNodeAtIndex,e.getNodeByName=a.prototype.getNodeByName,e.getNodeById=a.prototype.getNodeById,e.getNodesByIds=a.prototype.getNodesByIds,e.getNewId=a.prototype.getNewId,e.normalizeWeights=a.prototype.normalizeWeights,e.getWeights=a.prototype.getWeights,e.getIds=a.prototype.getIds,e.getDegrees=a.prototype.getDegrees,e.getPolygon=a.prototype.getPolygon,e._push=Array.prototype.push,e.push=function(a){c.l("with nodeList, use addNode instead of push");var b;b.push(a)},e.getWithoutRepetitions=a.prototype.getWithoutRepetitions,e.clone=a.prototype.clone,e},a.prototype.removeNodes=function(){for(var a=0;a<this.length;a++)this.ids[this[a].id]=null,this.removeElement(this[a])},a.prototype.addNode=function(a){this.ids[a.id]=a,this._push(a)},a.prototype.addNodes=function(a){var b;for(b=0;null!=a[b];b++)this.addNode(a[b])},a.prototype.removeNode=function(a){this.ids[a.id]=null,this.removeElement(a)},a.prototype.removeNodeAtIndex=function(a){this.ids[this[a].id]=null,this.splice(a,1)},a.prototype.normalizeWeights=function(){var a,b=-9999999;for(a=0;null!=this[a];a++)b=Math.max(this[a].weight,b);for(a=0;null!=this[a];a++)this[a].weight/=b},a.prototype.getNodeByName=function(a){var b;for(b=0;b<this.length;b++)if(this[b].name==a)return this[b];return null},a.prototype.getNodeById=function(a){return this.ids[a]},a.prototype.getNodesByIds=function(b){newNodelist=new a;for(var c,d=0;null!=b[d];d++)c=this.ids[b[d]],null!=c&&(newNodelist[d]=c);return newNodelist},a.prototype.getWeights=function(){for(var a=new NumberList,b=0;null!=this[b];b++)a[b]=this[b].weight;return a},a.prototype.getIds=function(){for(var a=new StringList,b=0;null!=this[b];b++)a[b]=this[b].id;return a},a.prototype.getDegrees=function(){for(var a=new NumberList,b=0;null!=this[b];b++)a[b]=this[b].nodeList.length;return a},a.prototype.getPolygon=function(){for(var a=new Polygon,b=0;null!=this[b];b++)a[b]=new Point(this[b].x+cX,this[b].y+cY);return a},a.prototype.getNewId=function(){for(var a=this.length+1,b=0;a>b;b++)if(null==this.getNodeById(String(b)))return String(b)},a.prototype.clone=function(){var b=new a;return this.forEach(function(a){b.addNode(a)}),b.name=this.name,b},a.prototype.getWithoutRepetitions=function(){for(newList=new a,newList.name=this.name,i=0;null!=this[i];i++)null==newList.getNodeById(this[i].id)&&newList.addNode(this[i]);return newList}}),define("src/dataStructures/structures/lists/RelationList",function(){"use strict";function a(){var b=NodeList.apply(this,arguments);return b.name="",b=a.fromArray(b)}a.prototype=new NodeList,a.prototype.constructor=a,a.fromArray=function(b){var c=NodeList.fromArray(b);return c.type="RelationList",c.addRelation=a.prototype.addRelation,c.addRelationIfNew=a.prototype.addRelationIfNew,c.removeRelation=a.prototype.removeRelation,c.getRelationsWithNode=a.prototype.getRelationsWithNode,c.getFirstRelationBetweenNodes=a.prototype.getFirstRelationBetweenNodes,c.getFirstRelationByIds=a.prototype.getFirstRelationByIds,c.getAllRelationsBetweenNodes=a.prototype.getAllRelationsBetweenNodes,c.getRelatedNodesToNode=a.prototype.getRelatedNodesToNode,c.nodesAreConnected=a.prototype.nodesAreConnected,c},a.prototype.addRelation=function(a){this.addNode(a)},a.prototype.removeRelation=function(a){this.removeNode(a)},a.prototype.getRelationsWithNode=function(a){var b,c=[];for(b=0;null!=this[b];b++){var d=this[b];(d.node0==a||d.node1==a)&&c.push(d)}return c},a.prototype.getRelatedNodesToNode=function(a){var b,c=new NodeList;for(b=0;b<this.length;b++){var d=this[b];d.node0.id==a.id&&c.push(d.node1),d.node1.id==a.id&&c.push(d.node0)}return c},a.prototype.getAllRelationsBetweenNodes=function(a,b,c){var d;c=null==c?!1:c;var e=[];for(d=0;null!=this[d];d++){var f=this[d];(f.node0==a&&f.node1==b||!c&&f.node0==b&&f.node1==a)&&e.push(f)}return e},a.prototype.nodesAreConnected=function(a,b,c){return null!=a.toNodeList.getNodeById(b.id)?!0:!c&&null!=b.toNodeList.getNodeById(a.id)},a.prototype.getFirstRelationBetweenNodes=function(a,b,c){c=null==c?!1:c;for(var d=0;null!=this[d];d++)if(this[d].node0.id==a.id&&this[d].node1.id==b.id||!c&&this[d].node1.id==a.id&&this[d].node0.id==b.id)return this[d];return null},a.prototype.getFirstRelationByIds=function(a,b,c){var d,e,f=c||!1;for(d=0;null!=this[d];d++)if(e=this[d],e.node0.id==a&&e.node1.id==b)return e;if(f)return null;for(d=0;null!=this[d];d++)if(e=this[d],e.node0.id==b&&e.node1.id==a)return e;return null}}),define("src/dataStructures/structures/networks/Network",function(){"use strict";function a(){this.type="Network",this.nodeList=new NodeList,this.relationList=new RelationList}a.prototype=new DataModel,a.prototype.constructor=a,a.prototype.getNodes=function(){return this.nodeList},a.prototype.getRelations=function(){return this.relationList},a.prototype.getNodesIds=function(){return this.nodeList.getIds()},a.prototype.addNode=function(a){this.nodeList.addNode(a)},a.prototype.getNodeWithName=function(a){return this.nodeList.getNodeWithName(a)},a.prototype.getNodeWithId=function(a){return this.nodeList.getNodeWithId(a)},a.prototype.createRelation=function(a,b,c,d,e){this.addRelation(new Relation(c,c,a,b,d,e))},a.prototype.addRelation=function(a){this.relationList.addNode(a),a.node0.nodeList.addNode(a.node1),a.node0.relationList.addNode(a),a.node0.toNodeList.addNode(a.node1),a.node0.toRelationList.addNode(a),a.node1.nodeList.addNode(a.node0),a.node1.relationList.addNode(a),a.node1.fromNodeList.addNode(a.node0),a.node1.fromRelationList.addNode(a)},a.prototype.connect=function(a,b,c,d,e){c=c||a.id+"_"+b.id,d=d||1;var f=new Relation(c,c,a,b,d);return this.addRelation(f),f.content=e,f},a.prototype.removeNode=function(a){this.removeNodeRelations(a),this.nodeList.removeNode(a)},a.prototype.removeNodeRelations=function(a){for(var b=0;null!=a.relationList[b];b++)this.removeRelation(a.relationList[b]),b--},a.prototype.removeNodes=function(){this.nodeList.deleteNodes(),this.relationList.deleteNodes()},a.prototype.removeRelation=function(a){this.relationList.removeElement(a),a.node0.nodeList.removeNode(a.node1),a.node0.relationList.removeRelation(a),a.node0.toNodeList.removeNode(a.node1),a.node0.toRelationList.removeRelation(a),a.node1.nodeList.removeNode(a.node0),a.node1.relationList.removeRelation(a),a.node1.fromNodeList.removeNode(a.node0),a.node1.fromRelationList.removeRelation(a)},a.prototype.removeIsolatedNodes=function(a){var b,c=0;for(a=null==a?1:a,b=0;null!=this.nodeList[b];b++)this.nodeList[b].getDegree()<a&&(this.nodeList[b]._toRemove=!0);for(b=0;null!=this.nodeList[b];b++)this.nodeList[b]._toRemove&&(this.removeNode(this.nodeList[b]),c++,b--);return c},a.prototype.clone=function(b,c,d,e){var f,g,h=new a;return d=null==d?"":String(d),e=null==e?"":String(e),this.nodeList.forEach(function(a){f=new Node(d+a.id,e+a.name),""!=d&&(f.basicId=a.id),""!=e&&(f.basicName=a.name),b&&b.forEach(function(b){null!=a[b]&&(f[b]=a[b])}),h.addNode(f)}),this.relationList.forEach(function(a){g=new Relation(d+a.id,e+a.name,h.nodeList.getNodeById(d+a.node0.id),h.nodeList.getNodeById(d+a.node1.id)),""!=d&&(g.basicId=a.id),""!=e&&(g.basicName=a.name),c&&c.forEach(function(b){null!=a[b]&&(g[b]=a[b])}),h.addRelation(g)}),h},a.prototype.getReport=function(){return"network contains "+this.nodeList.length+" nodes and "+this.relationList.length+" relations"},a.prototype.destroy=function(){delete this.type,this.nodeList.destroy(),this.relationList.destroy(),delete this.nodeList,delete this.relationList}}),define("src/dataStructures/structures/networks/Tree",function(){"use strict";function a(){Network.apply(this),this.type="Tree",this.nLevels=0,this._createRelation=this.createRelation,this.createRelation=this._newCreateRelation}a.prototype=new Network,a.prototype.constructor=a,a.prototype.addNodeToTree=function(a,b){if(this.addNode(a),null==b)a.level=0,a.parent=null;else{var c=new Relation(b.id+"_"+a.id,b.id+"_"+a.id,b,a);this.addRelation(c),a.level=b.level+1,a.parent=b}this.nLevels=Math.max(this.nLevels,a.level+1)},Network.prototype._newCreateRelation=function(a,b,c,d){null==c&&(c=this.relationList.getNewId()),this._createRelation(a,b,c,d),b.level=a.level+1,b.parent=a,this.nLevels=Math.max(this.nLevels,b.level+1)},a.prototype.addFather=function(a,b){return null!=child.parent||-1==this.nodeList.indexOf(child)?!1:(this.addNode(a),child.parent=a,child.level=1,this.nLevels=Math.max(this.nLevels,1),void this.createRelation(a,child))},a.prototype.getNodesByLevel=function(a){var b=new NodeList;for(i=0;null!=this.nodeList[i];i++)this.nodeList[i].level==a&&b.addNode(this.nodeList[i]);return b},a.prototype.getLeaves=function(a){var b=new NodeList;if(a){if(0==a.toNodeList.length)return b.addNode(a),b;addLeaves=function(a){0==a.toNodeList.length?b.addNode(a):a.toNodeList.forEach(addLeaves)},a.toNodeList.forEach(addLeaves)}else this.nodeList.forEach(function(a){0==a.toNodeList.length&&b.addNode(a)});return b},a.prototype.assignDescentWeightsToNodes=function(){this._assignDescentWeightsToNode(this.nodeList[0])},a.prototype._assignDescentWeightsToNode=function(a){var b;if(0==a.toNodeList.length)return a.descentWeight=1,1;for(b=0;null!=a.toNodeList[b];b++)a.descentWeight+=this._assignDescentWeightsToNode(a.toNodeList[b]);return a.descentWeight},a.prototype.getReport=function(a){return"Tree contains "+this.nodeList.length+" nodes and "+this.relationList.length+" relations"}}),define("src/operators/dates/DateListOperators",function(){"use strict";function a(){}a.buildTimeTreeFromDates=function(b){if(null!=b){var c,d,e=new Tree,f=b[0],g=b[0];b.forEach(function(a){f=f>a?a:f,g=a>g?a:g}),c=f.getFullYear(),d=f.getFullYear();var h=new Node("years","years");e.addNodeToTree(h),h.dates=b.clone();var i,j,k,l,m,n,o,p,q,r;for(i=c;d>=i;i++)n=new Node(String(i),String(i)),e.addNodeToTree(n,h);return b.forEach(function(b){if(i=a._y(b),n=h.toNodeList[i-c],null==n.dates)for(n.dates=new DateList,j=0;12>j;j++)o=new Node(DateOperators.MONTH_NAMES[j]+"_"+i,DateOperators.MONTH_NAMES[j]),e.addNodeToTree(o,n),nDaysOnMonth=DateOperators.getNDaysInMonth(i,j+1);if(n.dates.push(b),j=a._m(b),o=n.toNodeList[j],null==o.dates)for(o.dates=new DateList,k=0;k<nDaysOnMonth;k++)p=new Node(k+1+"_"+o.id,String(k+1)),e.addNodeToTree(p,o);if(o.dates.push(b),k=a._d(b),p=o.toNodeList[k],null==p.dates)for(p.dates=new DateList,l=0;24>l;l++)q=new Node(l+"_"+p.id,String(l)+":00"),e.addNodeToTree(q,p);if(p.dates.push(b),l=a._h(b),q=p.toNodeList[l],null==q.dates)for(q.dates=new DateList,m=0;60>m;m++)r=new Node(m+"_"+q.id,String(m)),e.addNodeToTree(r,q);q.dates.push(b),m=a._mn(b),r=q.toNodeList[m],null==r.dates&&(r.dates=new DateList),r.weight++,r.dates.push(b)}),e.assignDescentWeightsToNodes(),e}},a._y=function(a){return a.getFullYear()},a._m=function(a){return a.getMonth()},a._d=function(a){return a.getDate()-1},a._h=function(a){return a.getHours()},a._mn=function(a){return a.getMinutes()},a._s=function(a){return a.getSeconds()},a._ms=function(a){return a.getMilliseconds()}}),define("src/operators/dates/DateOperators",function(){"use strict";function a(){}a.millisecondsToHours=1/36e5,a.millisecondsToDays=1/864e5,a.millisecondsToWeeks=1/6048e5,a.millisecondsToYears=3.169e-11,a.MONTH_NAMES=["january","february","march","april","may","june","july","august","september","october","november","december"],a.MONTH_NAMES_SHORT=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],a.MONTH_NDAYS=[31,28,31,30,31,30,31,31,30,31,30,31],a.WEEK_NAMES=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],a.stringToDate=function(a,b,c){if(c=null==c?"-":c,b=null==b?1:b,1==b)return"-"!=c&&(a=a.replace(new RegExp(a,"g"),"-")),new Date(a);var d,e=a.split(c);switch(b){case 0:return new Date(Number(e[2]),Number(e[0])-1,Number(e[1]));case 1:return new Date(a);case 2:return d=Number(e[2]),d=d>=0?d+2e3:d+1900,new Date(d,Number(e[0])-1,Number(e[1]));case 3:return d=Number(e[0]),d=d>=0?d+2e3:d+1900,new Date(d,Number(e[1])-1,Number(e[2]))}},a.dateToString=function(a,b,c){c=null==c?"-":c,b=null==b?0:b;var d=a.getFullYear(),e=a.getMonth()+1,f=a.getDate();switch(b){case 0:return e+c+f+c+d;case 1:return d+c+e+c+f}},a.currentDate=function(){return new Date},a.addDaysToDate=function(b,c){return new Date(b.getTime()+c/a.millisecondsToDays)},a.addMillisecondsToDate=function(a,b){return new Date(a.getTime()+b)},a.parseDate=function(a){return new Date(Date.parse(a.replace(/\./g,"-")))},a.parseDates=function(a){var b,c=new DateList;for(b=0;null!=a[b];b++)c.push(this.parseDate(a[b]));return c},a.getHoursBetweenDates=function(b,c){return(c.getTime()-b.getTime())*a.millisecondsToHours},a.getDaysBetweenDates=function(b,c){return(c.getTime()-b.getTime())*a.millisecondsToDays},a.getWeeksBetweenDates=function(b,c){return(c.getTime()-b.getTime())*a.millisecondsToWeeks},a.getYearsBetweenDates=function(b,c){return(c.getTime()-b.getTime())*a.millisecondsToYears},a.nDayInYear=function(b){return Math.floor((b.getTime()-new Date(b.getFullYear(),0,1).getTime())*a.millisecondsToDays)},a.getDateDaysAgo=function(b){return a.addDaysToDate(new Date,-b)},a.getWeekInYear=function(a){var b=new Date(a.getFullYear(),0,1);return Math.ceil(((a-b)/864e5+b.getDay()+1)/7)},a.getNDaysInMonth=function(a,b){return new Date(b,a,0).getDate()}}),define("src/operators/geo/CountryListOperators",function(){"use strict";function a(){}a.getCountryByName=function(a,b){for(var c=CountryOperators.getSimplifiedName(b),d=0;null!=a[d];d++)if(-1!=a[d].simplifiedNames.indexOf(c))return a[d];return null}}),define("src/operators/geo/CountryOperators",function(){"use strict";function a(){}a.getSimplifiedName=function(a){return a.replace(/[\.\- ,\']/g,"").toLowerCase()},a.getSimplifiedNames=function(a){for(var b,c=new StringList,d=0;null!=a[d];d++)b=this.getSimplifiedName(a[d]),""!=b&&c.pushIfUnique(b);return c}}),define("src/operators/geo/GeoOperators",function(){"use strict";function a(){}a.EARTH_RADIUS=6371009,a.EARTH_DIAMETER=2*a.EARTH_RADIUS,a.geoCoordinateToDecimal=function(a){return Math.floor(a)+1.66667*(a-Math.floor(a))},a.geoDistance=function(b,c){var d=Math.pow(Math.sin(.5*(c.y-b.y)*gradToRad),2)+Math.cos(b.y*gradToRad)*Math.cos(c.y*gradToRad)*Math.pow(Math.sin(.5*(c.x-b.x)*gradToRad),2);return a.EARTH_DIAMETER*Math.atan2(Math.sqrt(d),Math.sqrt(1-d))},a.polygonLength=function(b){if(b.length<2)return 0;for(var c=a.geoDistance(b[0],b[1]),d=2;null!=b[d];d++)c+=a.geoDistance(b[d-1],b[d]);return c}}),define("src/operators/geometry/GeometryConvertions",function(){"use strict";function a(){}a.twoNumberListsToPolygon=function(a,b){for(var c=Math.min(a.length,b.length),d=new Polygon,e=0;c>e;e++)d[e]=new Point(a[e],b[e]);return d},a.PolygonToNumberTable=function(a){if(null==a)return null;var b=new NumberTable;return b[0]=new NumberList,b[1]=new NumberList,a.forEach(function(a){b[0].push(a.x),b[1].push(a.y)}),b}}),define("src/operators/geometry/GeometryOperators",function(){"use strict";function a(){}function b(a,b,c){this.a=a,this.b=b,this.c=c;var d,e,f,g,h=b.x-a.x,i=b.y-a.y,j=c.x-a.x,k=c.y-a.y,l=h*(a.x+b.x)+i*(a.y+b.y),m=j*(a.x+c.x)+k*(a.y+c.y),n=2*(h*(c.y-b.y)-i*(c.x-b.x));Math.abs(n)<1e-6?(d=Math.min(a.x,b.x,c.x),e=Math.min(a.y,b.y,c.y),f=.5*(Math.max(a.x,b.x,c.x)-d),g=.5*(Math.max(a.y,b.y,c.y)-e),this.x=d+f,this.y=e+g,this.r=f*f+g*g):(this.x=(k*l-i*m)/n,this.y=(h*m-j*l)/n,f=this.x-a.x,g=this.y-a.y,this.r=f*f+g*g)}function c(a,b){return b.x-a.x}function d(a){var b,c,d,e,f,g=a.length;a:for(;g;)for(c=a[--g],b=a[--g],d=g;d;)if(f=a[--d],e=a[--d],b===e&&c===f||b===f&&c===e){a.splice(g,2),a.splice(d,2),g-=2;continue a}}function e(a){if(a.length<3)return[];a.sort(c);for(var e=a.length-1,f=a[e].x,g=a[0].x,h=a[e].y,i=h;e--;)a[e].y<h&&(h=a[e].y),a[e].y>i&&(i=a[e].y);var j,k,l,m=g-f,n=i-h,o=m>n?m:n,p=.5*(g+f),q=.5*(i+h),r=[new b({x:p-20*o,y:q-o,__sentinel:!0},{x:p,y:q+20*o,__sentinel:!0},{x:p+20*o,y:q-o,__sentinel:!0})],s=[],t=[];for(e=a.length;e--;){for(t.length=0,j=r.length;j--;)m=a[e].x-r[j].x,m>0&&m*m>r[j].r?(s.push(r[j]),r.splice(j,1)):(n=a[e].y-r[j].y,m*m+n*n>r[j].r||(t.push(r[j].a,r[j].b,r[j].b,r[j].c,r[j].c,r[j].a),r.splice(j,1)));for(d(t),j=t.length;j;)l=t[--j],k=t[--j],r.push(new b(k,l,a[e]))}for(Array.prototype.push.apply(s,r),e=s.length;e--;)(s[e].a.__sentinel||s[e].b.__sentinel||s[e].c.__sentinel)&&s.splice(e,1);return s}a.getSoftenControlPoints=function(a,b,c,d){d=d||10;var e=PointOperators.angleFromTwoPoints(a,c),f=new Point(b.x-d*Math.cos(e),b.y-d*Math.sin(e)),g=new Point(b.x+d*Math.cos(e),b.y+d*Math.sin(e));return[f,g]},a.bezierCurvePoints=function(a,b,c,d,e,f,g,h,i){var j=1-i,k=j*a+i*c,l=j*b+i*d,m=j*c+i*e,n=j*d+i*f,o=j*e+i*g,p=j*f+i*h,q=j*k+i*m,r=j*l+i*n,s=j*m+i*o,t=j*n+i*p;return new Point(i*s+j*q,i*t+j*r)},a.trueBezierCurveHeightHorizontalControlPoints=function(b,c,d,e,f,g,h){var i=c-b,h=(h-b)/i,f=(f-b)/i,g=(g-b)/i;if(null==a._bezierSimpleCurveTable){var j,k;for(a._bezierSimpleCurveTable=new NumberList,j=1;1e4>j;j++)k=a.bezierCurvePoints(0,0,f,0,g,1,1,1,j/1e4),a._bezierSimpleCurveTable[Math.floor(1e3*k.x)]=k.y;a._bezierSimpleCurveTable[0]=0,a._bezierSimpleCurveTable[1]=1}return a._bezierSimpleCurveTable[Math.floor(1e3*h)]*(e-d)+d},a.bezierCurveHeightHorizontalControlPoints=function(a,b,c,d,e){var f=Math.cos(Math.PI*(e-1)),g=f>0?1:-1;return(.5+.5*Math.pow(f*g,.6)*g)*(d-a)+a},a.distanceToBezierCurve=function(b,c,d,e,f,g,h,i,j,k){var l,m,n,o=.01,p=0,q=1,r=new Point(b,c),s=a.bezierCurvePoints(b,c,d,e,f,g,h,i,o),t=new Point(h,i),u=a.bezierCurvePoints(b,c,d,e,f,g,h,i,1-o),v=Math.pow(r.x-j.x,2)+Math.pow(r.y-j.y,2),w=Math.pow(s.x-j.x,2)+Math.pow(s.y-j.y,2),x=Math.pow(t.x-j.x,2)+Math.pow(t.y-j.y,2);Math.pow(u.x-j.x,2)+Math.pow(u.y-j.y,2);for(l=0;10>l;l++)m=a.bezierCurvePoints(b,c,d,e,f,g,h,i,.5*(p+q)),n=a.bezierCurvePoints(b,c,d,e,f,g,h,i,.5*(p+q)+o),v=Math.pow(m.x-j.x,2)+Math.pow(m.y-j.y,2),w=Math.pow(n.x-j.x,2)+Math.pow(n.y-j.y,2),w>v?(q=.5*(p+q),t=a.bezierCurvePoints(b,c,d,e,f,g,h,i,q),x=Math.pow(t.x-j.x,2)+Math.pow(t.y-j.y,2)):(p=.5*(p+q),r=a.bezierCurvePoints(b,c,d,e,f,g,h,i,p),v=Math.pow(r.x-j.x,2)+Math.pow(r.y-j.y,2));return k?t:Math.sqrt(Math.min(v,x))},a.triangleContainsPoint=function(a,b,c,d){var e=(a.x-d.x)*(b.y-d.y)-(b.x-d.x)*(a.y-d.y),f=(b.x-d.x)*(c.y-d.y)-(c.x-d.x)*(b.y-d.y),g=(c.x-d.x)*(a.y-d.y)-(a.x-d.x)*(c.y-d.y);return e>0&&f>0&&g>0||e>=0&&f>=0&&g>=0},a.triangleArea=function(a){return Math.abs(a.a.x*(a.b.y-a.c.y)+a.b.x*(a.c.y-a.a.y)+a.c.x*(a.a.y-a.b.y))/2},a.lineFromTwoPoints=function(a,b){if(a.x==b.x)return new Point(1/0,a.x);var c=(b.y-a.y)/(b.x-a.x);return new Point(c,a.y-c*a.x)},a.distancePointToLine=function(b,c){var d,e;0==c.x?(d=1/0,e=b.x):(d=-1/c.x,e=b.y-d*b.x);var f=a.intersectionLines(c,new Point(d,e));return Math.sqrt(Math.pow(b.x-f.x,2)+Math.pow(b.y-f.y,2))},a.distancePointToSegment=function(b,c,d){var e,f,g=c.x==d.x?1/0:(d.y-c.y)/(d.x-c.x),h=g==1/0?new Point(1/0,c.x):new Point(g,c.y-g*c.x);0==h.x?(e=1/0,f=b.x):(e=-1/h.x,f=b.y-e*b.x);var i=a.intersectionLines(h,new Point(e,f));return i.x>=Math.min(c.x,d.x)&&i.x<=Math.max(c.x,d.x)?b.distanceToPoint(i):Math.min(b.distanceToPoint(c),b.distanceToPoint(d))},a.intersectionLines=function(a,b){if(a.x==b.x)return a.y==b.y?a.x==1/0?new Point(a.y,0):new Point(0,a.y):null;if(a.x==1/0)return new Point(a.y,b.x*a.y+b.y);if(b.x==1/0)return new Point(b.y,a.x*b.y+a.y);var c=(b.y-a.y)/(a.x-b.x);return new Point(c,a.x*c+a.y)},a.VennCircles=function(b,c,d,e,f){var g,h,i=Math.sqrt(b/Math.PI),j=Math.sqrt(c/Math.PI),k=a.circleDistancesFromCommonArea(i,j,d,f);if(e){var l=(k*k+Math.pow(i,2)-Math.pow(j,2))/(2*k);g=new Point3D(-l,0,i),h=new Point3D(k-l,0,j)}else g=new Point3D(.5*-k,0,i),h=new Point3D(.5*k,0,j);return 0==d&&(g.x-=.1*k,h.x+=.1*k),new Polygon3D(g,h)},a.circleDistancesFromCommonArea=function(b,c,d,e){e=e||.1;for(var f=Math.max(b,c)-Math.min(b,c),g=b+c,h=.5*(f+g),i=0,j=a.circlesCommonArea(b,c,h);Math.abs(j-d)>e&&200>i;)j>d?(f=h,h=.5*(g+h)):(g=h,h=.5*(h+f)),i++,j=a.circlesCommonArea(b,c,h);return h},a.circlesCommonArea=function(a,b,c){if(c>=a+b)return 0;if(c+Math.min(a,b)<=Math.max(a,b))return Math.PI*Math.pow(Math.min(a,b),2);var d=Math.pow(c,2),e=Math.pow(a,2),f=Math.pow(b,2);return e*Math.acos((d+e-f)/(2*c*a))+f*Math.acos((d+f-e)/(2*c*b))-.5*Math.sqrt((-c+a+b)*(c+a-b)*(c-a+b)*(c+a+b))},a.circlesLensAngles=function(a,b){if(b.x<a.x){var c=b.clone();b=a.clone(),a=c}if(b.x+b.z<=a.x+a.z)return null;if(a.x-a.z>=b.x-b.z)return null;var d=b.x-a.x,e=(d*d+Math.pow(a.z,2)-Math.pow(b.z,2))/(2*d),f=Math.acos(e/a.z),g=a.z*Math.sin(f),h=Math.asin(g/b.z);return a.x+e<b.x?new NumberList(-f,f,Math.PI-h,Math.PI+h):new NumberList(-f,f,h,-h)},a.delauney=function(a){return e(a)}}),define("src/operators/geometry/PointOperators",function(){"use strict";function a(){}a.angleBetweenVectors=function(a,b){return Math.atan2(b.y,b.x)-Math.atan2(a.y,a.x)},a.angleFromTwoPoints=function(a,b){return Math.atan2(b.y-a.y,b.x-a.x)},a.dot=function(a,b){return a.x*b.x+a.y*b.y},a.twoPointsInterpolation=function(a,b,c){return new Point((1-c)*a.x+c*b.x,(1-c)*a.y+c*b.y)}}),define("src/operators/geometry/PolygonGenerators",function(){"use strict";function a(){}a.createPolygon=function(a,b,c){var d=new Polygon;switch(b){case 0:for(var e=0;a>e;e++)d.push(new Point(c.x+c.width*Math.random(),c.y+c.height*Math.random()));break;case 1:}return d}}),define("src/operators/geometry/PolygonListEncodings",function(){"use strict";function a(){}a.StringToPolygonList=function(a,b,c){b=b||",",c=c||"/";var d,e,f=new PolygonList;pols=StringOperators.splitString(a,c);for(var g,h,i=0;null!=pols[i];i++){for(d=new Polygon,h=StringOperators.splitString(pols[i],b),g=0;null!=h[g];g+=2)e=new Point(Number(h[g]),Number(h[g+1])),d.push(e);f.push(d)}return f},a.PolygonListToString=function(a,b,c){b=b||",",c=c||"/";for(var d,e,f="",d=0;null!=a[d];d++)for(f+=0==d?"":c,e=0;null!=a[d][e];e++)f+=(0==e?"":b)+a[d][e].x+b+a[d][e].y;return f}}),define("src/operators/geometry/PolygonListOperators",function(){"use strict";function a(){}a.simplifyPolygons=function(a,b,c){for(var d,e=new PolygonList,f=0;null!=a[f];f++)d=PolygonOperators.simplifyPolygon(a[f],b),(d.length>0||!c)&&e.push(d);return e}}),define("src/operators/geometry/PolygonOperators",function(){"use strict";function a(){}a.hull=function(b,c){c=null==c?!1:c;var d,e,f=b,g=f.length,h=0,i=new Polygon;if(c)var j=new NumberList;if(f=a.sortOnXY(f),c){for(d=0;g>d;d++){for(;h>=2&&a.crossProduct3Points(i[h-2],i[h-1],f[d])<=0;)h--;i[h++]=f[d],j[h-1]=d}for(d=g-2,e=h+1;d>=0;d--){for(;h>=e&&a.crossProduct3Points(i[h-2],i[h-1],f[d])<=0;)h--;i[h++]=f[d],j[h-1]=d}return NumberList.fromArray(j.getSubList(new Interval(0,h-2)))}for(d=0;g>d;d++){for(;h>=2&&a.crossProduct3Points(i[h-2],i[h-1],f[d])<=0;)h--;i[h++]=f[d]}for(d=g-2,e=h+1;d>=0;d--){for(;h>=e&&a.crossProduct3Points(i[h-2],i[h-1],f[d])<=0;)h--;i[h++]=f[d]}return Polygon.fromArray(i.getSubList(new Interval(0,h-2)))},a.buildDendrogramFromPolygon=function(b){var d,e,f,g,h,i=new Tree,j=new NodeList,k=new Polygon;b.forEach(function(a,b){d=new Node("point_"+b,"point_"+b),d.weight=1,d.barycenter=a,d.point=a,d.polygon=new Polygon(a),i.addNode(d),k.push(d),j.push(d)}),i.nodeList=i.nodeList.getReversed();for(var l=function(a,b){var c=new Node("("+a.id+","+b.id+")","("+a.id+","+b.id+")");return c.polygon=a.polygon.concat(b.polygon),c.weight=c.polygon.length,e=a.weight+b.weight,c.barycenter=new Point((a.weight*a.barycenter.x+b.weight*b.barycenter.x)/e,(a.weight*a.barycenter.y+b.weight*b.barycenter.y)/e),i.addNode(c),i._newCreateRelation(c,a),i._newCreateRelation(c,b),c};k.length>1;)closestPair=a._findClosestNodes(k),g=k[closestPair[0]],h=k[closestPair[1]],f=l(g,h),f.distance=closestPair.distance,c.l("distance:",f.distance),k.splice(closestPair[0],1),k.splice(closestPair[1]-1,1),k.push(f);i.nodeList=i.nodeList.getReversed();var m=function(a,b){a.level=b+1,a.toNodeList.forEach(function(b){m(b,a.level)})};return m(i.nodeList[0],-1),i.leaves=j,i},a._findClosestNodes=function(a){var b,c,d,e=9999999999;for(b=0;null!=a[b+1];b++)for(c=b+1;null!=a[c];c++)d=Math.pow(a[b].barycenter.x-a[c].barycenter.x,2)+Math.pow(a[b].barycenter.y-a[c].barycenter.y,2),e>d&&(e=d,pair=[b,c]);return pair.distance=e,pair},a.sortOnXY=function(a){return a.sort(function(a,b){return a.x<b.x?-1:a.x==b.x&&a.y<b.y?-1:1})},a.crossProduct3Points=function(a,b,c){return(b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x)},a.expandFromBarycenter=function(a,b){for(var c=new Polygon,d=a.getBarycenter(),e=0;null!=a[e];e++)c[e]=a[e].expandFromPoint(d,b);return c},a.expandInAngles=function(a,b){for(var c,d,e,f=new Polygon,g=a[a.length-1],h=a[0],i=a[1],j=.5*Math.atan2(h.y-i.y,h.x-i.x)+.5*Math.atan2(h.y-g.y,h.x-g.x),k=a.containsPoint(new Point(h.x+Math.floor(b)*Math.cos(j),h.y+Math.floor(b)*Math.sin(j)))?-1:1,l=0;null!=a[l];l++)g=a[(l-1+a.length)%a.length],h=a[l],i=a[(l+1)%a.length],c=Math.atan2(h.y-i.y,h.x-i.x),d=Math.atan2(h.y-g.y,h.x-g.x),e=Math.abs(d-c)<Math.PI?-1:1,j=.5*c+.5*d,f[l]=new Point(h.x+k*e*b*Math.cos(j),h.y+k*e*b*Math.sin(j));return f},a.simplifyPolygon=function(a,b){b=null==b||0==b?1:b;var c,d,e,f,g,h=a.clone(),i=a.length;for(g=0;i>g;g++)c=h[g],d=h[(g+1)%i],e=h[(g+2)%i],f=GeometryOperators.lineFromTwoPoints(c,e),GeometryOperators.distancePointToLine(d,f)<b&&(h=h.getWithoutElementAtIndex((g+1)%i),g--),i=h.length;return h},a.bezierPolygonContainsPoint=function(a,b,c){var d=a.getFrame();clearContext(),context.fillStyle="black",context.fillRect(0,0,d.width,d.height),null!=c&&(context.strokeStyle="black",context.lineWidth=c),context.fillStyle="white",
context.beginPath(),Draw.drawBezierPolygon(context,a,-d.x,-d.y),context.fill(),null!=c&&context.stroke();var e=context.getImageData(b.x-d.x,b.y-d.y,1,1).data;return clearContext(),e[0]>0},a.getBezierPolygonBestCenter=function(a,b){b=null==b?500:b;var c=a.getFrame();context.fillStyle="black",context.fillRect(0,0,c.width,c.height),context.fillStyle="white",context.beginPath(),Draw.drawBezierPolygon(context,a,-c.x,-c.y),context.fill();for(var d,e,f,g,h=0,i=0;b>i;i++)for(d=c.getRandomPoint(),e=0;e+=.1;e<=TwoPi){f=e;var j=context.getImageData(d.x+f*Math.cos(e)-c.x,d.y+f*Math.sin(e)-c.y,1,1).data;if(0==j[0]){f>h&&(h=f,g=d);break}}return g},a.convexHull=function(a,b){var c=this.hull(a,!0),d=NumberListGenerators.createSortedNumberList(a.length);d=d.getWithoutElementsAtIndexes(c);for(var e,f,g,h,i,j,k,l,m,n=new Point,o=b-1,p=c.length;b>o;){for(o=999999999,e=0;p>e;e++)for(g=a[c[e]],h=a[c[(e+1)%c.length]],n.x=.5*(g.x+h.x),n.y=.5*(g.y+h.y),m=Math.sqrt(Math.pow(h.x-g.x,2)+Math.pow(h.y-g.y,2)),f=0;null!=d[f];f++)i=a[d[f]],j=(Math.sqrt(Math.pow(i.x-g.x,2)+Math.pow(i.y-g.y,2))+Math.sqrt(Math.pow(i.x-h.x,2)+Math.pow(i.y-h.y,2)))/Math.pow(m,2),o>j&&(o=j,k=e,l=f);for(e=p-1;e>k;e--)c[e+1]=c[e];if(c[k+1]=d[l],d.splice(l,1),0==d.length)return c;p++}return c},a.controlPointsFromPointsAnglesIntensities=function(a,b,c){for(var d=new Polygon,e=0;null!=a[e];e++)e>0&&d.push(new Point(a[e].x-c[e]*Math.cos(b[e]),a[e].y-c[e]*Math.sin(b[e]))),e<a.length-1&&d.push(new Point(a[e].x+c[e]*Math.cos(b[e]),a[e].y+c[e]*Math.sin(b[e])));return d},a.placePointsInsidePolygon=function(b,c,d){var e=new Polygon,f=b.getFrame();switch(d=d||0){case 0:for(var g;e.length<c;)g=new Point(f.x+Math.random()*f.width,f.y+Math.random()*f.height),a.polygonContainsPoint(b,g)&&e.push(g);return e}},a.placePointsInsideBezierPolygon=function(b,c,d,e){var f=new Polygon,g=b.getFrame();switch(d=d||0){case 0:for(var h,i=0;f.length<c&&1e3>i;)h=new Point(g.x+Math.random()*g.width,g.y+Math.random()*g.height),i++,a.bezierPolygonContainsPoint(b,h,e)&&(f.push(h),i=0);return f}}}),define("src/operators/geometry/RectangleOperators",function(){"use strict";function a(){}a.packingRectangles=function(b,c,d,e){switch(null==d&&(d=new Rectangle(0,0,1,1)),c=c?c:0){case 0:return a.squarify(d,b);case 1:var f=b.getMinMaxInterval();f.min<0&&(b=b.add(-f.min),f=new Interval(0,f.max-f.min));var g,h,i=b.getSum(),j=new List,k=d.y,l=d.height/i;for(h=0;null!=b[h];h++)g=l*b[h],j.push(new Rectangle(d.x,k,d.width,g)),k+=g;return j;case 2:f=b.getMinMaxInterval(),f.min<0&&(b=b.add(-f.min),f=new Interval(0,f.max-f.min)),i=b.getSum(),j=new List;var m,n=d.x,o=d.width/i;for(h=0;null!=b[h];h++)m=o*b[h],j.push(new Rectangle(n,d.y,m,d.height)),n+=m;return j;case 3:if(b.length<6);else if(6==b.length){var p=new Rectangle(.44,.36,.16,.45),q=new Rectangle(.6,.15,.3,.3),r=new Rectangle(.72,.45,.28,.32),s=new Rectangle(.38,.04,.22,.32),t=new Point(.6,.36);p=expandRectangle(p,Math.sqrt(b[0]),t),q=expandRectangle(q,Math.sqrt(b[1]),t),s=expandRectangle(s,Math.sqrt(b[3]),t),r.x=q.x+.5*q.width,r.y=q.bottom;var u=new Point(r.x+.3*r.width,q.bottom);r=expandRectangle(r,Math.sqrt(b[2]),u),r.y+=.2*r.height;var v=new Point(.26,.36+Math.max(.3*p.height,.2*s.height)),w=new Rectangle(.1,v.y-.4,.2,.4),x=new Rectangle(.22,v.y,.16,.5);w=expandRectangle(w,Math.sqrt(b[4]),v),x=expandRectangle(x,Math.sqrt(b[5]),v);var y=.2*Math.max(s.width,p.width,x.right-v.x,w.right-v.x),z=Math.min(s.x,p.x)-Math.max(w.right,x.right)-y;return x.x+=z,w.x+=z,new List(p,q,r,s,w,x)}case 4:return europeQuadrigram(b);case 5:if(e=e||0,0==e)var A=Math.round(Math.sqrt(b.length));else A=Math.round(b.length/e);var B=Math.ceil(b.length/A),C=A*B-b.length,D=b.getAverage(),E=ListOperators.concat(b,ListGenerators.createListWithSameElement(C,D)),F=ListOperators.slidingWindowOnList(E,B,B,0),G=F.getSums(),H=this.packingRectangles(G,2,d);for(j=List(),h=0;A>h;h++)j=ListOperators.concat(j,this.packingRectangles(F[h],1,H[h]));return j;case 6:}return null},a.quadrification=a.squarify,a.squarify=function(b,c,d,e){if(null!=c){if(0==c.length)return new RectangleList;if(1==c.length)return new RectangleList(b);d=d?d:!1,e=e?e:!1;var f;if(f=d?c:c.getNormalizedToSum(),!e){var g=f.getSortIndexes();f=ListOperators.sortListByNumberList(f,f)}var h,i,j,k,l,m,n=b.width*b.height,o=new RectangleList,p=b.clone(),q=new List,r=0,s=new Rectangle,t=c.length;if(t>2){var u,v,w;for(u=r;t>u;u++)if(j=Number.MAX_VALUE,0==f[u])o.push(new Rectangle(s.x,s.y,0,0));else{for(v=1;t>v&&(h=f.slice(u,u+v),i=q.slice(),w=h.getSum(),l=w*n,s.x=p.x,s.y=p.y,p.width>p.height?(s.width=l/p.height,s.height=p.height,column=!0):(s.width=p.width,s.height=l/p.width,column=!1),q=a.partitionRectangle(s,h,w),k=q.highestRatio,!(k>=j));v++)j=k;if(0==i.length){if(o.push(new Rectangle(p.x,p.y,p.width,p.height)),o.length==t){if(!e){var x=new List;for(u=0;null!=o[u];u++)x[g[u]]=o[u];return x}return o}r++}else{if(o=o.concat(i),o.length==t){if(!e){for(x=new List,u=0;null!=o[u];u++)x[g[u]]=o[u];return x}return o}r+=i.length,m=i[i.length-1],p.width>p.height?(p.x=m.width+m.x,p.width-=m.width):(p.y=m.height+m.y,p.height-=m.height)}u=r-1}}else 2==t?(h=f.slice(),s=b.clone(),o=a.partitionRectangle(s,h,h.getSum())):o[0]=new Rectangle(b.x,b.y,b.width,b.height);if(!e){for(x=new List,u=0;null!=o[u];u++)x[g[u]]=o[u];return x}return o}},a.partitionRectangle=function(a,b,c){var d,e,f,g=a.width*a.height,h=new List,i=new Rectangle(a.x,a.y,a.width,a.height),j=1;for(e=0;e<b.length;e++)d=b[e]*g/c,a.width>a.height?(f=new Rectangle(i.x,i.y,d/i.height,i.height),h.push(f),i.x+=d/i.height):(f=new Rectangle(i.x,i.y,i.width,d/i.width),h.push(f),i.y+=d/i.width),f.ratio=Math.max(f.width,f.height)/Math.min(f.width,f.height),j=Math.max(j,f.ratio);return h.highestRatio=j,h},a._getHighestRatio=function(a){var b,c,d=1;for(c=0;c<a.length;c++)b=a[c],d=Math.max(d,b.getRatio());return d}}),define("src/operators/graphic/ColorConvertions",function(){"use strict";function a(){}a.point3DToColor=function(a){return ColorUtils.RGBtouint(a.x,a.y,a.z)},a.colorToPoint3D=function(a){return Point3D.fromArray(ColorUtils.uinttoRGB(a))}}),define("src/operators/graphic/ColorGenerators",function(){"use strict";function a(){}a.randomColor=function(a){return a=null==a?1:a,"rgba("+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+Math.floor(256*Math.random())+","+a+")"}}),define("src/operators/graphic/ColorListGenerators",function(){"use strict";function a(){}a._HARDCODED_CATEGORICAL_COLORS=new ColorList("#dd4411","#2200bb","#1f77b4","#ff660e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf","#dd8811","#dd0011","#221140","#1f66a3","#ff220e","#2ba01c","#442728","#945600","#8c453a","#e37700"),a.createDefaultCategoricalColorList=function(b,c,d){c=null==c?1:c;var e=a.createCategoricalColors(1,b).getInterpolated("black",.15);return 1>c&&(e=e.addAlpha(c)),d&&(e=e.getInverted()),e},a.createColorListFromNumberList=function(a,b,c){c=null==c?0:c;var d,e,f=new ColorList;switch(c){case 0:d=a.getNormalizedToMax();break;case 1:break;case 2:}for(e=0;null!=d[e];e++)f.push(b(d[e]));return f},a.createColorListWithSingleColor=function(a,b){for(var c=new ColorList,d=0;a>d;d++)c.push(b);return c},a.createCategoricalColors=function(b,c,d,e,f,g){d=null==d?ColorScales.temperature:d;var h,i=new ColorList;switch(b){case 0:for(h=0;c>h;h++)i[h]=d(h/(c-1));break;case 1:var j=NumberListGenerators.createRandomNumberList(c,null,0);for(h=0;c>h;h++)i[h]=d(j[h]);break;case 2:for(h=0;c>h;h++)i[h]=a._HARDCODED_CATEGORICAL_COLORS[h%a._HARDCODED_CATEGORICAL_COLORS.length];break;case 5:var k,l,m,n=NumberListGenerators.createRandomNumberList(1001,null,0),o=NumberListGenerators.createSortedNumberList(c),p=NumberListGenerators.createRandomNumberList(c,null,0),q=ListOperators.sortListByNumberList(o,p),r=Math.floor(2*c)+100,s=Math.floor(.6*c)+5,t=a._evaluationFunction(q),u=q,v=0;for(h=0;r>h;h++){for(l=0;s>l;l++)k=a._sortingVariation(q,n[v],n[v+1]),v=(v+2)%1001,m=a._evaluationFunction(k),m>t&&(u=k,t=m);q=u}for(h=0;c>h;h++)i.push(d(1/c+q[h]/(c+1)))}return null!=f&&null!=g&&(i=i.getInterpolated(f,g)),e&&(i=i.addAlpha(e)),i},a._sortingVariation=function(a,b,c){var d=a.clone(),e=Math.floor(b*d.length),f=Math.floor(c*d.length),g=d[f];return d[f]=d[e],d[e]=g,d},a._evaluationFunction=function(a){var b,c=0;for(b=0;null!=a[b+1];b++)c+=Math.sqrt(Math.abs(a[b+1]-a[b]));return c},a.createCategoricalColorListForList=function(b,c,d,e,f,g){if(!b)return new ColorList;d||(d=1),e||(e="#fff"),f||(f=0),b=List.fromArray(b);var h,i=b.getWithoutRepetitions();h=c?c.getInterpolated(e,f):a.createCategoricalColors(2,i.length,null,d,e,f),h=h.addAlpha(d),g&&(h=h.getInverted());var j=Table.fromArray([i,h]),k=ListOperators.translateWithDictionary(b,j,"NULL");return k=ColorList.fromArray(k),[{value:k,type:"ColorList"},{value:i,type:i.type},{value:h,type:"ColorList"},{value:new Table(i,k),type:"Table"}]}}),define("src/operators/graphic/ColorListOperators",function(){"use strict";function a(){}a.colorListFromColorScale=function(a,b){return a.getColorList.apply(a,[b])},a.colorListFromColorScaleFunction=function(a,b){var c,d=new ColorList;for(c=0;b>c;c++)d[c]=a(c/(b-1));return d},a.colorListFromColorScaleFunctionAndNumberList=function(a,b,c){c=null==c?!0:c,c&&(b=b.getNormalized());var d,e=new ColorList;for(d=0;null!=b[d];d++)e[d]=a(b[d]);return e},a.polygon3DToColorList=function(a){var b,c=a.length,d=new ColorList;for(b=0;c>b;b++)d.push(ColorOperators.point3DToColor(a[b]));return d},a.colorListToPolygon3D=function(a){var b,c=a.length,d=new Polygon3D;for(b=0;c>b;b++)d.push(ColorOperators.colorToPoint3D(a[b]));return d}}),define("src/operators/graphic/ColorOperators",function(){"use strict";function a(){}a.interpolateColors=function(b,c,d){var e=a.interpolateColorsRGB(a.colorStringToRGB(b),a.colorStringToRGB(c),d);return a.RGBtoHEX(e[0],e[1],e[2])},a.interpolateColorsRGB=function(a,b,c){var d=1-c;return[Math.floor(d*a[0]+c*b[0]),Math.floor(d*a[1]+c*b[1]),Math.floor(d*a[2]+c*b[2])]},a.RGBtoHEX=function(b,c,d){return"#"+a.toHex(b)+a.toHex(c)+a.toHex(d)},a.RGBArrayToString=function(a){return"rgb("+a[0]+","+a[1]+","+a[2]+")"},a.HEXtoRGB=function(a){return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]},a.colorStringToHEX=function(b){var c=a.colorStringToRGB(b);return a.RGBtoHEX(c[0],c[1],c[2])},a.numberToHex=function(a){for(var b=a.toString(16);b.length<2;)b="0"+b;return b},a.uinttoRGB=function(a){var b=new Array(a>>16,(a>>8)-(a>>16<<8),a-(a>>8<<8));return b},a.uinttoHEX=function(b){var c=a.uinttoRGB(b),d=a.RGBToHEX(c[0],c[1],c[2]);return d},a.RGBtouint=function(a,b,c){return Number(a)<<16|Number(b)<<8|Number(c)},a.HEXtouint=function(b){var c=a.HEXtoRGB(b),d=a.RGBtouint(c[0],c[1],c[2]);return d},a.grayByLevel=function(a){return a=Math.floor(255*a),"rgb("+a+","+a+","+a+")"},a.HEXtoHSV=function(b){var c=a.HEXtoRGB(b);return a.RGBtoHSV(c[0],c[1],c[2])},a.HSVtoHEX=function(b,c,d){var e=a.HSVtoRGB(b,c,d);return a.RGBtoHEX(e[0],e[1],e[2])},a.HSLtoHEX=function(b,c,d){var e=a.HSLtoRGB(b,c,d);return a.RGBtoHEX(e[0],e[1],e[2])},a.RGBtoHSV=function(a,b,c){var d,e,f,g=Math.min(Math.min(a,b),c),h=Math.max(Math.max(a,b),c);f=h/255;var i=h-g;return 0==i?new Array(0,0,a/255):0==h?(e=0,d=-1,new Array(d,e,f)):(e=i/h,d=a==h?(b-c)/i:b==h?2+(c-a)/i:4+(a-b)/i,d*=60,0>d&&(d+=360),new Array(d,e,f))},a.HSVtoRGB=function(a,b,c){a=a?a:0,b=b?b:0,c=c?c:0;var d,e,f,g,h,i,j,k;if(0==b)return d=e=f=c,[Math.floor(255*d),Math.floor(255*e),Math.floor(255*f)];switch(a/=60,g=Math.floor(a),h=a-g,i=c*(1-b),j=c*(1-b*h),k=c*(1-b*(1-h)),g){case 0:d=c,e=k,f=i;break;case 1:d=j,e=c,f=i;break;case 2:d=i,e=c,f=k;break;case 3:d=i,e=j,f=c;break;case 4:d=k,e=i,f=c;break;default:d=c,e=i,f=j}return new Array(Math.floor(255*d),Math.floor(255*e),Math.floor(255*f))},a.HSLtoRGB=function(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(0==b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a/360+1/3),f=d(i,h,a/360),g=d(i,h,a/360-1/3)}return[Math.floor(255*e),Math.floor(255*f),Math.floor(255*g)]},a.invertColorRGB=function(a,b,c){return[255-a,255-b,255-c]},a.addAlpha=function(b,c){var d=a.colorStringToRGB(b);return null==d?"black":"rgba("+d[0]+","+d[1]+","+d[2]+","+c+")"},a.invertColor=function(b){var c=a.colorStringToRGB(b);return c=a.invertColorRGB(c[0],c[1],c[2]),a.RGBtoHEX(c[0],c[1],c[2])},a.toHex=function(a){for(var b=a.toString(16);b.length<2;)b="0"+b;return b},a.getRandomColor=function(){return"rgb("+String(Math.floor(256*Math.random()))+","+String(Math.floor(256*Math.random()))+","+String(Math.floor(256*Math.random()))+")"},a.colorStringToRGB=function(a){"#"==a.charAt(0)&&(a=a.substr(1,6)),a=a.replace(/ /g,""),a=a.toLowerCase();var b={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};null!=b[a]&&(a=b[a]);for(var c=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),[\.0123456789]+\)$/,process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],d=0;d<c.length;d++){var e=c[d].re,f=c[d].process,g=e.exec(a);if(g)return f(g)}return null}}),define("src/operators/graphic/ColorScaleGenerators",function(){"use strict";function a(){}a.createColorScaleFromColors=function(a,b){if(null==a||null==b||!a.length>0||!b.length>0||a.length!=b.length+2)return null;null==a.rgbs&&(a.rgbs=a.getRgbArrays()),b=b.slice(),b.unshift(0),b.push(1);var c=function(c){var d,e,f;for(d=0;null!=b[d+1];d++)if(c<b[d+1])return e=(c-b[d])/(b[d+1]-b[d]),f=1-e,"rgb("+Math.floor(f*a.rgbs[d][0]+e*a.rgbs[d+1][0])+","+Math.floor(f*a.rgbs[d][1]+e*a.rgbs[d+1][1])+","+Math.floor(f*a.rgbs[d][2]+e*a.rgbs[d+1][2])+")"};return c}}),define("src/operators/graphic/ColorScales",function(){"use strict";function a(){}a.blackScale=function(a){return"black"},a.grayscale=function(a){var b=ColorOperators.interpolateColorsRGB([0,0,0],[255,255,255],a);return ColorOperators.RGBtoHEX(b[0],b[1],b[2])},a.antiGrayscale=function(a){var b=ColorOperators.interpolateColorsRGB([255,255,255],[0,0,0],a);return ColorOperators.RGBtoHEX(b[0],b[1],b[2])},a.antiTemperature=function(b){return a.temperature(1-b)},a.temperature=function(a){if(.2>a)var b=ColorOperators.interpolateColors("#000000",ColorOperators.HSVtoHEX(234,1,1),5*a);else b=a>.85?ColorOperators.interpolateColors(ColorOperators.HSVtoHEX(0,1,1),"#FFFFFF",(a-.85)/.15):ColorOperators.HSVtoHEX(Math.round(360*(.65-(a-.2))),1,1);return b},a.sqrtTemperature=function(b){return a.temperature(Math.sqrt(b))},a.sqrt4Temperature=function(b){return a.temperature(Math.pow(b,.25))},a.quadraticTemperature=function(b){return a.temperature(Math.pow(b,2))},a.cubicTemperature=function(b){return a.temperature(Math.pow(b,3))},a.greenToRed=function(a){var b=ColorOperators.interpolateColorsRGB([50,255,50],[255,50,50],a);return ColorOperators.RGBtoHEX(b[0],b[1],b[2])},a.greenToBlue=function(a){var b=ColorOperators.interpolateColorsRGB([50,255,50],[50,50,255],a);return ColorOperators.RGBtoHEX(b[0],b[1],b[2])},a.grayToOrange=function(a){var b=ColorOperators.interpolateColorsRGB([100,100,100],[255,110,0],a);return ColorOperators.RGBtoHEX(b[0],b[1],b[2])},a.blueToRed=function(a){return"rgb("+Math.floor(255*a)+",0,"+Math.floor(255*(1-a))+")"},a.blueToRedAlpha=function(a){return"rgba("+Math.floor(255*a)+",0,"+Math.floor(255*(1-a))+", 0.5)"},a.whiteToRed=function(a){var b=Math.floor(255-255*a);return"rgb(255,"+b+","+b+")"},a.redToBlue=function(a){var b=ColorOperators.interpolateColorsRGB([255,0,0],[0,0,255],a);return ColorOperators.RGBtoHEX(b[0],b[1],b[2])},a.greenWhiteRed=function(a){if(.5>a)var b=ColorOperators.interpolateColorsRGB([50,255,50],[255,255,255],2*a);else b=ColorOperators.interpolateColorsRGB([255,255,255],[255,50,50],2*(a-.5));return ColorOperators.RGBtoHEX(b[0],b[1],b[2])},a.solar=function(a){var b=ColorOperators.interpolateColorsRGB([0,0,0],ColorOperators.interpolateColorsRGB([255,0,0],[255,255,0],a),Math.pow(.99*a+.01,.2));return ColorOperators.RGBtoHEX(b[0],b[1],b[2])},a.antiSolar=function(b){return ColorOperators.invertColor(a.solar(b))}}),define("src/operators/lists/ListGenerators",function(){"use strict";function a(){}a.createListWithSameElement=function(a,b){switch(typeOf(b)){case"number":var c=new NumberList;break;case"List":var c=new Table;break;case"NumberList":var c=new NumberTable;break;case"Rectangle":var c=new RectamgleList;break;case"string":var c=new StringList;break;case"boolean":var c=new List;break;default:var c=new List}for(var d=0;a>d;d++)c[d]=b;return c},a.createIterationSequence=function(b,c,d){for(var e=a.createListWithSameElement(1,c),f=1;b>f;f++)e[f]=d(e[f-1]);return e}}),define("src/operators/lists/ListOperators",function(){"use strict";function a(){}a.getElement=function(a,b){return null==a?null:(b=null==b?0:b%a.length,a[b])},a.getFirstElements=function(a,b){return null==a?null:(b=null==b?0:Number(b),[{type:"Object",name:"first value",description:"first value",value:a[b+0]},{type:"Object",name:"second value",description:"second value",value:a[b+1]},{type:"Object",name:"third value",description:"third value",value:a[b+2]},{type:"Object",name:"fourth value",description:"fourth value",value:a[b+3]},{type:"Object",name:"fifth value",description:"fifth value",value:a[b+4]},{type:"Object",name:"sixth value",description:"sixth value",value:a[b+5]},{type:"Object",name:"seventh value",description:"seventh value",value:a[b+6]},{type:"Object",name:"eight value",description:"eight value",value:a[b+7]},{type:"Object",name:"ninth value",description:"ninth value",value:a[b+8]},{type:"Object",name:"tenth value",description:"tenth value",value:a[b+9]}])},a.indexOf=function(a,b){return a.indexOf(b)},a.concat=function(){if(null==arguments||0==arguments.length||null==arguments[0])return null;if(1==arguments.length)return arguments[0];var a,b=arguments[0].concat(arguments[1]);for(a=2;arguments[a];a++)b=b.concat(arguments[a]);return b.getImproved()},a.assemble=function(){return List.fromArray(Array.prototype.slice.call(arguments,0)).getImproved()},a.countElementsRepetitionOnList=function(a,b,c,d){if(null!=a){b=null==b?!0:b,c=c||!1,d=null==d?0:d;var e,f,g,h=instantiate(typeOf(a)),i=new NumberList;if(c){if(0==a.length)return null;var j=a[0];for(h.push(j),i.push(1),g=1;g<nElements;g++)e=a[g],e==j?i[i.length-1]=i[i.length-1]+1:(h.push(e),i.push(1),j=e)}else for(g=0;null!=a[g];g++)e=a[g],f=h.indexOf(e),-1!=f?i[f]++:(h.push(e),i.push(1));if("NumberList"==h.type)var k=new NumberTable;else var k=new Table;return k[0]=h,k[1]=i,b&&(k=TableOperators.sortListsByNumberList(k,i)),0!=d&&d<h.length&&(k[0]=k[0].splice(0,d),k[1]=k[1].splice(0,d)),k}},a.reverse=function(a){return a.getReversed()},a.translateWithDictionary=function(a,b,c){var d=new List;return a.forEach(function(e,f){index=b[0].indexOf(e),null!=c?d[f]=-1==index?c:b[1][index]:d[f]=-1==index?a[f]:b[1][index]}),d.getImproved()},a.sortListByNumberList=function(a,b,c){if(null==c&&(c=!0),0==b.length)return a;var d=[],e=instantiate(typeOf(a));for(i=0;null!=a[i];i++)d.push([a[i],b[i]]);for(c?d.sort(function(a,b){return a[1]<b[1]?1:-1}):d.sort(function(a,b){return a[1]<b[1]?-1:1}),i=0;null!=d[i];i++)e.push(d[i][0]);return e.name=a.name,e},a.sortListByIndexes=function(a,b){var c=instantiate(typeOf(a));c.name=a.name;var d,e=a.length;for(d=0;e>d;d++)c.push(a[b[d]]);return c},a.concatWithoutRepetitions=function(){var a,b=arguments[0].clone();for(a=1;a<arguments.length;a++)for(var c=arguments[a],d=c.length,a=0;d>a;a++)-1==b.indexOf(c[a])&&b.push(c[a]);return b.getImproved()},a.slidingWindowOnList=function(a,b,c,d){d=d||0;var e,f,g,h=new Table,i=a.length;switch(c=Math.max(1,c),d){case 0:for(f=0;i>f;f+=c)if(i>=f+b){for(e=new List,g=0;b>g;g++)e.push(a[f+g]);h.push(e.getImproved())}break;case 1:for(f=0;i>f;f+=c){for(e=new List,g=0;g<Math.min(b,i-f);g++)e.push(a[f+g]);h.push(e.getImproved())}break;case 2:for(f=0;i>f;f+=c){for(e=new List,g=0;b>g;g++)e.push(a[(f+g)%i]);h.push(e.getImproved())}}return h.getImproved()},a.getNewListForObjectType=function(a){var b=new List;return b[0]=a,instantiateWithSameType(b.getImproved())},a.listsIntersect=function(a,b){for(var c=a.length<b.length?a:b,d=a==c?b:a,e=0;null!=c[e];e++)if(-1!=d.indexOf(c[e]))return!0;return!1},a.getCommonElements=function(a,b){for(var c="NumberList"==a.type&&"NumberList"==b.type,d="StringList"==a.type&&"StringList"==b.type,e=c?new NumberList:d?new StringList:new List,f=a.length<b.length?a:b,g=a==f?b:a,h=0;null!=f[h];h++)-1!=g.indexOf(f[h])&&e.push(f[h]);return c||d?e:e.getImproved()},a.unionLists=function(a,b){var c;if(a.type!=a.type||"StringList"!=a.type&&"NumberList"!=a.type)return a.concat(b).getWithoutRepetitions();for(var d={},e=a.length-1;e>=0;--e)d[a[e]]=a[e];for(var e=b.length-1;e>=0;--e)d[b[e]]=b[e];c="StringList"==a.type?new StringList:new NumberList;for(var f in d)d.hasOwnProperty(f)&&c.push(d[f]);return c},a.intersectLists=function(b,c){var d;if(b.type!=c.type||"StringList"!=b.type&&"NumberList"!=b.type)d=a.getCommonElements(b,c);else for(d="StringList"==b.type?new StringList:new NumberList,b=b.slice(),c=c.slice();b.length>0&&c.length>0;)b[0]<c[0]?b.shift():b[0]>c[0]?c.shift():(d.push(b.shift()),c.shift());return d},a.getListEntropy=function(b,d){if(null!=b){if(b.length<2)return 1==b.length&&(b._mostRepresentedValue=b[0],b._biggestProbability=1,b._P_valueFollowing=b[0]==d?1:0),0;var e=a.countElementsRepetitionOnList(b,!0);c.l("    getListEntropy | table[0]",e[0]),c.l("    getListEntropy | table[1]",e[1]),b._mostRepresentedValue=e[0][0];var f=b.length;if(b._biggestProbability=e[1][0]/f,1==e[0].length)return b._P_valueFollowing=b[0]==d?1:0,0;var g=0,h=Math.log(e[0].length);if(e[1].forEach(function(a){g-=a/f*Math.log(a/f)/h}),null!=d){var i=e[0].indexOf(d);b._P_valueFollowing=-1==i?0:e[1][i]/f}return g}},a.getInformationGain=function(b,c){if(null==b||null==c||b.length!=c.length)return null;var d=a.getListEntropy(c),e={},f=[],g=b.length;return b.forEach(function(a,b){null==e[a]&&(e[a]=new List,f.push(e[a])),e[a].push(c[b])}),f.forEach(function(b){d-=b.length/g*a.getListEntropy(b)}),d},a.getInformationGainAnalysis=function(b,c){if(null==b||null==c||b.length!=c.length)return null;var d,e=a.getListEntropy(c),f={},g=[],h=b.length,i=new List;return b.forEach(function(a,b){null==f[a]&&(f[a]=new List,g.push(f[a])),f[a].push(c[b])}),g.forEach(function(b){d=a.getListEntropy(b),e-=b.length/h*d,i.push({children:b,entropy:d,infoGain:e})}),i},a.groupElements=function(b,c,d,e){if(b){var f=a._groupElements_Base(b,null,c,d,e);return f}},a.groupElementsByPropertyValue=function(b,c,d,e,f){if(b){var g=a._groupElements_Base(b,c,d,e,f);return g}},a._groupElements_Base=function(a,b,c,d,e){if(a){void 0==d&&(d=0);for(var f,g,h,i,j={},k=new Table,l=0;l<a.length;l++)g=a[l],f=void 0==b?g:g[b],void 0==j[f]&&(j[f]=new List,j[f].name=f,j[f].valProperty=f,k.push(j[f])),0==d?j[f].push(g):1==d&&j[f].push(l),(void 0==h||h>f)&&(h=f),(void 0==i||f>i)&&(i=f);if(e)for(var m=0,l=h;i>l;l++)void 0==j[l]&&(j[l]=new List,j[l].name=l,j[l].valProperty=l,k.push(j[l]),m++);return c&&(k=k.getSortedByProperty("name")),k}}}),define("src/operators/lists/TableConversions",function(){"use strict";function a(){}a.ObjectToTable=function(a,b){var c;if(Array.isArray(a)){if(c=1,!b){b=[];for(var d in a[0])b.push(d)}}else{var e=[];for(var d in a)e.push(d);if(1==e.length&&Array.isArray(a[e[0]])){if(c=1,a=a[e[0]],!b){b=[];for(var d in a[0])b.push(d)}}else c=3,b||(b=e)}for(var f=new Table,g=0;g<b.length;g++){var h=b[g],i=new List;f[g]=i,i.name=h}if(1==c)for(var g=0;g<a.length;g++)for(var j=a[g],k=0;k<b.length;k++)f[k].push(j[b[k]]);else for(var k=0;k<b.length;k++)for(var i=a[b[k]],g=0;g<i.length;g++)f[k].push(i[g]);for(var g=0;g<f.length;g++)f[g]=f[g].getImproved();return f=f.getImproved()},a.ObjectToList=function(b,c){var d=a.ObjectToTable(b,c);return 1==d.getLengths.getMax()?d.getRow(0):void 0},a.TableToObject=function(a,b){if(a){b||(b=a.getNames());for(var c=[],d=0;d<a[0].length;d++){for(var e={},f=0;f<b.length;f++)e[b[f]]=a[f][d];c.push(e)}return{array:c}}}}),define("src/operators/lists/TableEncodings",function(){"use strict";function a(){}a.ENTER=String.fromCharCode(13),a.ENTER2=String.fromCharCode(10),a.ENTER3=String.fromCharCode(8232),a.SPACE=String.fromCharCode(32),a.SPACE2=String.fromCharCode(160),a.TAB="	",a.TAB2=String.fromCharCode(9),a.CSVtoTable=function(b,c,d,e){e=null==e?"":e;var f,g=null==c?!1:c;if(null==b)return null;if(""==b)return new Table;b=b.replace(/\$/g,"");var h=b.split('"');for(f=1;null!=h[f];f+=2)h[f]=h[f].replace(/\n/g,"*ENTER*");b=h.join('"');var i=a.ENTER2,k=b.split(i);1==k.length&&(i=a.ENTER,k=b.split(i),1==k.length&&(i=a.ENTER3,k=b.split(i)));var l=new Table,m=void 0!=d?d:",";if(null==b||""==b||" "==b||0==k.length)return null;var n=0;if(g){n=1;var o=k[0].split(m)}var p,q,r;for(f=n;f<k.length;f++)if(!(k[f].length<2)){var s=NetworkEncodings.replaceChomasInLine(k[f]).split(m);for(j=0;j<s.length;j++){l[j]=null==l[j]?new List:l[j],g&&1==f&&(l[j].name=null==o[j]?"":a._removeQuotes(o[j]));var t=g?f-1:f;q=s[j].replace(/\*CHOMA\*/g,",").replace(/\*ENTER\*/g,"\n"),q=""==q?e:q,r=Number(q.replace(",",".")),p=r||0==r&&""!=q?r:q,"string"==typeof p&&(p=a._removeQuotes(p)),l[j][t]=p}}for(f=0;null!=l[f];f++)l[f]=l[f].getImproved();return l=l.getImproved()},a._removeQuotes=function(a){return 0==a.length?a:('"'!=a.charAt(0)&&"'"!=a.charAt(0)||'"'!=a.charAt(a.length-1)&&"'"!=a.charAt(a.length-1)||(a=a.substr(1,a.length-2)),a)},a.TableToCSV=function(a,b,c){b=b||",";var d,e,f,g,h,i=ListGenerators.createListWithSameElement(a[0].length,"");for(d=0;null!=a[d];d++)for(f=a[d],g=f.type,h=d!=a.length-1,e=0;null!=f[e];e++){switch(g){case"NumberList":i[e]+=f[e];break;default:i[e]+='"'+f[e]+'"'}h&&(i[e]+=b)}var j="";if(c){for(d=0;null!=a[d];d++)f=a[d],j+='"'+f.name+'"',d!=a.length-1&&(j+=b);j+="\n"}return j+i.getConcatenated("\n")}}),define("src/operators/lists/TableGenerators",function(){"use strict";function a(){}a.createTableWithSameElement=function(a,b,c){for(var d=new Table,e=0;a>e;e++)d[e]=ListGenerators.createListWithSameElement(b,c);return d.getImproved()}}),define("src/operators/lists/TableOperators",function(){"use strict";function a(){}a.getElementFromTable=function(a,b,c){return null==a[b]?null:a[b][c]},a.getSubTable=function(a,b,c,d,e){if(null==a)return a;var f=a.length;if(0==f)return null;var g=new Table;0>=d&&(d=f-b+d),b=Math.min(b,f-1),d=Math.min(d,f-b);var h=a[0].length;if(0==h)return null;0>=e&&(e=h-c+e),c=Math.min(c,h-1),e=Math.min(e,h-c);var i,j,k,l,m;for(k=b;b+d>k;k++){for(i=a[k],j=new List,j.name=a[k].name,l=c;c+e>l;l++)m=i[l],j.push(m);g.push(j.getImproved())}return g.getImproved()},a.transpose=function(a,b){return null==a?null:a.getTransposed(b)},a.trainingTestPartition=function(a,b,c,d){if(null!=a&&null!=b){c=c||0,d=d||0;var e=new NumberList,f=new NumberList,g=1==c?new NumberOperators._Alea("my",d,"seeds"):Math.random;return 2==c&&(N_MOD=Math.floor(b/(1-b)*10)),a[0].forEach(function(a,d){0==c||1==c?g()<b?e.push(d):f.push(d):d%N_MOD!=0?e.push(d):f.push(d)}),new List(a.getSubListsByIndexes(e),a.getSubListsByIndexes(f))}},a.testClassificationModel=function(a,b,c,d){if(null==a||null==b||null==c)return null;d=d||0;var e=0;return b.forEach(function(b,d){c(a[0][d],a[1][d])!=b&&e++}),e/b.length},a.getSubListsByIndexes=function(a,b){var c=new Table;c.name=a.name;var d,e,f;for(d=0;null!=a[d];d++){for(e=a[d],f=instantiateWithSameType(e),j=0;null!=b[j];j++)f[j]=e[b[j]];c[d]=f.getImproved()}return c},a.sortListsByNumberList=function(a,b,c){null==c&&(c=!0);var d=instantiate(typeOf(a));d.name=a.name;var e,f=a.length,g=b.clone();for(e=0;e<g.length;e++)g[e]=e;for(g=ListOperators.sortListByNumberList(g,b,c),e=0;f>e;e++){d[e]=a[e].clone();for(var h=0;h<g.length;h++)d[e][h]=a[e][g[h]]}return d},a.aggregateTable=function(b,c,d){if(c=null==c?0:c,null==b||null==b[0]||null==b[0][0]||null==b[c])return null;d=null==d?0:d;var e,f,g,h,i=new Table;for(i.name=b.name,f=0;null!=b[f];f++)i[f]=new List,i[f].name=b[f].name;switch(d){case 0:for(e=0;null!=b[0][e];e++)if(h=-1==i[c].indexOf(b[c][e]))for(f=0;null!=b[f];f++)i[f].push(b[f][e]);break;case 1:for(e=0;null!=b[0][e];e++)if(g=i[c].indexOf(b[c][e]),h=-1==g)for(f=0;null!=b[f];f++)i[f].push(b[f][e]);else for(f=0;null!=b[f];f++)f!=c&&"NumberList"==b[f].type&&(i[f][g]+=b[f][e]);break;case 2:var j=b[c].getElementsRepetitionCount(!1);for(i=a.aggregateTable(b,c,1),f=0;null!=i[f];f++)f!=c&&"NumberList"==i[f].type&&(i[f]=i[f].divide(j[1]));i.push(j[1])}for(f=0;null!=i[f];f++)i[f]=i[f].getImproved();return i.getImproved()},a.getCountPairsMatrix=function(a){if(null==a||a.length<2||null==a[0]||null==a[0][0])return null;var b=a[0].getWithoutRepetitions(),c=a[1].getWithoutRepetitions(),d=new NumberTable(c.length);return c.forEach(function(a,c){d[c].name=String(a),b.forEach(function(a,b){d[c][b]=0})}),a[0].forEach(function(e,f){element1=a[1][f],d[c.indexOf(element1)][b.indexOf(e)]++}),d},a.filterTableByElementInList=function(a,b,c){if(!(null==a||!a.length>1||null==b)){if(null==c)return a;var d,e,f=new Table;for(f.name=a.name,e=0;null!=a[e];e++)f[e]=new List;for(d=0;null!=a[0][d];d++)if(a[b][d]==c)for(e=0;null!=a[e];e++)f[e].push(a[e][d]);
for(e=0;null!=f[e];e++)f[e]=f[e].getImproved();return f}},a.mergeDataTablesInList=function(b){if(b.length<2)return b;for(var c=b[0],d=1;null!=b[d];d++)c=a.mergeDataTables(c,b[d]);return c},a.mergeDataTables=function(a,b){if(0==b[0].length){var c=a.clone();return c.push(ListGenerators.createListWithSameElement(a[0].length,0)),c}var d,e,f,g=new Table,h=ListOperators.concatWithoutRepetitions(a[0],b[0]),i=h.length,j=a.length-1,k=b.length-1,l=new NumberTable,m=new NumberTable;for(e=0;i>e;e++){if(d=a[0].indexOf(h[e]),d>-1)for(var f=0;j>f;f++)0==e&&(l[f]=new NumberList,l[f].name=a[f+1].name),l[f][e]=a[f+1][d];else for(f=0;j>f;f++)0==e&&(l[f]=new NumberList,l[f].name=a[f+1].name),l[f][e]=0;if(d=b[0].indexOf(h[e]),d>-1)for(f=0;k>f;f++)0==e&&(m[f]=new NumberList,m[f].name=b[f+1].name),m[f][e]=b[f+1][d];else for(f=0;k>f;f++)0==e&&(m[f]=new NumberList,m[f].name=b[f+1].name),m[f][e]=0}for(g[0]=h,e=0;null!=l[e];e++)g.push(l[e]);for(e=0;null!=m[e];e++)g.push(m[e]);return g},a.fusionDataTables=function(a,b){for(var c,d,e=a.clone(),f=0;null!=b[0][f];f++)d=b[0][f],c=e[0].indexOf(d),-1==c?(e[0].push(d),e[1].push(b[1][f])):e[1][c]+=b[1][f];return e},a.completeTable=function(a,b,c){c=null==c?0:c;var d=new Table;d.name=a.name;for(var e,f,g,h=0;h<a.length;h++){for(e=a[h],f=null==e?ListOperators.getNewListForObjectType(c):instantiateWithSameType(e),f.name=null==e?"":e.name,g=0;b>g;g++)f[g]=null==e||null==e[g]?c:e[g];d[h]=f}return d},a.getNumberTableFromTable=function(a){if(null==a||!a.length>0)return null;var b,c=new NumberTable;for(c.name=a.name,b=0;null!=a[b];b++)"NumberList"==a[b].type&&c.push(a[b]);return c},a.getVariablesInformationGain=function(a,b){if(null==a)return null;var c=new NumberList;return a.forEach(function(a){c.push(ListOperators.getInformationGain(a,b))}),c},a.splitTableByCategoricList=function(a,b){if(null==a||null==b)return null;var c,d=new List,e={};b.length;return b.forEach(function(b,f){c=e[b],null==c&&(c=new Table,e[b]=c,d.push(c),a.forEach(function(a,b){c[b]=new List,c[b].name=a.name}),c._element=b),a.forEach(function(b,d){c[d].push(a[d][f])})}),d},a.buildDecisionTree=function(b,c,d,e,f,g,h){if(null!=b&&null!=c&&null!=d){e=null==e?.2:e,f=f||10,g=g||.002;var i=NumberListGenerators.createSortedNumberList(c.length),j=new Tree;return a._buildDecisionTreeNode(j,b,c,0,e,f,g,null,null,d,i,h),j}},a._buildDecisionTreeNode=function(b,d,e,f,g,h,i,j,k,l,m,n){var o=ListOperators.getListEntropy(e,l);if(o>=g){informationGains=a.getVariablesInformationGain(d,e);var p=0,q=0;informationGains.forEach(function(a,b){a>p&&(p=a,q=b)})}var r=o>=g&&p>i&&e.length>=h,s=b.nodeList.getNewId(),t=(null==k?"":k+":")+(r?d[q].name:"P="+e._biggestProbability+"("+e._mostRepresentedValue+")"),u=new Node(s,t);if(b.addNodeToTree(u,j),null==j&&(b.informationGainTable=new Table,b.informationGainTable[0]=d.getNames(),informationGains&&(b.informationGainTable[1]=informationGains.clone(),b.informationGainTable=b.informationGainTable.getListsSortedByList(informationGains,!1))),u.entropy=o,u.weight=e.length,u.supervised=e,u.indexes=m,u.value=k,u.mostRepresentedValue=e._mostRepresentedValue,u.biggestProbability=e._biggestProbability,u.valueFollowingProbability=e._P_valueFollowing,u.lift=u.valueFollowingProbability/b.nodeList[0].valueFollowingProbability,2>f&&(c.l("\nlevel",f),c.l("supervised.countElement(supervisedValue)",e.countElement(l)),c.l("entropy",o),c.l("value",k),c.l("name",t),c.l("supervised.name",e.name),c.l("supervised.length",e.length),c.l("supervisedValue",l),c.l("supervised._biggestProbability, supervised._P_valueFollowing",e._biggestProbability,e._P_valueFollowing),c.l("node.valueFollowingProbability (=supervised._P_valueFollowing):",u.valueFollowingProbability),c.l("tree.nodeList[0].valueFollowingProbability",b.nodeList[0].valueFollowingProbability),c.l("node.biggestProbability (=_biggestProbability):",u.biggestProbability),c.l("node.mostRepresentedValue:",u.mostRepresentedValue),c.l("node.mostRepresentedValue==supervisedValue",u.mostRepresentedValue==l)),u._color=a._decisionTreeColorScale(1-u.valueFollowingProbability),n){var v=document.createElement("canvas");v.width=150,v.height=100;var w=v.getContext("2d");w.clearRect(0,0,150,100),a._decisionTreeGenerateColorsMixture(w,150,100,["blue","red"],u.mostRepresentedValue==l?[Math.floor(u.biggestProbability*u.weight),Math.floor((1-u.biggestProbability)*u.weight)]:[Math.floor((1-u.biggestProbability)*u.weight),Math.floor(u.biggestProbability*u.weight)]);var x=new Image;x.src=v.toDataURL(),u.pattern=w.createPattern(x,"repeat")}if(!r)return u;u.bestFeatureName=d[q].name,u.iBestFeature=q,u.informationGain=p;var y,z,A=d.concat([e,m]),B=a.splitTableByCategoricList(A,d[q]);return B.forEach(function(c){y=c.getSubList(0,c.length-3),z=c[c.length-2],childIndexes=c[c.length-1],a._buildDecisionTreeNode(b,y,z,f+1,g,h,i,u,c._element,l,childIndexes,n)}),u.toNodeList=u.toNodeList.getSortedByProperty("valueFollowingProbability",!1),u},a._decisionTreeColorScale=function(a){var b=.5>a?Math.floor(510*a):255,c=.5>a?Math.floor(510*a):Math.floor(510*(1-a)),d=.5>a?255:Math.floor(510*(1-a));return"rgb("+b+","+c+","+d+")"},a._decisionTreeGenerateColorsMixture=function(a,b,c,d,e){var f,g,h,i=ListGenerators.createListWithSameElement(e[0],d[0]);for(h=1;null!=d[h];h++)i=i.concat(ListGenerators.createListWithSameElement(e[h],d[h]));for(f=0;b>f;f++)for(g=0;c>g;g++)h=4*(f+g*b),a.fillStyle=i.getRandomElement(),a.fillRect(f,g,1,1)}}),define("src/operators/numeric/MatrixGenerators",function(){"use strict";function a(){}a.createMatrixFromTrianglesMapping=function(a,b,c,d,e,f){if(b.y!=a.y)var g=(c.y-a.y)/(b.y-a.y),h=(f.x-d.x-(e.x-d.x)*g)/(c.x-a.x-(b.x-a.x)*g),i=g*(e.x-d.x)/(c.y-a.y)-h*(b.x-a.x)/(b.y-a.y),j=(f.y-d.y-(e.y-d.y)*g)/(c.x-a.x-(b.x-a.x)*g),k=g*(e.y-d.y)/(c.y-a.y)-j*(b.x-a.x)/(b.y-a.y);else h=(e.x-d.x)/(b.x-a.x),i=(f.x-d.x)/(c.y-a.y)-h*(c.x-a.x)/(c.y-a.y),j=(e.y-d.y)/(b.x-a.x),k=(f.y-d.y)/(c.y-a.y)-j*(c.x-a.x)/(c.y-a.y);return new Matrix(h,j,i,k,d.x-h*a.x-i*a.y,d.y-j*a.x-k*a.y)},a.applyTransformationOnCanvasFromPoints=function(a,b,c,d,e,f,g){if(c.y!=b.y)var h=(d.y-b.y)/(c.y-b.y),i=(g.x-e.x-(f.x-e.x)*h)/(d.x-b.x-(c.x-b.x)*h),j=h*(f.x-e.x)/(d.y-b.y)-i*(c.x-b.x)/(c.y-b.y),k=(g.y-e.y-(f.y-e.y)*h)/(d.x-b.x-(c.x-b.x)*h),l=h*(f.y-e.y)/(d.y-b.y)-k*(c.x-b.x)/(c.y-b.y);else i=(f.x-e.x)/(c.x-b.x),j=(g.x-e.x)/(d.y-b.y)-i*(d.x-b.x)/(d.y-b.y),k=(f.y-e.y)/(c.x-b.x),l=(g.y-e.y)/(d.y-b.y)-k*(d.x-b.x)/(d.y-b.y);a.transform(i,k,j,l,e.x-i*b.x-j*b.y,e.y-k*b.x-l*b.y)},a.createRotationMatrix=function(a,b){var c=Matrix(Math.cos(a),Math.sin(a),-Math.sin(a),Math.cos(a));return b&&(c=Matrix.translation(b.x,b.y).concat(c).concat(Matrix.translation(-b.x,-b.y))),c},a.createScaleMatrix=function(a,b,c){b=b||a;var d=Matrix(a,0,0,b);return c&&(d=Matrix.translation(c.x,c.y).concat(d).concat(Matrix.translation(-c.x,-c.y))),d},a.createTranslationMatrix=function(a,b){return Matrix(1,0,0,1,a,b)}}),define("src/operators/numeric/NumberOperators",function(){"use strict";function a(){}a.numberToString=function(a,b,c,d){for(var e=a.toFixed(b);"0"==e.charAt(e.length-1);)e=e.substring(0,e.length-1);return"."==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e},a.getRandomWithSeed=function(a){return a=(9301*a+49297)%233280,a/233280},a.numberFromBinaryPositions=function(a){var b,c=0;for(b=0;null!=a[b];b++)c+=Math.pow(2,a[b]);return c},a.numberFromBinaryValues=function(a){for(var b=0,c=0;null!=a[c];c++)b+=1==a[c]?Math.pow(2,c):0;return b},a.powersOfTwoDecomposition=function(a,b){for(var c,d=new NumberList,e=0;a>e;)c=Math.floor(Math.log(a)/Math.LN2),d[c]=1,a-=Math.pow(2,c);for(var b=Math.max(d.length,null==b?0:b),f=0;b>f;f++)d[f]=1==d[f]?1:0;return d},a.positionsFromBinaryValues=function(a){var b,c=new NumberList;for(b=0;null!=a[b];b++)1==a[b]&&c.push(b);return c},a._Alea=function(){return function(b){var c=0,d=0,e=0,f=1;0==b.length&&(b=[+new Date]);var g=a._Mash();c=g(" "),d=g(" "),e=g(" ");for(var h=0;h<b.length;h++)c-=g(b[h]),0>c&&(c+=1),d-=g(b[h]),0>d&&(d+=1),e-=g(b[h]),0>e&&(e+=1);g=null;var i=function(){var a=2091639*c+2.3283064365386963e-10*f;return c=d,d=e,e=a-(f=0|a)};return i.uint32=function(){return 4294967296*i()},i.fract53=function(){return i()+1.1102230246251565e-16*(2097152*i()|0)},i.version="Alea 0.9",i.args=b,i}(Array.prototype.slice.call(arguments))},a._Mash=function(){var a=4022871197,b=function(b){b=b.toString();for(var c=0;c<b.length;c++){a+=b.charCodeAt(c);var d=.02519603282416938*a;a=d>>>0,d-=a,d*=a,a=d>>>0,d-=a,a+=4294967296*d}return 2.3283064365386963e-10*(a>>>0)};return b.version="Mash 0.9",b}}),define("src/operators/numeric/interval/IntervalListOperators",function(){"use strict";function a(){}a.scaleIntervals=function(a,b){var c=new List;c.name=a.name;for(var d=0;null!=a[d];d++)c[d]=a[d].getScaled(b);return c}}),define("src/operators/numeric/interval/IntervalTableOperators",function(){"use strict";function a(){}a.scaleIntervals=function(a,b){var c=new Table;c.name=a.name;for(var d=0;null!=a[d];d++)c[d]=IntervalListOperators.scaleIntervals(a[d],b);return c}}),define("src/operators/numeric/numberList/NumberListGenerators",function(){"use strict";function a(){}a.createSortedNumberList=function(a,b,c){b=b||0,c=c||1,0==c&&(c=1);var d,e=new NumberList;for(d=0;a>d;d++)e.push(b+d*c);return e},NumberList.createNumberListFromInterval=function(a,b){null==b&&(b=new Interval(0,1));var c,d=new NumberList,e=b.getAmplitude();for(c=0;a>c;c++)d.push(Number(b.getMin())+Number(Math.random()*e));return d},a.createRandomNumberList=function(a,b,c,d){c=null==c?-1:c,b=null==b?new Interval(0,1):b;for(var e=new NumberList,f=b.getAmplitude(),g=-1==c?Math.random:new NumberOperators._Alea("my",c,"seeds"),h=0;a>h;h++)e[h]=null==d?g()*f+b.x:d(g()*f+b.x);return e}}),define("src/operators/numeric/numberList/NumberListOperators",function(){"use strict";function a(){}a.cosineSimilarity=function(a,b){var c=a.getNorm()*b.getNorm();return 0==c?0:a.dotProduct(b)/c},a.covariance=function(a,b){var c,d=Math.min(a.length,b.length),e=a.getAverage(),f=b.getAverage(),g=0;for(c=0;d>c;c++)g+=(a[c]-e)*(b[c]-f);return g/d},a.linearKMeans=function(a,b,c){if(null==a||null==b||!b>0)return null;var d,e,f,g,h,i,j,k=a.getInterval(),l=k.x,m=k.y,n=new NumberTable,o=(m-l)/b,p=1e3,q=new NumberList,r=new NumberList,s=new NumberList,t=1+m-l;for(d=0;b>d;d++)n[d]=new NumberList,r[d]=l+(d+.5)*o;for(j=0;p>j;j++){for(d=0;b>d;d++)s[d]=0,q[d]=r[d],r[d]=0;for(d=0;null!=a[d];d++){for(g=a[d],i=t,f=0,e=0;b>e;e++)h=Math.abs(g-q[e]),i>h&&(i=h,f=e);j==p-1&&(c?n[f].push(d):n[f].push(g)),s[f]++,r[f]=((s[f]-1)*r[f]+g)/s[f]}}return n},a.standardDeviationBetweenTwoNumberLists=function(a,b){for(var c=0,d=Math.min(a.length,b.length),e=0;d>e;e++)c+=Math.pow(a[e]-b[e],2);return c/d},a.pearsonProductMomentCorrelation=function(b,c){return a.covariance(b,c)/(b.getStandardDeviation()*c.getStandardDeviation())},a.averageSmoother=function(a,b,c){c=null==c?1:c,b=null==b?.1:b,b=Math.max(Math.min(b,.5),0);var d,e=1-2*b,f=a.length-1,g=new NumberList;for(g.name=a.name,d=0;c>d;d++)0==d?a.forEach(function(c,d){g[d]=e*c+(d>0?a[d-1]*b:0)+(f>d?a[d+1]*b:0)}):g.forEach(function(a,c){g[c]=e*a+(c>0?g[c-1]*b:0)+(f>c?g[c+1]*b:0)});return g.name=a.name,g},a.filterNumberListByNumber=function(a,b,c,d){d=d||!1;var e,f=new NumberList;if(d)switch(c){case"<":for(e=0;null!=a[e];e++)a[e]<b&&f.push(e);break;case"<=":for(e=0;null!=a[e];e++)a[e]<=b&&f.push(e);break;case">":for(e=0;null!=a[e];e++)a[e]>b&&f.push(e);break;case">=":for(e=0;null!=a[e];e++)a[e]>=b&&f.push(e);break;case"==":for(e=0;null!=a[e];e++)a[e]==b&&f.push(e);break;case"!=":for(e=0;null!=a[e];e++)a[e]!=b&&f.push(e)}else switch(c){case"<":for(e=0;null!=a[e];e++)a[e]<b&&f.push(a[e]);break;case"<=":for(e=0;null!=a[e];e++)a[e]<=b&&f.push(a[e]);break;case">":for(e=0;null!=a[e];e++)a[e]>b&&f.push(a[e]);break;case">=":for(e=0;null!=a[e];e++)a[e]>=b&&f.push(a[e]);break;case"==":for(e=0;null!=a[e];e++)a[e]==b&&f.push(a[e]);break;case"!=":for(e=0;null!=a[e];e++)a[e]!=b&&f.push(a[e])}return f},a.union=function(a,b){for(var c={},d=a.length-1;d>=0;--d)c[a[d]]=a[d];for(var d=b.length-1;d>=0;--d)c[b[d]]=b[d];var e=new NumberList;for(var f in c)c.hasOwnProperty(f)&&e.push(c[f]);return e},a.intersection=function(b,c){if(arguments.length>2){for(var d=[],e=0;e<arguments.length;e++)d.push(arguments[e]);d.sort(function(a,b){return a.length-b.length}),console.log("sets: ",d);for(var f=d[0],e=1;e<d.length;e++){var g=d[e];f=a.intersection(f,g)}return f}var h=new NumberList;for(b=b.slice(),c=c.slice();b.length>0&&c.length>0;)b[0]<c[0]?b.shift():b[0]>c[0]?c.shift():(h.push(b.shift()),c.shift());return h}}),define("src/operators/numeric/numberTable/NumberTableConversions",function(){"use strict";NumberTableConversions=function(){},NumberTableConversions.numberTableToPolygon=function(a){if(a.length<2)return null;var b,c=Math.min(a[0].length,a[1].length),d=new Polygon;for(b=0;c>b;b++)d[b]=new Point(a[0][b],a[1][b]);return d}}),define("src/operators/numeric/numberTable/NumberTableFlowOperators",function(){"use strict";function a(){}a.getFlowTable=function(a,b,c){if(null!=a){b=b||!1;var d,e,f,g,h,i,j=a.length,k=a[0].length,l=new NumberList,m=new NumberList,n=new NumberList,o=-9999999,p=9999999,q=-9999999;for(h=0;k>h;h++){for(e=9999999,f=-9999999,g=0,i=0;j>i;i++){if(d=a[i],d.length!=k)return;f=Math.max(f,d[h]),e=Math.min(e,d[h]),g+=d[h]}l.push(e),m.push(f),n.push(g),p=Math.min(p,e),o=Math.max(o,f),q=Math.max(q,g)}var r,s,t,u=q-p,v=new NumberTable,w=c?1:0;if(b&&c){return v=new NumberTable(a.length+1),a[0].forEach(function(){v[0].push(0)}),a.forEach(function(a,b){a.forEach(function(a,c){sum=n[c],v[b+1][c]=a/(0==sum?1e-5:sum)+v[b][c]})}),v}for(v=new NumberTable,b?s=Math.max(p,0):(s=p,t=u),h=0;j>h;h++)r=new NumberList,v.push(r);for(c&&v.push(new NumberList),h=0;k>h;h++)for(d=a[0],b&&(t=n[h]-s),c&&(v[0][h]=0),0==t&&(t=1e-5),v[w][h]=(d[h]-s)/t,i=1;j>i;i++)d=a[i],v[i+w][h]=(d[h]-s)/t+v[i-1+w][h];return v}},a.getFlowTableIntervals=function(b,c,d,e){if(null==b)return null;var f,g,h,i=a.getFlowTable(b,c,!0),j=new Table,k=i.length,l=i[0].length,m=new NumberList;for(f=1;k>f;f++)for(numberList=i[f],h=new List,j[f-1]=h,g=0;l>g;g++)h.push(new Interval(i[f-1][g],i[f][g])),f==k-1&&(m[g]=i[f][g]);if(d){var n,o,p;for(g=0;l>g;g++){for(n=new NumberList,h=j[f],f=0;k-1>f;f++)n.push(j[f][g].getAmplitude());var q=n.getSortIndexes();for(p=c||e?0:.5*(1-m[g]),f=0;k-1>f;f++)o=j[q[f]][g],o.y=p+o.getAmplitude(),o.x=p,p=o.y}}else if(!c)for(g=0;l>g;g++)for(f=0;k-1>f;f++)o=j[f][g],e?(j[f][g].x=1-j[f][g].x,j[f][g].y=1-j[f][g].y):j[f][g]=o.add(.5*(1-m[g]));return j}}),define("src/operators/numeric/numberTable/NumberTableOperators",function(){"use strict";function a(){}a.normalizeLists=function(a){return a.getNumberListsNormalized()},a.normalizeListsToMax=function(a){var b=new NumberTable;b.name=a.name;var c;for(c=0;null!=a[c];c++)b[c]=a[c].getNormalizedToMax();return b},a.averageSmootherOnLists=function(a,b,c){if(null!=a){b=b||.5,c=c||1;var d=new NumberTable;return d.name=a.name,a.forEach(function(e,f){d[f]=NumberListOperators.averageSmoother(a[f],b,c)}),d}},a.kNN=function(a,b,d,e,f,g){if(null==a||null==b)return null;e=e||1,f=null==f?!0:f;var h,i,j=function(d){var g,h,i,j=new NumberTable;if(j[0]=new NumberList,j[1]=new NumberList,a[0].forEach(function(b,c){if(i=0,a.forEach(function(a,b){i+=Math.pow(a[c]-d[b],2)}),j[1].length<e||j[1][e-1]>i){var f=!1;for(h=0;j[1][h]<e;h++)if(i<j[1][h]){j[1].splice(h,0,i),j[0].splice(h,0,c),f=!0;break}!f&&j[1].length<e&&(j[1].push(i),j[0].push(c))}}),f){var k=new Table;for(k[0]=new List,k[1]=new NumberList,g=0;e>g;g++)clas=b[j[0][g]],index=k[0].indexOf(clas),-1==index?(k[0].push(clas),k[1].push(1)):k[1][index]++;var l=k[1][0],m=0;return k[1].slice(1).forEach(function(a,b){a>l&&(l=a,m=b+1)}),k[0][m]}var n,o=0,p=0;for(g=0;e>g;g++)n=b[j[0][g]],o+=n/(j[1][g]+1e-6),p+=1/(j[1][g]+1e-6);return c.l("vector:",d[0],d[1],"colsest:",Math.floor(1e8*j[1][0]),Math.floor(1e8*j[1][1]),"categories",b[j[0][0]],b[j[0][1]],"result",o/p),o/p};if(null==d){if(null!=g&&g>0){var k={},l=0;b.forEach(function(a){null==k[a]&&(k[a]=l,l++)});var m,n=new NumberTable,o=a[0].getMinMaxInterval(),p=o.x,q=o.getAmplitude()/g,r=a[1].getMinMaxInterval(),s=r.x,t=r.getAmplitude()/g;for(h=0;g>h;h++)for(n[h]=new NumberList,i=0;g>i;i++)m=[p+q*h,s+t*i],j(m),n[h][i]=f?k[j(m)]:j(m);return n}return j}var u=instantiateWithSameType(b);return d.forEach(function(a){u.push(j(a))}),u},a.numberTableToNetwork=function(a,b,c){c=null==c?0:c;var d,e,f,g,h,i,j,k=new Network;switch(b){case 0:var l,m;for(f=0;null!=a[f+1];f++)for(d=a[f],0==f?(h=new Node(d.name,d.name),k.addNode(h)):h=k.nodeList[f],g=f+1;null!=a[g];g++)e=a[g],0==f?(i=new Node(e.name,e.name),k.addNode(i)):i=k.nodeList[g],e=a[g],l=NumberListOperators.standardDeviationBetweenTwoNumberLists(d,e),m=1/(1+l),m>=c&&(j=new Relation(f+"_"+g,h.name+"_"+i.name,h,i,m),k.addRelation(j));break;case 1:break;case 2:}return k}}),define("src/operators/objects/ObjectConversions",function(){"use strict";ObjectConversions=function(){},ObjectConversions.conversor=function(a,b){var d,e,f=typeOf(a),g=f+"_"+b;switch(c.log("ObjectConversions.conversor, pairType:",g),g){case"NumberTable_Polygon":var h=new Polygon,i=a.length>1;for(d=0;null!=a[0][d];d++)h[d]=new Point(a[0][d],i?a[1][d]:0);return h;case"date_string":return DateOperators.dateToString(a);case"string_date":return DateOperators.stringToDate(a);case"date_number":return a.getTime();case"number_date":return new Date(a);case"List_StringList":case"NumberList_StringList":return a.toStringList();case"StringList_NumberList":return a.toNumberList();case"Object_string":return JSON.stringify(a,null,"	");case"string_Object":return JSON.parse(a);case"string_ColorScale":return ColorScales[a];case"string_Table":return TableEncodings.CSVtoTable(a);case"StringList_DateList":return e=new DateList,a.forEach(function(a){e.push(DateOperators.stringToDate(a))}),e.name=a.name,e;case"DateList_NumberList":return a.getTimes();case"Table_Network":return NetworkConvertions.TableToNetwork(a,null,0,!1)}switch(b){case"string":return a.toString();case"number":return Number(a)}}}),define("src/operators/objects/ObjectOperators",function(){"use strict";function a(){}a.identity=function(a){return a},a.getReport=function(a){if(null==a)return null;if(a.getReport)return a.getReport();var b="///////////report of instance of Object//////////",c=ObjectConversions.objectToString(a);if(c.length<2e3)return b+="\n"+c;var d=new StringList;new StringList,new StringList;for(propName in a)d.push(propName);return b+=d.length<100?"\nproperties: "+d.join(", "):"\nfirst 100 properties: "+d.slice(0,100).join(", ")},a.booleanGate=function(a,b,c){return a?b:c},a.getPropertyValue=function(a,b){return null!=a?null==a?null:a[b]:void 0},a.getPropertiesNames=function(a){return null!=a?StringList.fromArray(Object.getOwnPropertyNames(a)):void 0},a.getPropertiesNamesAndValues=function(b){if(null!=b){var c=new Table;return c[0]=a.getPropertiesNames(b),c[1]=new List,c[0].forEach(function(a,d){c[1][d]=b[a]}),c[1]=c[1].getImproved(),c}},a.interpolateObjects=function(a,b,c,d){var e,f=typeOf(a);if(f!=typeOf(b))return a;c=null==c?.5:c;var g=1-c;switch(f){case"number":return d&&Math.abs(a-b)<=d?a:g*a+c*b;case"Interval":return d&&Math.abs(a.x-b.x)+Math.abs(a.y-b.y)<=d?a:new Interval(g*a.x+c*b.x,g*a.y+c*b.y);case"NumberList":if(d&&Math.abs(a.subtract(b).getSum())<=d)return a;var h=Math.min(a.length,b.length),i=new NumberList;for(e=0;h>e;e++)i[e]=g*a[e]+c*b[e];return i}return null},a.replaceObject=function(a,b,c){return a==b?c:a},a.toList=function(a){return List.fromArray(a).getImproved()},a.addition=function(){var b,d;if(arguments.length<2){if(1==arguments.length&&null!=arguments[0]&&arguments[0].isList){var b=arguments[0][0];for(d=1;null!=arguments[0][d];d++)b=a.addition(b,arguments[0][d]);return b}return null}if(2==arguments.length){if(null!=arguments[0]&&arguments[0].isList&&null!=arguments[1]&&arguments[1].isList)return a._applyBinaryOperatorOnLists(arguments[0],arguments[1],a.addition);if(null!=arguments[0]&&arguments[0].isList)return a._applyBinaryOperatorOnListWithObject(arguments[0],arguments[1],a.addition);if(null!=arguments[1]&&arguments[1].isList)return a._applyBinaryOperatorOnObjectWithList(arguments[0],arguments[1],a.addition);var e=arguments[0],f=arguments[1],g=typeOf(e),h=typeOf(f),i=!1;g>h&&"string"!=h&&"string"!=g&&(e=arguments[1],f=arguments[0],g=typeOf(e),h=typeOf(f),i=!0);var j=g+"_"+h;switch(j){case"boolean_boolean":return e&&f;case"date_string":return i?f+DateOperators.dateToString(e):DateOperators.dateToString(e)+f;case"number_string":case"string_string":case"string_number":case"boolean_number":case"number_number":return e+f;case"Point_Point":return new Point(e.x+f.x,e.y+f.y);case"Point3D_Point3D":return new Point3D(e.x+f.x,e.y+f.y,e.z+f.z);case"number_Point":return new Point(e.x+f,e.y+f);case"number_Point3D":return new Point3D(e.x+f,e.y+f,e.z+f);case"Interval_number":return new Interval(e.x+f,e.y+f);case"Interval_Point":return new Point(e.getMin()+f.x,e.getMax()+f.y);case"Interval_Interval":return new Point(e.getMin()+f.getMin(),e.getMax()+f.getMax());case"Point_Rectangle":return new Rectangle(e.x+f.x,e.y+f.y,f.width,f.height);case"Interval_Rectangle":return new Rectangle(e.getMin()+f.x,e.getMax()+f.y,f.width,f.height);case"Rectangle_Rectangle":return new Rectangle(e.x+f.x,e.y+f.y,e.width+f.width,e.height+f.height);case"date_number":return new Date(e.getTime()+f/DateOperators.millisecondsToDays);case"date_date":return new Date(Number(e.getTime()+f.getTime()));case"date_DateInterval":return new DateInterval(a.addition(e,f.date0),a.addition(e,f.date1));case"DateInterval_number":return new DateInterval(a.addition(e.date0,f),a.addition(e.date1,f));case"DateInterval_Interval":return new DateInterval(a.addition(e.date0,f.min),a.addition(e.date1,f.max));case"DateInterval_DateInterval":return new DateInterval(a.addition(e.date0,f.date0),a.addition(e.date1,f.date1));case"string_StringList":return f.append(e,!1);case"StringList_string":return f.append(e,!0);default:return c.log("[!] addition didn't manage to resolve:",j,e+f),null}return e+f}for(b=arguments[0],d=1;d<arguments.length;d++)b=a.addition(b,arguments[d]);return b},a.multiplication=function(){var b,d;if(arguments.length<2){if(1==arguments.length&&arguments[0].isList){var b=arguments[0][0];for(d=1;null!=arguments[0][d];d++)b=a.multiplication(b,arguments[0][d]);return b}return null}if(2==arguments.length){if(null==arguments[0])return null;if(arguments[0].isList&&arguments[1].isList)return a._applyBinaryOperatorOnLists(arguments[0],arguments[1],a.multiplication);if(arguments[0].isList)return a._applyBinaryOperatorOnListWithObject(arguments[0],arguments[1],a.multiplication);if(arguments[1].isList)return a._applyBinaryOperatorOnListWithObject(arguments[1],arguments[0],a.multiplication);var e=arguments[0],f=arguments[1],g=typeOf(e),h=typeOf(f);g>h&&(e=arguments[1],f=arguments[0],g=typeOf(e),h=typeOf(f));var i=g+"_"+h;switch(i){case"number_number":case"boolean_boolean":case"boolean_number":case"Date_string":case"number_string":case"string_string":return e*f;case"Point_Point":return new Point(e.x*f.x,e.y*f.y);case"Point3D_Point3D":return new Point3D(e.x*f.x,e.y*f.y,e.z*f.z);case"number_Point":return new Point(e.x*f,e.y*f);case"number_Point3D":return new Point3D(e.x*f,e.y*f,e.z*f);case"Interval_number":return new Interval(e.getMin()*f,e.getMax()*f);case"Interval_Point":return new Point(e.getMin()*f.x,e.getMax()*f.y);case"Interval_Interval":return new Point(e.getMin()+f.getMin(),e.getMax()+f.getMax());case"Point_Rectangle":return new Rectangle(e.x*f.x,e.y*f.y,f.width,f.height);case"Interval_Rectangle":return new Rectangle(e.getMin()*f.x,e.getMax()*f.y,f.width,f.height);case"Rectangle_Rectangle":return new Rectangle(e.x*f.x,e.y*f.y,e.width*f.width,e.height*f.height);case"date_number":return new Date(e.getTime()*(f/DateOperators.millisecondsToDays));case"date_date":return new Date(Number(e.getTime()+f.getTime()));case"date_DateInterval":return new DateInterval(a.multiplication(e,f.date0),a.multiplication(e,f.date1));case"DateInterval_number":return new DateInterval(a.multiplication(e.date0,f),a.multiplication(e.date1,f));case"DateInterval_Interval":return new DateInterval(a.multiplication(e.date0,f.min),a.multiplication(e.date1,f.max));case"DateInterval_DateInterval":return new DateInterval(a.multiplication(e.date0,f.date0),a.multiplication(e.date1,f.date1));default:return c.log("[!] multiplication didn't manage to resolve:",i,e*f),null}return e*f}for(b=arguments[0],d=1;d<arguments.length;d++)b=a.multiplication(b,arguments[d]);return b},a.division=function(){var b,d;if(arguments.length<2){if(1==arguments.length&&arguments[0]&&arguments[0].isList){var b=arguments[0][0];for(d=1;null!=arguments[0][d];d++)b=a.division(b,arguments[0][d]);return b}return null}if(2==arguments.length){if(null!=arguments[0]&&arguments[0].isList&&null!=arguments[1]&&arguments[1].isList)return a._applyBinaryOperatorOnLists(arguments[0],arguments[1],a.division);if(null!=arguments[0]&&arguments[0].isList)return a._applyBinaryOperatorOnListWithObject(arguments[0],arguments[1],a.division);if(null!=arguments[1]&&arguments[1].isList)return a._applyBinaryOperatorOnListWithObject(arguments[1],arguments[0],a.division);var e=arguments[0],f=arguments[1],g=typeOf(e),h=typeOf(f);g>h&&(e=arguments[1],f=arguments[0],g=typeOf(e),h=typeOf(f));var i=g+"_"+h;switch(i){case"number_number":case"boolean_boolean":case"boolean_number":case"Date_string":case"number_string":case"string_string":return e/f;case"Point_Point":return new Point(e.x/f.x,e.y/f.y);case"Point3D_Point3D":return new Point3D(e.x/f.x,e.y/f.y,e.z/f.z);case"number_Point":return new Point(e.x/f,e.y/f);case"number_Point3D":return new Point3D(e.x/f,e.y/f,e.z/f);case"Interval_number":return new Interval(e.getMin()/f,e.getMax()/f);case"Interval_Point":return new Point(e.getMin()/f.x,e.getMax()/f.y);case"Interval_Interval":return new Point(e.getMin()+f.getMin(),e.getMax()+f.getMax());case"Point_Rectangle":return new Rectangle(e.x/f.x,e.y/f.y,f.width,f.height);case"Interval_Rectangle":return new Rectangle(e.getMin()/f.x,e.getMax()/f.y,f.width,f.height);case"Rectangle_Rectangle":return new Rectangle(e.x/f.x,e.y/f.y,e.width/f.width,e.height/f.height);case"date_number":return new Date(e.getTime()/(f/DateOperators.millisecondsToDays));case"date_date":return new Date(Number(e.getTime()+f.getTime()));case"date_DateInterval":return new DateInterval(a.division(e,f.date0),a.division(e,f.date1));case"DateInterval_number":return new DateInterval(a.division(e.date0,f),a.division(e.date1,f));case"DateInterval_Interval":return new DateInterval(a.division(e.date0,f.min),a.division(e.date1,f.max));case"DateInterval_DateInterval":return new DateInterval(a.division(e.date0,f.date0),a.division(e.date1,f.date1));default:return c.log("[!] division didn't manage to resolve:",i,e/f),null}return e/f}for(b=arguments[0],d=1;d<arguments.length;d++)b=a.division(b,arguments[d]);return b},a._applyBinaryOperatorOnLists=function(b,c,d){var e,f=Math.min(b.length,c.length),g=new List;for(e=0;f>e;e++)g.push(a._applyBinaryOperator(b[e],c[e],d));return g.getImproved()},a._applyBinaryOperatorOnListWithObject=function(b,c,d){var e,f=new List;for(e=0;e<b.length;e++)f.push(a._applyBinaryOperator(b[e],c,d));return f.getImproved()},a._applyBinaryOperatorOnObjectWithList=function(b,c,d){var e,f=new List;for(e=0;e<c.length;e++)f.push(a._applyBinaryOperator(b,c[e],d));return f.getImproved()},a._applyBinaryOperator=function(a,b,c){return c(a,b)}}),define("src/operators/strings/StringConversions",function(){"use strict";function a(){}a.stringToObject=function(a){try{return JSON.parse(a)}catch(b){return null}}}),define("src/operators/strings/StringListOperators",function(){"use strict";function a(){}a.concatStrings=function(a,b){return null==b&&(b=""),StringList.fromArray(a.join(b))},a.join=function(a,b,c,d){return null!=a?(b=null==b?"":b,c=null==c?"":c,d=null==d?"":d,c+a.join(b)+d):void 0},a.filterStringListByString=function(a,b,c,d){var e,f=d?new NumberList:new StringList;if(c)var g=new RegExp("\\b"+b+"\\b");for(e=0;null!=a[e];e++)c?a[e].match(g).length>0&&f.push(d?e:a[e]):-1!=a[e].indexOf(b)&&f.push(d?e:a[e]);return f},a.countStringsOccurrencesOnTexts=function(a,b){var c,d,e,f,g,h=new NumberTable;for(c=0;null!=a[c];c++){for(e=a[c],f=new NumberList,f.name=e,d=0;null!=b[d];d++)g=b[d].split(e),f[d]=g.length-1;h[c]=f}return h},a.getWordsOccurrencesMatrix=function(a,b,c,d,e,f,g,h,i){var j;d=d||500,e=e||1e3,f=null==f?!0:f,g=g||!1,h=h||!0,i=null==i?3:i;var k,l=StringOperators.getWordsOccurrencesTable(a[0],b,c,d,i);for(j=1;null!=a[j];j++)k=StringOperators.getWordsOccurrencesTable(a[j],b,c,d,i),l=TableOperators.mergeDataTables(l,k);if(l[0].length>e&&(h=!0),g||h){var m=new NumberList;m=l[1].clone(),l.forEach(function(a,b){2>b||a.forEach(function(a,b){m[b]+=a})}),g&&l.forEach(function(a,b){0!=b&&a.forEach(function(b,c){a[c]=b/m[c]})}),h&&(l=l.getListsSortedByList(m,!1))}return f&&l.forEach(function(a,b){0!=b&&(l[b]=l[b].getNormalizedToSum())}),e>0&&(l=l.sliceRows(0,e-1)),l},a.createTextsNetwork=function(b,d,e,f){var g,h,i=new Network,j=a.getWordsOccurrencesMatrix(b,d,!1,600,800,!1,!0,!1,3);for(b.forEach(function(a,b){node=new Node("_"+b,"_"+b),node.content=a,node.wordsWeights=j[b+1],i.addNode(node)}),g=0;null!=i.nodeList[g+1];g++)for(node=i.nodeList[g],h=g+1;null!=i.nodeList[h];h++)node1=i.nodeList[h],weight=NumberListOperators.cosineSimilarity(node.wordsWeights,node1.wordsWeights),0==g&&1==h&&(c.log(node.wordsWeights.length,node1.wordsWeights.length,weight),c.log(node.wordsWeights.type,node.wordsWeights),c.log(node1.wordsWeights.type,node1.wordsWeights),c.log(node.wordsWeights.getNorm()*node1.wordsWeights.getNorm())),weight>f&&(relation=new Relation(node.id+"_"+node1.id,node.id+"_"+node1.id,node,node1,weight),i.addRelation(relation));return i},a.createShortTextsNetwork=function(a,b,d,e,f,g){if(null!=a&&null!=a.length&&0!=a.length){var h,i,j,k,l,m,n,o=(new Date).getTime(),p=new Network,q=a.join(" *** ").toLowerCase(),r=q.split(" *** "),s=a.length,t=0;if(d=d||.2,e=e||0,g){g[0]=g[0].toLowerCase();var u,v=g[1][0]}var w;switch(e){case 0:w=function(a){return 1-Math.pow(2*a/(s-1)-1,2)};break;case 1:w=function(a){return 1/(a+1)};break;case 2:w=function(a){return 1-Math.pow(2*Math.pow(a/(s-1),.2)-1,2)};default:w=function(a){return 0==a?0:1/a}}for(c.l("A ===> StringListOperators.createShortTextsNetwork took:",(new Date).getTime()-o),o=(new Date).getTime(),a.forEach(function(a,c){for(node=new Node("_"+c,"_"+c),p.addNode(node),node.content=a,words=StringOperators.getWords(a,!0,b,!1,!1,0,3),l=words.length,m=new NumberList,i=0;null!=words[i];i++)j=words[i],nOtherTexts=0,r.forEach(function(a,b){c!=b&&(nOtherTexts+=Number(-1!=a.indexOf(j)))}),0!=nOtherTexts?(m[i]=w(nOtherTexts),f&&(m[i]*=1-1/(StringOperators.countOccurrences(r[c],j)+1)),g&&(u=g[0].indexOf(j),m[i]*=-1==u?1:1-Math.pow(g[1][u]/v,.2)),t=Math.max(t,m[i])):(words.splice(i,1),i--);k=Math.floor(3*Math.log(l+1)),words=words.getSortedByList(m,!1).slice(0,k),words.position={},words.forEach(function(a,b){words.position[a]=b}),m=m.getSorted(!1).slice(0,k),node.wordsTable=new Table,node.wordsTable[0]=words,node.wordsTable[1]=m}),c.l("B ===> StringListOperators.createShortTextsNetwork took:",(new Date).getTime()-o),o=(new Date).getTime(),h=0;null!=p.nodeList[h+1];h++)for(node=p.nodeList[h],i=h+1;null!=p.nodeList[i];i++)node1=p.nodeList[i],n=0,node.wordsTable[0].forEach(function(a,b){u=node1.wordsTable[0].position[a],null!=u&&(n+=node.wordsTable[1][b]*node1.wordsTable[1][u])}),n=Math.sqrt(n/t/Math.max(node.wordsTable[0].length,node1.wordsTable[0].length)),n>d&&(relation=new Relation(node.id+"_"+node1.id,node.id+"_"+node1.id,node,node1,n),p.addRelation(relation));return c.l("C ===> StringListOperators.createShortTextsNetwork took:",(new Date).getTime()-o),p}}}),define("src/operators/strings/StringOperators",function(){"use strict";function a(){}a.ENTER=String.fromCharCode(13),a.ENTER2=String.fromCharCode(10),a.ENTER3=String.fromCharCode(8232),a.SPACE=String.fromCharCode(32),a.SPACE2=String.fromCharCode(160),
a.TAB="	",a.TAB2=String.fromCharCode(9),a.LINK_REGEX=/(^|\s+)(https*\:\/\/\S+[^\.\s+])/,a.MAIL_REGEX=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,a.STOP_WORDS=StringList.fromArray("t,s,mt,rt,re,m,http,amp,a,able,about,across,after,all,almost,also,am,among,an,and,any,are,as,at,be,because,been,but,by,can,cannot,could,dear,did,do,does,either,else,ever,every,for,from,get,got,had,has,have,he,her,hers,him,his,how,however,i,if,in,into,is,it,its,just,least,let,like,likely,may,me,might,most,must,my,neither,no,nor,not,of,off,often,on,or,other,our,own,rather,said,say,says,she,should,since,so,some,than,that,the,their,them,then,there,these,they,this,tis,to,too,twas,us,wants,was,we,were,what,when,where,which,while,who,whom,why,will,with,would,yet,you,your".split(",")),a.split=function(b,c){return null==c?a.splitByEnter(b):StringList.fromArray(b.split(c))},a.splitByEnter=function(b){if(null==b)return null;var c=a.splitString(b,"\n");if(c.length>1)return c;var c=a.splitString(b,a.ENTER2);if(c.length>1)return c;var c=a.splitString(b,a.ENTER3);return c.length>1?c:new StringList(b)},a.replaceSubString=function(a,b,c){return null==a||null==b||null==c?null:a.replace(new RegExp(b,"g"),c)},a.replaceSubStringsByString=function(b,c,d){if(null!=c){return c.forEach(function(c){b=a.replaceSubString(b,c,d)}),b}},a.replaceSubStringsByStrings=function(b,c,d){if(null!=c&&null!=d){var e,f=Math.min(c.length,d.length);for(e=0;f>e;e++)b=a.replaceSubString(b,c[e],d[e]);return b}},a.substr=function(a,b,c){return b=b||0,a.substr(b,c)},a.splitString=function(a,b){return null==a?null:(null==b&&(b=","),"string"==typeof b&&(b=b.replace("\\n","\n")),-1==a.indexOf(b)?new StringList(a):StringList.fromArray(a.split(b)))},a.getFirstTextBetweenStrings=function(a,b,c){var d=a.indexOf(b);if(-1==d)return null;if(""==c||null==c)return a.substr(d+b.length);var e=a.indexOf(c,d+b.length+1);return-1==e?a.substring(d+b.length):a.substr(d+b.length,e-(d+b.length))},a.getAllTextsBetweenStrings=function(a,b,c){if(-1==a.indexOf(b))return new StringList;var d,e,f,g=a.split(b),h=g.length,i=new StringList;for(f=1;h>f;f++)d=g[f],c==b?i.push(d):(e=d.indexOf(c),e>=0&&i.push(d.substr(0,e)));return i},a.countWordsDichotomyAnalysis=function(b,c,d,e){var f=0;return c.forEach(function(c){f-=a.countWordOccurrences(b,c)}),d.forEach(function(c){f+=a.countWordOccurrences(b,c)}),e&&(f/=b.length),f},a.getLinksFromHtml=function(a,b,c){var d=document.createElement("html");d.innerHTML=a;var e,f,g,h,i,j,k,l=d.getElementsByTagName("a"),m=new StringList;if(b=""==b?null:b,c=null==c?!1:c,b){b=b.trim(),".html"==b.substr(-5)&&(i=b.split("/"),b=i.slice(0,i.length-1).join("/")),"/"==b.indexOf(-1)&&(b=b.substr(0,b.length-1)),i=b.split("/");var n=b.replace("//","**").split("/")[0].replace("**","//")}for(e=0;e<l.length;e++)if(f=g=l[e].getAttribute("href"),null!=g){for(-1!=g.indexOf("=")&&(g=g.split("=")[0]),b&&-1==g.indexOf("http://")&&-1==g.indexOf("https://")&&-1==g.indexOf("wwww.")&&-1==g.indexOf("file:")&&-1==g.indexOf("gopher:")&&0!=g.indexOf("//")&&(g="../../../"==g.substr(0,9)?i.slice(0,i.length-3).join("/")+"/"+g.substr(9):"../../"==g.substr(0,6)?i.slice(0,i.length-2).join("/")+"/"+g.substr(6):"../"==g.substr(0,3)?i.slice(0,i.length-1).join("/")+"/"+g.substr(3):"/"==g.charAt(0)?n+g:b+"/"+g),c&&-1!=g.indexOf("#")&&(g=g.split("#")[0]),"/"==g.substr(-1)&&(g=g.substr(0,g.length-1)),h=g.indexOf("/../");-1!=h;)k=g.split("/../"),j=k[0].replace("//","**").split("/"),g=j.slice(0,j.length-1).join("/").replace("**","//")+("/"+k.slice(1).join("/../")),h=g.indexOf("/../");-1!=g.indexOf("./")&&(j=g.replace("//","**").split("/"),"."==j[0].substr(-1)&&(j[0]=j[0].substr(0,j[0].length-1),g=j.join("/").replace("**","//"))),g=g.trim(),"/"==g.substr(-1)&&(g=g.substr(0,g.length-1)),g!=b&&m.push(g)}return m=m.getWithoutRepetitions()},a.textContainsString=function(a,b,c,d){return a=d?b:a.toLowerCase(),b=d?b:b.toLowerCase(),c?a.match(new RegExp("\\b"+b+"\\b")).length>0:-1!=a.indexOf(b)},a.logInConsole=function(a,b){b=null==b?!0:b,b&&c.log("///////////////////////////////////////////////////"),c.log(a),b&&c.log("///////////////////////////////////////////////////")},a.getParenthesisContents=function(b,c){for(var d=new StringList,e=b,f=a.getFirstParenthesisContentWithIndexes(b,c),g=0;""!=f.content&&f.index1<e.length-1&&g<b.length;)d.push(f.content),e=e.substr(f.index1+2),f=a.getFirstParenthesisContentWithIndexes(e,c),g++;return d},a.getFirstParenthesisContent=function(b,c){return a.getFirstParenthesisContentWithIndexes(b,c).content},a.getFirstParenthesisContentWithIndexes=function(a,b){var c=b?"[":"(",d=b?"]":")",e=b?/\[/g:/\(/g,f=b?/\]/g:/\)/g,g=a.indexOf(c);if(-1==g)return{content:"",index0:0,index1:0};for(var h=a.indexOf(d),i=a.substring(g+1,h),j=i.match(e),k=i.match(f),l=(null==j?0:j.length)-(null==k?0:k.length),m=0;(l>0||-1==h)&&m<a.length;)h=a.indexOf(d,h),i=a.substring(g+1,h+1),h++,j=i.match(e),k=i.match(f),l=(null==j?0:j.length)-(null==k?0:k.length),m++;return h=a.indexOf(d,h),{content:-1==h?a.substring(g+1):a.substring(g+1,h),index0:g+1,index1:-1==h?a.length-1:h-1}},a.placeString=function(a,b,c){return a.substr(0,c)+b+a.substr(c+b.length)},a.insertString=function(a,b,c){return a.substr(0,c)+b+a.substr(c)},a.removeEnters=function(a){return a.replace(/(\StringOperators.ENTER|\StringOperators.ENTER2|\StringOperators.ENTER3)/gi," ")},a.removeTabs=function(a){return a.replace(/(\StringOperators.TAB|\StringOperators.TAB2|\t)/gi,"")},a.removePunctuation=function(a,b){return b=b||"",a.replace(/[:,.;?!\(\)\"\']/gi,b)},a.removeDoubleSpaces=function(a){for(var b=a,c=RegExp(/  /);c.test(b);)b=b.replace(c," ");return b},a.removeInitialRepeatedCharacter=function(a,b){for(;a.charAt(0)==b;)a=a.substr(1);return a},a.removeHtmlTags=function(a){var b=document.createElement("DIV");return b.innerHTML=a,b.textContent||b.innerText},a.removeLinks=function(a){a+=" ";var b=/http:\/\/[a-zA-Z0-9\/\.]+( |:|;|\r|\t|\n|\v)/g;return a.replace(b," ").substr(0,a.length-2)},a.removeQuotes=function(a){return'"'==a.charAt(0)&&(a=a.substr(1)),'"'==a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),a},a.getWords=function(b,c,d,e,f,g,h){if(null==b)return null;h=h||0,c=null==c?!0:c,e=null==e?!0:e,f=null==f?!0:f,g=null==g?0:g;var i,j;if(f)var k=b.match(a.LINK_REGEX);b=b.toLowerCase().replace(a.LINK_REGEX,"");var l=b.match(/\w+/g);if(null==l)return new StringList;if(f&&null!=k&&(l=l.concat(k)),l=StringList.fromArray(l).replace(/ /g,""),null!=d)for(i=0;null!=l[i];i++)for(j=0;null!=d[j];j++)if("string"==typeof d[j]){if(d[j]==l[i]){l.splice(i,1),i--;break}}else if(d[j].test(l[i])){l.splice(i,1),i--;break}if(h>0)for(i=0;null!=l[i];i++)l[i].length<h&&(l.splice(i,1),i--);if(e){if(c)return l=ListOperators.countElementsRepetitionOnList(l,!0)[0],0!=g&&(l=l.substr(0,g)),l;var m=ListOperators.countOccurrencesOnList(l);return l=l.getSortedByList(m),0!=g&&(l=l.substr(0,g)),l}return c&&(l=l.getWithoutRepetitions()),0!=g&&(l=l.splice(0,g)),l},removeAccentsAndDiacritics=function(a){var b=a.replace(new RegExp(/[Ã Ã¡Ã¢Ã£Ã¤Ã¥]/g),"a");return b=b.replace(new RegExp(/Ã¦/g),"ae"),b=b.replace(new RegExp(/Ã§/g),"c"),b=b.replace(new RegExp(/[Ã¨Ã©ÃªÃ«]/g),"e"),b=b.replace(new RegExp(/[Ã¬Ã­Ã®Ã¯]/g),"i"),b=b.replace(new RegExp(/Ã±/g),"n"),b=b.replace(new RegExp(/[Ã²Ã³Ã´ÃµÃ¶]/g),"o"),b=b.replace(new RegExp(/Å/g),"oe"),b=b.replace(new RegExp(/[Ã¹ÃºÃ»Ã¼]/g),"u"),b=b.replace(new RegExp(/[Ã½Ã¿]/g),"y"),b=b.replace(new RegExp(/[ÃÃÃÃÃ]/g),"A"),b=b.replace(new RegExp(/Ã/g),"AE"),b=b.replace(new RegExp(/Ã/g),"c"),b=b.replace(new RegExp(/[ÃÃÃÃ]/g),"E"),b=b.replace(new RegExp(/[ÃÃÃÃ]/g),"I"),b=b.replace(new RegExp(/Ã/g),"N"),b=b.replace(new RegExp(/[ÃÃÃÃÃ]/g),"O"),b=b.replace(new RegExp(/Å/g),"OE"),b=b.replace(new RegExp(/[ÃÃÃÃ]/g),"U"),b=b.replace(new RegExp(/[Å¸]/g),"Y")},a.getWordsOccurrencesTable=function(b,c,d,e,f){if(null!=b){if(0==b.length)return new Table(new StringList,new NumberList);var g=a.getWords(b,!1,c,!1,d,e,f);return ListOperators.countElementsRepetitionOnList(g,!0,!1,e)}},a.indexesOf=function(a,b){var c=a.indexOf(b);if(-1==c)return new NumberList;var d=new NumberList(c);for(c=a.indexOf(b,c+1);-1!=c;)d.push(c),c=a.indexOf(b,c+1);return d},a.repeatString=function(a,b){var c,d="";for(c=0;b>c;c++)d+=a;return d},a.countOccurrences=function(a,b){for(var c=0,d=a.indexOf(b);-1!=d;)c++,d=a.indexOf(b,d+b.length);return c},a.countWordOccurrences=function(a,b){var c=new RegExp("\\b"+b+"\\b"),d=a.match(c);return null==d?0:d.length},a.countStringsOccurrences=function(a,b){var c,d=new NumberList;for(c=0;null!=b[c];c++)d[c]=a.split(b[c]).length-1;return d},a.validateEmail=function(b){return a.MAIL_REGEX.test(b)},a.validateUrl=function(b){return a.LINK_REGEX.test(b)}}),define("src/operators/structures/NetworkConvertions",function(){"use strict";function a(){}a.TableToNetwork=function(a,b,c,d,e,f){if(null!=a&&a.isTable&&null!=a[0]&&null!=a[1]){if(null==d&&(d=!1),a.length<2)return null;var g=new Network;if(null==b)var h=Math.min(a[0].length,a[1].length);else h=Math.min(a[0].length,a[1].length,b.length);null==b&&a.length>2&&typeOf(a[2])==NumberList&&a[2].length>=h&&(b=a[2]),typeOf(a[0])==NodeList&&typeOf(a[1])==NodeList;var i,j,k,l,m,n;for(n=0;h>n;n++)k=""+a[0][n],l=""+a[1][n],i=g.nodeList.getNodeById(k),null==i?(i=new Node(k,k),g.addNode(i)):i.weight++,j=g.nodeList.getNodeById(l),null==j?(j=new Node(l,l),g.addNode(j)):j.weight++,null==b?(m=g.relationList.getFirstRelationByIds(i.id,j.id,!1),null==m||d?(m=new Relation(k+"_"+l+g.relationList.length,k+"_"+l,i,j,1),g.addRelation(m)):m.weight++):b[n]>c&&(m=new Relation(k+"_"+l,k+"_"+l,i,j,b[n]),g.addRelation(m)),f&&(m.content=f[n]);if(e)for(n=0;null!=g.nodeList[n];n++)g.nodeList[n].relationList.length<e&&(g.removeNode(g.nodeList[n]),n--);return g}}}),define("src/operators/structures/NetworkEncodings",function(){"use strict";function a(){}a.nodeNameSeparators=["|",":"," is "," are ",".",","],a.decodeNoteWork=function(b){if(null!=b){if(""==b)return new Network;c.l("\n\n*************////////// decodeNoteWork //////////*************");var d,e,f,g,h,i,j,k,l,m,n,o,p,q,g,r,s,t,u,v=[],w=[],x=[],y=new Network,z=new StringList;y.nodesPropertiesNames=new StringList,y.relationsPropertiesNames=new StringList,m=b.split(/\n/g),m.forEach(function(a,b){m[b]=a.trim()}),b=m.join("\n");for(var A=0;"\n"==b.charAt(0);)b=b.substr(1),A++;var B=b;for(k=B.search(/\n\n./g);-1!=k;)z.push(B.substr(0,k)),B=B.substr(k+2),k=B.search(/\n\n./g);z.push(B);var C;z.forEach(function(b,c){if(-1==b.indexOf("\n")?(f=b,m=null):(m=b.split(/\n/g),f=m[0]),C=f,"\n"==f||""==f||" "==f||"  "==f);else if(0==f.indexOf("//"))null==x[A]&&(x[A]=[]),x[A].push({type:"comment",iStart:0,iEnd:f.length});else if("relations colors:"==f||"groups colors:"==f||"categories colors:"==f)m&&m.slice(1).forEach(function(a,b){k=a.indexOf(":"),"relations colors:"==C&&-1!=k&&null!=ColorOperators.colorStringToRGB(a.split(":")[1])&&(v.push(a),null==x[A+b]&&(x[A+b]=[]),x[A+b].push({type:"relation_color",iStart:0,iEnd:a.length})),"groups colors:"!=C&&"categories colors:"!=C||-1==k||null==ColorOperators.colorStringToRGB(a.split(":")[1])||(w.push(a),null==x[A+b]&&(x[A+b]=[]),x[A+b].push({type:"relation_color",iStart:0,iEnd:a.length}))});else{for(l=99999999,k=f.indexOf(a.nodeNameSeparators[0]),-1!=k&&(l=k,q=a.nodeNameSeparators[0]),e=1;e<a.nodeNameSeparators.length;)k=f.indexOf(a.nodeNameSeparators[e]),-1!=k&&(l=Math.min(k,l),q=a.nodeNameSeparators[e]),e++;k=99999999==l?-1:l,j=-1==k?f:f.substr(0,k),j=j.trim(),""!=j&&(h=a._simplifyForNoteWork(j),n=y.nodeList.getNodeById(h),r=-1==k?f.length:k,null==n?(n=new Node(h,j),n._nLine=A,y.addNode(n),n.content=-1!=k?f.substr(k+q.length).trim():"",n._lines=m?m.slice(1):new StringList,n.position=y.nodeList.length-1,null==x[A]&&(x[A]=[]),x[A].push({type:"node_name",iStart:0,iEnd:r})):(null!=m&&(n._lines=n._lines.concat(m.slice(1))),n.content+=-1!=k?" |Â "+f.substr(k+q.length).trim():"",null==x[A]&&(x[A]=[]),x[A].push({type:"node_name_repeated",iStart:0,iEnd:r})))}A+=(m?m.length:1)+1});for(var D=!0;D;){D=!1;a:for(d=0;null!=y.nodeList[d];d++){n=y.nodeList[d];b:for(e=0;null!=n._lines[e];e++)if(f=n._lines[e],0==f.indexOf("=")){if(i=a._simplifyForNoteWork(f.substr(1)),o=y.nodeList.getNodeById(i),o&&n!=o){D=!0,n._lines=o._lines.concat(o._lines),y.nodeList.removeNode(o),y.nodeList.ids[o.id]=n;break a}y.nodeList.ids[i]=o,n._otherIds||(n._otherIds=[]),n._otherIds.push(i)}}}return y.nodeList.forEach(function(b){A=b._nLine,b._lines.forEach(function(c,d){-1!=c.indexOf("=")||(c.indexOf(":")>0?(g=c.trim(),s=removeAccentsAndDiacritics(g.split(":")[0]).replace(/\s/g,"_"),t=c.split(":")[1].trim(),t==String(Number(t))&&(t=Number(t)),null!=t&&(b[s]=t,-1==y.nodesPropertiesNames.indexOf(s)&&y.nodesPropertiesNames.push(s))):(g=c,y.nodeList.forEach(function(f){if(j=a._regexWordForNoteWork(f.id),k=g.search(j),-1==k&&f._otherIds)for(e=0;null!=f._otherIds[e]&&(j=a._regexWordForNoteWork(f._otherIds[e]),k=g.search(j),-1==k);e++);if(-1!=k)if(r=k+g.substr(k).match(j)[0].length,p=y.relationList.getFirstRelationBetweenNodes(b,f,!0),null!=p)u=p.node0.name+" "+c,p.content+=" | "+u,null==x[A+d+1]&&(x[A+d+1]=[]),x[A+d+1].push({type:"node_name_in_repeated_relation",iStart:k,iEnd:r});else if(p=y.relationList.getFirstRelationBetweenNodes(f,b,!0),null==p||p.content!=u){var i=c,j=a._regexWordForNoteWork(b.id);k=i.search(j),-1!=k&&(i=i.substr(k),i=i.replace(j,"").trim()),j=a._regexWordForNoteWork(f.id),k=i.search(j),i="â¦ "+i.substr(0,k).trim()+" â¦",h=c,p=new Relation(c,i,b,f),u=p.node0.name+" "+c,p.content=u,y.addRelation(p),null==x[A+d+1]&&(x[A+d+1]=[]),x[A+d+1].push({type:"node_name_in_relation",iStart:k,iEnd:r})}})))}),b.positionWeight=Math.pow(y.nodeList.length-b.position-1/y.nodeList.length,2),b.combinedWeight=b.positionWeight+.1*b.nodeList.length}),v.forEach(function(a){k=a.indexOf(":"),texts=a.substr(0,k).split(","),texts.forEach(function(b){color=a.substr(k+1),y.relationList.forEach(function(a){-1!=a.name.indexOf(b)&&(a.color=color)})})}),w.forEach(function(a){k=a.indexOf(":"),texts=a.substr(0,k).split(","),texts.forEach(function(b){color=a.substr(k+1),y.nodeList.forEach(function(a){a.group==b&&(a.color=color),a.category==b&&(a.color=color)})})}),y.colorSegments=x,y}},a._simplifyForNoteWork=function(a){return a=a.toLowerCase(),"es"==a.substr(a.length-2)?a=a.substr(0,a.length-1):"s"==a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),a.trim()},a._regexWordForNoteWork=function(a,b){b=null==b?!0:b;try{return new RegExp("(\\b)("+a+"|"+a+"s|"+a+"es)(\\b)",b?"gi":"i")}catch(c){return null}},a.encodeNoteWork=function(b,c,d,e){if(null!=b){var f,g,h,i="";return c=c||", ",d=d||[],e=e||[],b.nodeList.forEach(function(b){i+=b.name,b.content&&""!=b.content&&(i+=c+b.content),i+="\n",d.forEach(function(a){null!=b[a]&&(i+=a+":"+String(b[a])+"\n")}),h=new StringList,b.toRelationList.forEach(function(b){content=null!=b.content&&""!=b.content||!b.description?b.content:b.description,content&&""!=content?(f=a._regexWordForNoteWork(b.node1.name),g=content+(null!=f&&-1==content.search(f)?" "+b.node1.name:"")):g="connected with "+b.node1.name,-1==h.indexOf(g)&&(i+=g,i+="\n",h.push(g))}),i+="\n"}),i}},a.decodeGDF=function(b){if(null!=b&&""!=b){var d=new Network,e=b.split("\n");if(0==e.length)return null;var f,g,h,i,j,k=e[0].substr(8).split(",");for(g=1;null!=e[g];g++){if(f=e[g],"edgedef>"==f.substr(0,8)){j=g+1;break}for(f=a.replaceChomasInLine(f),i=f.split(","),node=new Node(String(i[0]),String(i[1])),h=0;null!=k[h]&&null!=i[h];h++)"weight"==k[h]?node.weight=Number(i[h]):"x"==k[h]?node.x=Number(i[h]):"y"==k[h]?node.y=Number(i[h]):node[k[h]]=i[h].replace(/\*CHOMA\*/g,",");d.addNode(node)}var l=e[j-1].substr(8).split(",");for(g=j;null!=e[g];g++)if(f=e[g],f=a.replaceChomasInLine(f),i=f.split(","),i.length>=2)if(node0=d.nodeList.getNodeById(String(i[0])),node1=d.nodeList.getNodeById(String(i[1])),null==node0||null==node1)c.log("NetworkEncodings.decodeGDF | [!] problems with nodes ids:",i[0],i[1],"at line",g);else{for(id=node0.id+"_"+node1.id+"_"+Math.floor(999999*Math.random()),relation=new Relation(id,id,node0,node1),h=2;null!=l[h]&&null!=i[h];h++)"weight"==l[h]?relation.weight=Number(i[h]):relation[l[h]]=i[h].replace(/\*CHOMA\*/g,",");d.addRelation(relation)}return d}},a.encodeGDF=function(a,b,c){if(null!=a){b=null==b?new StringList:b,c=null==c?new StringList:c;var d,e,f,g="nodedef>id"+(b.length>0?",":"")+b.join(",");for(d=0;null!=a.nodeList[d];d++)for(f=a.nodeList[d],g+="\n"+f.id,e=0;null!=b[e];e++)g+="string"==typeof f[b[e]]?',"'+f[b[e]]+'"':","+f[b[e]];g+="\nedgedef>id0,id1"+(c.length>0?",":"")+c.join(",");var h;for(d=0;null!=a.relationList[d];d++)for(h=a.relationList[d],g+="\n"+h.node0.id+","+h.node1.id,e=0;null!=c[e];e++)g+="string"==typeof h[c[e]]?',"'+h[c[e]]+'"':","+h[c[e]];return g}},a.decodeGML=function(b){if(null==b)return null;b=b.substr(b.indexOf("[")+1);for(var c,d,e,f,g,h,i=new Network,j=b.search(/\bedge\b/),k=b.substr(0,j),l=b.substr(j),m=k,n=StringOperators.getParenthesisContents(m,!0),o=0;null!=n[o];o++){n[o]=StringOperators.removeInitialRepeatedCharacter(n[o],"\n"),n[o]=StringOperators.removeInitialRepeatedCharacter(n[o],"\r"),f=n[o].indexOf("graphics"),-1!=f&&(g=n[o].indexOf("]"),c=n[o].substring(f,g+1),n[o]=n[o].substr(0,f)+n[o].substr(g+1),c=StringOperators.getFirstParenthesisContent(c,!0),n[o]=n[o]+c),d=n[o].split("\n"),d[0]=a._cleanLineBeginning(d[0]),e=d[0].split(" "),h=new Node(StringOperators.removeQuotes(e[1]),StringOperators.removeQuotes(e[1])),i.addNode(h);for(var p=1;null!=d[p];p++)d[p]=a._cleanLineBeginning(d[p]),d[p]=a._replaceSpacesInLine(d[p]),""!=d[p]&&(e=d[p].split(" "),"label"==e[0]&&(e[0]="name"),h[e[0]]='"'==e[1].charAt(0)?StringOperators.removeQuotes(e[1]).replace(/\*SPACE\*/g," "):Number(e[1]))}m=l,n=StringOperators.getParenthesisContents(m,!0);var q,r,s,t,u,v=i.nodeList;for(o=0;null!=n[o];o++)for(n[o]=StringOperators.removeInitialRepeatedCharacter(n[o],"\n"),n[o]=StringOperators.removeInitialRepeatedCharacter(n[o],"\r"),d=n[o].split("\n"),q=null,r=null,u=null,p=0;null!=d[p];p++)d[p]=a._cleanLineBeginning(d[p]),""!=d[p]&&(e=d[p].split(" "),"source"==e[0]&&(q=StringOperators.removeQuotes(e[1])),"target"==e[0]&&(r=StringOperators.removeQuotes(e[1])),null==u?null!=q&&null!=r&&(s=v.getNodeById(q),t=v.getNodeById(r),null!=s&&null!=t&&(u=new Relation(q+" "+r,"",s,t),i.addRelation(u))):("value"==e[0]&&(e[0]="weight"),u[e[0]]='"'==e[1].charAt(0)?StringOperators.removeQuotes(e[1]):Number(e[1])));return i},a._cleanLineBeginning=function(a){return a=StringOperators.removeInitialRepeatedCharacter(a,"\n"),a=StringOperators.removeInitialRepeatedCharacter(a,"\r"),a=StringOperators.removeInitialRepeatedCharacter(a," "),a=StringOperators.removeInitialRepeatedCharacter(a,"	")},a.encodeGML=function(a,b,c,d){if(null!=a){d=null==d?!0:d,b=null==b?new StringList:b,c=null==c?new StringList:c;var e,f,g,h,i,j="graph\n[",k="	";for(e=0;null!=a.nodeList[e];e++){for(g=a.nodeList[e],j+="\n"+k+"node\n"+k+"[",k="		",j+=d?"\n"+k+"id "+e:"\n"+k+'id "'+g.id+'"',""!=g.name&&(j+="\n"+k+'label "'+g.name+'"'),f=0;null!=b[f];f++)i=g[b[f]],null!=i&&(i.getMonth&&(i=DateOperators.dateToString(i)),h="string"==typeof i,h&&(i=i.replace(/\n/g,"\\n").replace(/\"/g,"'")),j+="\n"+k+b[f]+" "+(h?'"'+i+'"':i));k="	",j+="\n"+k+"]"}var l;for(e=0;null!=a.relationList[e];e++){for(l=a.relationList[e],j+="\n"+k+"edge\n"+k+"[",k="		",d?(j+="\n"+k+"source "+a.nodeList.indexOf(l.node0),j+="\n"+k+"target "+a.nodeList.indexOf(l.node1)):(j+="\n"+k+'source "'+l.node0.id+'"',j+="\n"+k+'target "'+l.node1.id+'"'),f=0;null!=c[f];f++)i=l[c[f]],null!=i&&(i.getMonth&&(i=DateOperators.dateToString(i)),h="string"==typeof i,h&&(i=i.replace(/\n/g,"\\n").replace(/\"|â|â/g,"'")),j+="\n"+k+c[f]+" "+(h?'"'+i+'"':i));k="	",j+="\n"+k+"]"}return j+="\n]"}},a.decodeSYM=function(a){var b,d,e=StringOperators.splitByEnter(a);e=null==e?[]:e;var f,g,h,i,j,k,l,m,n,o,p=/((?:NODE|RELATION)|GROUP)\s*([A-Za-z0-9_,\s]*)/,q=new Network,r=new Table,s=[],t=[],u=[];for(b=0;null!=e[b];b++){var v=p.exec(e[b]);if(null!=v)switch(v[1]){case"NODE":for(g=v[2],f="name:"==e[b+1].substr(0,5)?e[b+1].substr(5).trim():"",f=f.replace(/\\n/g,"\n").replace(/\\'/g,"'"),h=new Node(g,f),q.addNode(h),d=b+1;d<e.length&&-1!=e[d].indexOf(":");)m=e[d].split(":"),n=m[0],o=m.slice(1).join(":"),"name"!=n&&(o=o.trim(),h[n]=String(Number(o))==o?Number(o):o,"string"==typeof h[n]&&(h[n]=h[n].replace(/\\n/g,"\n").replace(/\\'/g,"'")),-1==s.indexOf(n)&&s.push(n)),d++;null!=h.color&&/.+,.+,.+/.test(h.color)&&(h.color="rgb("+h.color+")"),null!=h.group&&(k=r.getFirstElementByPropertyValue("name",h.group),null==k&&(c.log("NODES new group:["+h.group+"]"),k=new NodeList,k.name=h.group,k.name=k.name.replace(/\\n/g,"\n").replace(/\\'/g,"'"),r.push(k)),k.addNode(h));break;case"RELATION":var w=v[2].replace(/\s/g,"").split(",");if(h=q.nodeList.getNodeById(w[0]),i=q.nodeList.getNodeById(w[1]),null!=h&&null!=i)for(j=new Relation(h.id+"_"+i.id,h.id+"_"+i.id,h,i),q.addRelation(j),d=b+1;d<e.length&&-1!=e[d].indexOf(":");)m=e[d].split(":"),n=m[0],o=m.slice(1).join(":").trim(),"name"!=n&&(o=o.trim(),j[n]=String(Number(o))==o?Number(o):o,"string"==typeof j[n]&&(j[n]=j[n].replace(/\\n/g,"\n").replace(/\\'/g,"'")),-1==t.indexOf(n)&&t.push(n)),d++;null!=j&&null!=j.color&&(j.color="rgb("+j.color+")");break;case"GROUP":for(l=e[b].substr(5).trim(),k=r.getFirstElementByPropertyValue("name",l),null==k&&(k=new NodeList,k.name=l,r.push(k)),d=b+1;d<e.length&&-1!=e[d].indexOf(":");)m=e[d].split(":"),"name"!=m[0]&&(m[1]=m[1].trim(),k[m[0]]=String(Number(m[1]))==m[1]?Number(m[1]):m[1],-1==u.indexOf(m[0])&&u.push(m[0])),d++;/.+,.+,.+/.test(k.color)&&(k.color="rgb("+k.color+")")}}for(b=0;null!=r[b];b++)for(k=r[b],null==k.color&&(k.color=CATEGORICAL_COLORS[b%CATEGORICAL_COLORS.length]),d=0;null!=k[d];d++)h=k[d],null==h.color&&(h.color=k.color);return q.groups=r,q.nodePropertiesNames=s,q.relationPropertiesNames=t,q.groupsPropertiesNames=u,q},a.encodeSYM=function(a,b,c,d,e){c=null==c?new StringList:c,d=null==d?new StringList:d;var f,g,h,i,j="";for(f=0;null!=a.nodeList[f];f++)for(h=a.nodeList[f],j+=(0==f?"":"\n\n")+"NODE "+h.id,""!=h.name&&(j+="\nname:"+h.name.replace(/\n/g,"\\n")),g=0;null!=c[g];g++)i=c[g],null!=h[i]&&(j+="\n"+i+":"+_processProperty(i,h[i]));var k;for(f=0;null!=a.relationList[f];f++)for(k=a.relationList[f],j+="\n\nRELATION "+k.node0.id+", "+k.node1.id,g=0;null!=d[g];g++)i=d[g],null!=k[i]&&(j+="\n"+i+":"+_processProperty(i,k[i]));if(null==b)return j;var l;for(f=0;null!=b[f];f++)for(l=b[f],j+="\n\nGROUP "+l.name,g=0;null!=e[g];g++)i=e[g],null!=l[i]&&(j+="\n"+i+":"+_processProperty(i,l[i]));return j},_processProperty=function(a,b){switch(a){case"color":if("rgb"==b.substr(0,3)){var c=ColorOperators.colorStringToRGB(b);return c.join(",")}return b}return b=String(b).replace(/\n/g,"\\n")},a.replaceChomasInLine=function(a){var b=a.split('"');if(b.length<2)return a;var c,d;for(d=0;null!=b[d];d++)c=.5*d!=Math.floor(.5*d),c&&(b[d]=b[d].replace(/,/g,"*CHOMA*"));return a=StringList.fromArray(b).getConcatenated("")},a._replaceSpacesInLine=function(a){var b=a.split('"');if(b.length<2)return a;var c,d;for(d=0;null!=b[d];d++)c=.5*d!=Math.floor(.5*d),c&&(b[d]=b[d].replace(/ /g,"*SPACE*"));return a=StringList.fromArray(b).getConcatenated('"')}}),define("src/operators/structures/NetworkGenerators",function(){"use strict";function a(){}a.createRandomNetwork=function(a,b,c,d){if(null==a||null==b)return null;c=null==c?0:c;var e,f,g,h=new Network;for(e=0;a>e;e++)h.addNode(new Node("n"+e,"n"+e));switch(c){case 0:for(e=0;a-1>e;e++)for(g=h.nodeList[e],f=e+1;a>f;f++)Math.random()<b&&h.addRelation(new Relation(e+"_"+f,e+"_"+f,g,h.nodeList[f],d?Math.random():1));return h;case 1:var i,j,k,l=a*(a-1)*.5,m=0;for(e=0;l>e;e++)if(Math.random()<b)for(i=!0;i;)if(g=h.nodeList[Math.floor(h.nodeList.length*Math.random())],Math.random()<(g.nodeList.length+1)/(m+1))for(;i;)j=h.nodeList[Math.floor(h.nodeList.length*Math.random())],k=g.id+"_"+j.id,null==h.relationList.getNodeById(k)&&null==h.relationList.getNodeById(j.id+"_"+g.id)&&Math.random()<(j.nodeList.length+1)/(m+1)&&(h.addRelation(new Relation(k,k,g,j,d?Math.random():1)),i=!1);return h}},a.createTextsCoOccurrencesNetwork=function(b,c,d,e){var f=StringListOperators.countStringsOccurrencesOnTexts(b,c,d,e);return a.createNetworkFromOccurrencesTable(f)},a.createNetworkFromOccurrencesTable=function(a,b,c){b=null==b?0:b,c=null==c?0:c;var d,e,f,g,h,i,j,k,l,m=new Network;for(d=0;null!=a[d];d++)for(f=a[d].name,0==d?(i=new Node(f,f),m.addNode(i)):i=m.nodeList[d],k=a[d].getSum(),i.weight=k,e=d+1;null!=a[e];e++){switch(g=a[e].name,0==d?(j=new Node(g,g),m.addNode(j)):j=m.nodeList[e],l=a[e].getSum(),j.weight=l,b){case 0:h=a[d].dotProduct(a[e]);break;case 1:h=NumberListOperators.cosinus(a[d],a[e])}h>c&&m.createRelation(i,j,f+"_"+g,h)}return m},a.createNetworkFromListAndFunction=function(a,b,c){for(var d,e,f,g,h=new Network,d=0;null!=a[d+1];d++){0==d&&h.addNode(new Node("n_0",null==c?"n_0":c[d])),g=h.nodeList[d];for(var e=d+1;null!=a[e];e++)0==d&&h.addNode(new Node("n_"+e,null==c?"n_"+e:c[e])),f=b(a[d],a[e]),f>0&&h.addRelation(new Relation(d+"_"+e,d+"_"+e,g,h.nodeList[e],f))}return h},a.createNetworkFromTextAndWords=function(a,b,c){if(null==a||null==b)return null;c=null==c?"\\.|\\n":c;var d=new Network;b=b.getWithoutElements(new StringList(""," ","\n")),b.forEach(function(a){a=NetworkEncodings._simplifyForNoteWork(a),a&&b.push(a)}),b=b.getWithoutRepetitions();var e,f,g,h,i,j,k,l,m,n,o=a.split(new RegExp(c,"g"));return b.forEach(function(b){e=new Node(b,b),d.addNode(e),k=a.match(NetworkEncodings._regexWordForNoteWork(b)),e.weight=null==k?1:k.length}),o.forEach(function(a){a=a.trim(),l=new NodeList,m=0,b.forEach(function(b){h=d.nodeList.getNodeById(b),i=NetworkEncodings._regexWordForNoteWork(b),g=a.search(i),-1!=g&&(n=h.weight>m?h:n,m=Math.max(h.weight,m),h!=n&&l.push(h))}),l.forEach(function(b){j=n.id+"_"+b.id+"|"+a,f=new Relation(j,j,n,b),f.content=a,d.addRelation(f)})}),d.nodeList.forEach(function(a){i=NetworkEncodings._regexWordForNoteWork(a.id),d.nodeList.forEach(function(b){a!=b&&-1!=b.id.search(i)&&(j=b.id+"_"+a.id+"|contains "+a.id,f=new Relation(j,j,b,a),f.content="contains "+a.id,d.addRelation(f))})}),d}}),define("src/operators/structures/NetworkOperators",function(){"use strict";NetworkOperators=function(){},NetworkOperators.filterNodesByMinDegree=function(a,b){var c;for(c=0;null!=a.nodeList[c];c++)a.nodeList[c].nodeList.length<b&&(a.removeNode(a.nodeList[c]),c--);return null},NetworkOperators.degreeBetweenNodes=function(a,b,c){if(null==a||null==b||null==c)return null;if(b==c)return 0;for(var d,e,f=b.nodeList,g=1;null==f.getNodeById(c.id);){for(d=f.clone(),e=0;null!=f[e];e++)d=ListOperators.concat(d,f[e].nodeList);if(d=d.getWithoutRepetitions(),f.length==d.length)return-1;f=d,g++}return g},NetworkOperators.shortestPath=function(a,b,c,d){if(null==a||null==b||null==c)return null;var e=NetworkOperators.spanningTree(a,b,c),f=new NodeList;d&&f.addNode(c);var g=e.nodeList.getNodeById(c.id);if(null==g)return null;for(;g.parent.id!=b.id;)if(f.addNode(g.parent.node),g=g.parent,null==g)return null;return d&&f.addNode(b),f.getReversed()},NetworkOperators.shortestPaths=function(a,b,d,e){if(null==a||null==b||null==d)return null;null==e&&(e=NetworkOperators.shortestPath(a,b,d,!0));var f,g=e.length,h=new Table,i=new NodeList;i.addNode(b),h.push(i);var j=NetworkOperators._extendPaths(h,d,g);for(c.l("1. all.length",j.length),f=0;null!=j[f];f++)j[f][j[f].length-1]!=d&&(j.splice(f,1),f--);return c.l("2. all.length",j.length),j},NetworkOperators._extendPaths=function(a,b,c){if(a[0].length>=c)return a;var d,e,f,g,h,i,j=new Table;for(d=0;null!=a[d];d++)for(h=a[d],g=h[h.length-1],f=g.nodeList.getWithoutRepetitions(),e=0;null!=f[e];e++)null==h.getNodeById(f[e].id)&&(i=h.clone(),i.addNode(f[e]),j.push(i));return a=j,NetworkOperators._extendPaths(a,b,c)},NetworkOperators.loops=function(a,b){if(null==a)return null;var d,e,f,g;for(allLoops=new Table,d=0;null!=a.nodeList[d];d++){for(g=NetworkOperators._getLoopsOnNode(a.nodeList[d]),f=0;null!=allLoops[f];f++)for(e=0;null!=g[e];e++)NetworkOperators._sameLoop(g[e],allLoops[f])&&(g.splice(e,1),e--);allLoops=allLoops.concat(g)}b&&(allLoops=allLoops.getFilteredByPropertyValue("length",b,"greater")),allLoops.sort(function(a,b){return a.length>b.length?-1:1}),allLoops.forEach(function(a){c.l(a.getIds().join("-"))});NetworkOperators._sameLoop(allLoops[0],allLoops[1]);return allLoops},NetworkOperators._sameLoop=function(a,b){if(a.length!=b.length)return!1;if(null==b.getNodeById(a[0].id))return!1;for(var c=b.indexOf(a[0]),d=a.length,e=1;null!=a[e];e++)if(a[e]!=b[(e+c)%d])return!1;return!0},NetworkOperators._getLoopsOnNode=function(a){if(0==a.toNodeList.length||0==a.fromNodeList.length)return[];var b,c,d,e=new Table,f=new NodeList;for(f.addNode(a),e.push(f),NetworkOperators._loopsColumns(a.toNodeList,1,e,1),b=1;e[b];b++)for(c=1;null!=e[c];c++)for(d=0;null!=e[c][d];d++)node=e[c][d],delete node.onColumn,0==node.toNodeList.length&&(e[c].removeNodeAtIndex(d),d--);var g,h=new Table;for(c=1;null!=e[c];c++)for(d=0;null!=e[c][d];d++)node=e[c][d],null!=node.toNodeList.getNodeById(a.id)&&(g=new NodeList(node),h.push(g),NetworkOperators._pathsToCentral(e,c,g,h));return h.sort(function(a,b){return a.length>b.length?-1:1}),h},NetworkOperators._pathsToCentral=function(a,b,c,d){if(!c.finished){if(0==b)return void(c.finished=!0);var e,f,g,h,i=c[0],j=!0,k=a[b-1].clone();k.addNodes(a[b]);var l=a[b-1].length;for(e=0;null!=k[e];e++)f=k[e],i==f||null!=c.getNodeById(f.id)||null!=g&&null!=g.getNodeById(f.id)||null!=f.toNodeList.getNodeById(i.id)&&(j?(g=c.clone(),c.unshift(f),c.ids[f.id]=f,NetworkOperators._pathsToCentral(a,l>e?b-1:b,c,d),j=!1):(h=g.clone(),d.push(h),h.unshift(f),h.ids[f.id]=f,NetworkOperators._pathsToCentral(a,l>e?b-1:b,h,d)))}},NetworkOperators._loopsColumns=function(a,b,c){null==c[b]&&(c[b]=new NodeList);for(var d,e=new NodeList,f=0;null!=a[f];f++)d=a[f],d.onColumn||(d.onColumn=!0,c[b].addNode(d),e.addNodes(d.toNodeList));for(e=e.getWithoutRepetitions(),f=0;null!=e[f];f++)e[f].onColumn&&(e.removeNodeAtIndex(f),f--);e.length>0&&NetworkOperators._loopsColumns(e,b+1,c)},NetworkOperators.spanningTree=function(a,b,c){var d=new Tree,e=new Node(b.id,b.name);e.node=b,d.addNodeToTree(e);var f,g,h,i,k,l=b.nodeList,m=!1;for(i=0;null!=l[i];i++)g=new Node(l[i].id,l[i].name),g.id!=e.id&&(g.node=l[i],d.addNodeToTree(g,e),null!=c&&g.id==c.id&&(m=!0));if(m)return d;var n=l.clone();for(n.addNode(b);;){for(f=new NodeList,i=0;null!=l[i];i++)f.addNodes(l[i].nodeList);if(f=f.getWithoutRepetitions(),f.removeElements(n),0==f.length)return d;for(i=0;null!=f[i];i++){for(g=new Node(f[i].id,f[i].name),g.node=f[i],j=0;null!=f[i].nodeList[j];j++)if(k=f[i].nodeList[j].id,h=l.getNodeById(k),null!=h&&g.id!=k){d.addNodeToTree(g,d.nodeList.getNodeById(k));break}null!=c&&g.id==c.id&&(m=!0)}m&&(m=!0),l=f,n=n.concat(f)}return d},NetworkOperators.degreesPartition=function(a,b){var c,d,e,f,g=new NodeList(b),h=nodes=b.nodeList,i=new Table(g),j=h.length>0;j&&i.push(h);var k=h.clone();for(k.push(b);j;){for(d=new NodeList,e=0;null!=h[e];e++)for(c=h[e].nodeList,f=0;null!=c[f];f++)-1==k.indexOf(c[f])&&(d.push(c[f]),k.push(c[f]));j=d.length>0,j&&(h=d,i.push(h))}return i},NetworkOperators.degreesFromNodeToNodes=function(a,b,c){var d=NetworkOperators.degreesPartition(a,b),e=new NumberList;e.max=0;for(var f,g=0;null!=c[g];g++){if(c[g]==b)e[g]=0;else for(f=1;null!=d[f];f++)if(-1!=d[f].indexOf(c[g])){e[g]=f,e.max=Math.max(e.max,f);break}null==e[g]&&(e[g]=-1)}return e},NetworkOperators.buildDendrogram=function(a){if(null==a)return null;var b,c,d,e,f,g,h=((new Date).getTime(),new Tree),i=new NodeList,j=a.nodeList.length,k=2*a.relationList.length/(j*(j-1));for(g=0;null!=a.nodeList[g];g++)e=new Node("["+a.nodeList[g].id+"]","["+a.nodeList[g].id+"]"),e.nodes=new NodeList(a.nodeList[g]),h.addNode(e),i[g]=e;for(;i.length>1;){for(b=NetworkOperators._getClosestPair(i,!0,k),c=i[b[0]],d=i[b[1]],f="["+c.id+"-"+d.id+"]",e=new Node(f,f),e.weight=b.strength,h.addNode(e),h.createRelation(e,c,f+"-"+c.id),h.createRelation(e,d,f+"-"+d.id),
e.node=new Node(f,f),e.nodes=c.nodes.concat(d.nodes),g=0;null!=c.nodeList[g];g++)e.node.nodeList.addNode(c.nodeList[g]),e.node.relationList.addRelation(c.relationList[g]);for(g=0;null!=d.nodeList[g];g++)e.node.nodeList.addNode(d.nodeList[g]),e.node.relationList.addRelation(d.relationList[g]),Network;i.removeElement(c),i.removeElement(d),i.addNode(e)}for(g=0;null!=h.nodeList[g];g++)c=h.nodeList[g],c.nodes.length>1&&(c.level=Math.max(c.nodeList[0].level,c.nodeList[1].level)+1);return h},NetworkOperators._getClosestPair=function(a,b,c){if(2==a.length){var d=a[0].nodeList.indexOf(a[1]);if(b){var e=[0,1];return e.strength=-1==d?0:a[0].relationList[d].weight,e}var f=new NodeList(a[0],a[1]);return f.strength=-1==d?0:a[0].relationList[d].weight,f}var g,h,i,j,e,k=-1;for(g=0;null!=a[g+1];g++)for(i=a[g].nodes,h=g+1;null!=a[h];h++)j=NetworkOperators._strengthBetweenSets(i,a[h].nodes,c),j>k&&(e=[g,h],k=j);if(e.strength=k,b)return e;var f=new NodeList(a[e[0]],a[e[1]]);return f.strength=k,f},NetworkOperators._strengthBetweenSets=function(a,b,c){var d,e,f,g=0;for(d=0;null!=a[d];d++)for(f=a[d],e=0;null!=f.nodeList[e];e++)-1!=b.indexOf(f.nodeList[e])&&(g+=f.relationList[e].weight);return g/(a.length*b.length*c)},NetworkOperators.buildNetworkClusters=function(a,b,c){if(null!=a){null==b&&(b=NetworkOperators.buildDendrogram(a)),c=c||.5;var d=new Table;return NetworkOperators._iterativeBuildClusters(b.nodeList[b.nodeList.length-1],d,c),d}},NetworkOperators._iterativeBuildClusters=function(a,b,c){return 1==a.nodeList.length?void b.push(new NodeList(a.node)):(1==a.nodeList[0].nodes.length||a.nodeList[0].weight>c?b.push(a.nodeList[0].nodes):NetworkOperators._iterativeBuildClusters(a.nodeList[0],b,c),void(1==a.nodeList[1].nodes.length||a.nodeList[1].weight>c?b.push(a.nodeList[1].nodes):NetworkOperators._iterativeBuildClusters(a.nodeList[1],b,c)))},NetworkOperators.addPageRankToNodes=function(a,b,c){b=null==b?!0:b;var d,e,f,g,h,i,j=.85,k=a.nodeList.length,l=(1-j)/k,m=b?"fromPageRank":"toPageRank";for(a.minFromPageRank=a.minToPageRank=99999999,a.maxFromPageRank=a.maxToPageRank=-99999999,e=0;null!=a.nodeList[e];e++)g=a.nodeList[e],g[m]=1/k;for(d=0;300>d;d++)for(e=0;null!=a.nodeList[e];e++){for(g=a.nodeList[e],i=b?g.fromNodeList:g.toNodeList,g[m]=l,f=0;null!=i[f];f++)h=i[f],g[m]+=j*h[m]/(b?h.toNodeList.length:h.fromNodeList.length);299==d&&(b?(a.minFromPageRank=Math.min(a.minFromPageRank,g[m]),a.maxFromPageRank=Math.max(a.maxFromPageRank,g[m])):(a.minToPageRank=Math.min(a.minToPageRank,g[m]),a.maxToPageRank=Math.max(a.maxToPageRank,g[m])))}},NetworkOperators.fusionNoteworks=function(a,b,c){return networks=new List,a.forEach(function(a,b){subfix="map_"+b+"_",net=NetworkEncodings.decodeNoteWork(a),net=net.clone(net.nodesPropertiesNames,net.relationsPropertiesNames,subfix),net.id="map_"+b,networks.push(net)}),NetworkOperators.fusionNetworks(networks,b,c)},NetworkOperators.fusionNetworks=function(a,b,c){b=null==b?1:b,c=null==c?1:c;var d,e,f,g,h=new Network,i=new Table,j=ColorListGenerators.createDefaultCategoricalColorList(a.length).getInterpolated("black",.17).getInterpolated("white",.55);a.forEach(function(a,b){i[b]=new NodeList,a.nodeList.forEach(function(a){d=h.nodeList.getNodeById(a.id),null==d?(d=new Node(a.id,a.name),d.basicId=a.basicId,d.mapId="map_"+b,d.mapsIds=[d.mapId],d.color=j[b],d.nMaps=1,d.weight=a.weight,h.addNode(d),i[b].addNode(d)):(d.nMaps+=1,d.mapsIds.push("map_"+b),d.color="rgb(200,200,200)")})}),a.forEach(function(a,b){a.relationList.forEach(function(a){e=new Relation(a.id,a.name,h.nodeList.getNodeById(a.node0.id),h.nodeList.getNodeById(a.node1.id)),e.color=a.color,e.content=a.content,e.description=a.description,e.weight=a.weight,h.addRelation(e)})});var k;for(f=0;null!=h.nodeList[f];f++)for(k=h.nodeList[f],g=f+1;null!=h.nodeList[g];g++)k.name==h.nodeList[g].name&&(e=new Relation(k.id+"_"+h.nodeList[g].id,"same variable",k,h.nodeList[g]),e.color="black",e.distanceFactor=b,e.forceWeight=c,h.addRelation(e),e=new Relation(h.nodeList[g].id+"_"+k.id,"same variable",h.nodeList[g],k),e.color="black",e.distanceFactor=b,e.forceWeight=c,h.addRelation(e),e.node0.nMaps+=1,e.node1.nMaps+=1);for(f=0;null!=h.nodeList[f];f++)h.nodeList[f].hubWeight=Math.sqrt(h.nodeList[f].nMaps-1);return h.mapsCluster=i,h}}),define("src/operators/structures/TreeConvertions",function(){"use strict";function a(){}a.TableToTree=function(b,c,d){if(null!=b){c=null==c?"father":c;var e,f,g,h=new Tree,i=new Node(c,c);return h.addNodeToTree(i,null),b.forEach(function(c,d){b[d].forEach(function(c,j){g=a.getId(b,d,j),e=h.nodeList.getNodeById(g),null==e&&(e=new Node(g,String(c)),0==d?h.addNodeToTree(e,i):(f=h.nodeList.getNodeById(a.getId(b,d-1,j)),h.addNodeToTree(e,f)))})}),h.assignDescentWeightsToNodes(),h}},a.getId=function(a,b,c){for(var d=1,e=String(a[0][c]);b>=d;)e+="_"+String(a[d][c]),d++;return e}}),define("src/operators/structures/TreeEncodings",function(){"use strict";function a(){}a.decodeIdentedTree=function(a,b,c){b=null==b?"":b,c=null==c?"	":c;var d=new Tree,e=StringOperators.splitByEnter(a),f=e.length;if(0==f||1==f&&(null==e[0]||""==e[0]))return null;var g,h,i,j,k,l,m,n;if(""!=b&&null!=b){var o=new Node(b,b);d.addNodeToTree(o,null)}for(g=0;f>g;g++){for(i=e[g],j=i.length,h=0;j>h;h++)if(i.charAt(h)!=c){k=i.substr(h);break}m=new Node(i,k),0==h?null!=o?d.addNodeToTree(m,o):d.addNodeToTree(m,null):(l=h+1-Number(null==o),n=null!=d.getNodesByLevel(l-1)&&d.getNodesByLevel(l-1).length>0?d.getNodesByLevel(l-1)[d.getNodesByLevel(l-1).length-1]:null,d.addNodeToTree(m,n))}return d.assignDescentWeightsToNodes(),d}}),define("src/tools/graphic/CanvasAndContext",function(){"use strict";function a(){}a.createInvisibleContext=function(a,b){a=a||cW,b=b||cH;var c=document.createElement("canvas");return c.width=cW,c.height=cH,c.getContext("2d")}}),define("src/tools/graphic/Draw",function(){"use strict";function a(){}a.drawSmoothPolygon=function(a,b,c){c=null==c?30:c;var d;if(a.length<2)return null;if(2==a.length){var e=Math.atan2(a[1].y-a[0].y,a[1].x-a[0].x)-.5*Math.PI,f=c*Math.cos(e),g=c*Math.sin(e);return context.moveTo(a[0].x,a[0].y),context.bezierCurveTo(a[0].x+f,a[0].y+g,a[1].x+f,a[1].y+g,a[1].x,a[1].y),void context.bezierCurveTo(a[1].x-f,a[1].y-g,a[0].x-f,a[0].y-g,a[0].x,a[0].y)}var h,i=a.length,j=a[i-1],k=a[0],l=a[1];d=GeometryOperators.getSoftenControlPoints(j,k,l,c);var m,n=d[1];context.moveTo(k.x,k.y),j=k;var o=i+Number(b);for(h=1;o>h;h++)k=a[h%i],l=a[(h+1)%i],d=GeometryOperators.getSoftenControlPoints(j,k,l,c),m=d[0],context.bezierCurveTo(n.x,n.y,m.x,m.y,k.x,k.y),n=d[1],j=k},a.fillRectangleWithImage=function(a,b,c,d){null!=d&&(context.fillStyle=d,context.beginPath(),context.fillRect(a.x,a.y,a.width,a.height),context.fill());var e,f,g,h,i,j;switch(c){case 0:context.drawImage(b,a.x,a.y,a.width,a.height);break;case 1:e=.5*Math.max(b.width-a.width,0),f=.5*Math.max(b.height-a.height,0),g=a.x+.5*Math.max(a.width-b.width,0),h=a.y+.5*Math.max(a.height-b.height,0),i=Math.min(b.width,a.width),j=Math.min(b.height,a.height),context.drawImage(b,e,f,i,j,g,h,i,j);break;case 2:e=Math.max(b.width-a.width,0),f=Math.max(b.height-a.height,0),i=Math.min(b.width,a.width),j=Math.min(b.height,a.height);var k=i/j,l=b.width/b.height;l>k&&(j=i/l),k>l&&(i=j/l),g=a.x+.5*(a.width-i),h=a.y+.5*(a.height-j),context.drawImage(b,0,0,b.width,b.height,g,h,i,j);break;case 3:a.width/a.height<b.width/b.height?(sh=b.height,sw=sh*a.width/a.height,e=.5*(b.width-sw),f=0):(sw=b.width,sh=sw*a.height/a.width,e=0,f=.5*(b.height-sh)),context.drawImage(b,e,f,sw,sh,a.x,a.y,a.width,a.height);break;case 4:break;case 5:}},a.drawEllipse=function(a,b,c,d){var e=.5522848,f=c*e,g=d*e,h=a+c,i=b+d;context.moveTo(a-c,b),context.bezierCurveTo(a-c,b-g,a-f,b-d,a,b-d),context.bezierCurveTo(a+f,b-d,h,b-g,h,b),context.bezierCurveTo(h,b+g,a+f,i,a,i),context.bezierCurveTo(a-f,i,a-c,b+g,a-c,b),context.moveTo(a-c,b)},a.drawPolygon=function(a,b,c,d){c=c||0,d=d||0;var e;for(context.moveTo(c+a[0].x,d+a[0].y),e=1;null!=a[e];e++)context.lineTo(c+a[e].x,d+a[e].y);b&&context.lineTo(c+a[0].x,d+a[0].y)},a.drawPolygonWithControlPoints=function(a,b,c,d){c=c||0,d=d||0;var e;for(context.moveTo(c+a[0].x,d+a[0].y),e=1;null!=a[e];e++)context.bezierCurveTo(c+b[2*(e-1)].x,d+b[2*(e-1)].y,c+b[2*e-1].x,d+b[2*e-1].y,c+a[e].x,d+a[e].y)},a.drawBezierPolygon=function(a,b,c){b=b||0,c=c||0;var d,e,f=Math.floor((a.length-1)/3);for(context.moveTo(b+a[0].x,c+a[0].y),e=0;f>e;e++)d=3*e+1,context.bezierCurveTo(b+a[d].x,c+a[d].y,b+a[d+1].x,c+a[d+1].y,b+a[d+2].x,c+a[d+2].y)},a.drawBezierPolygonTransformed=function(a,b){if(null!=a&&0!=a.length){var c,d,e,f,g=Math.floor((a.length-1)/3),h=b(a[0]);for(context.moveTo(h.x,h.y),d=0;g>d;d++)c=3*d+1,h=b(a[c]),e=b(a[c+1]),f=b(a[c+2]),context.bezierCurveTo(h.x,h.y,e.x,e.y,f.x,f.y)}},a.drawPolygonTransformed=function(a,b){var c=b(a[0]);for(context.moveTo(c.x,c.y),i=0;null!=a[i];i++)c=b(a[i]),context.lineTo(c.x,c.y)},a.drawSliderRectangle=function(a,b,c,d){context.arc(a+.5*c,b,.5*c,Math.PI,TwoPi),context.lineTo(a+c,b),context.arc(a+.5*c,b+d,.5*c,0,Math.PI),context.lineTo(a,b)},a.drawRoundRect=function(a,b,c,d,e){e=e||0;var f=b+d;context.moveTo(a+e,b),context.lineTo(a+c-e,b),context.quadraticCurveTo(a+c,b,a+c,b+e),context.lineTo(a+c,b+d-e),context.quadraticCurveTo(a+c,f,a+c-e,f),context.lineTo(a+e,f),context.quadraticCurveTo(a,f,a,f-e),context.lineTo(a,b+e),context.quadraticCurveTo(a,b,a+e,b)},a.drawEquilateralTriangle=function(a,b,c,d){d=d||0,context.moveTo(c*Math.cos(d)+a,c*Math.sin(d)+b),context.lineTo(c*Math.cos(d+2.0944)+a,c*Math.sin(d+2.0944)+b),context.lineTo(c*Math.cos(d+4.1888)+a,c*Math.sin(d+4.1888)+b),context.lineTo(c*Math.cos(d)+a,c*Math.sin(d)+b)},a.drawArrowTriangle=function(b,c,d){var e=b.angleToPoint(c),f=b.distanceToPoint(c);a.drawTriangleFromBase(b.x,b.y,d,f,e)},a.drawTriangleFromBase=function(a,b,c,d,e){context.moveTo(a+.5*c*Math.cos(e+.5*Math.PI),b+.5*c*Math.sin(e+.5*Math.PI)),context.lineTo(a+.5*c*Math.cos(e-.5*Math.PI),b+.5*c*Math.sin(e-.5*Math.PI)),context.lineTo(a+d*Math.cos(e),b+d*Math.sin(e)),context.lineTo(a+.5*c*Math.cos(e+.5*Math.PI),b+.5*c*Math.sin(e+.5*Math.PI))},a.drawHorizontalFlowPiece=function(a,b,c,d,e,f,g){context.moveTo(a,c),context.bezierCurveTo(a+g,c,b-g,e,b,e),context.lineTo(b,f),context.bezierCurveTo(b-g,f,a+g,d,a,d),context.lineTo(a,c)},a.drawRectangles=function(b,c,d,e,f,g,h){f=f||0;var i,j,k=2*f;if(null!=e)var l=e.length;var m=new Rectangle;for(i=0;null!=b[i];i++)j=b[i],j.height<=f||j.width<=f||(null!=e&&(context.fillStyle=e[i%l]),context.fillRect(j.x+c+f,j.y+d+f,j.width-k,j.height-k),null!=g&&null!=g[i]&&(m.x=j.x+c+f,m.y=j.y+d+f,m.width=j.width-k,m.height=j.height-k,a.fillRectangleWithImage(context,m,g[i],h)))},a.drawQuadrilater=function(a,b,c,d,e){e=null==e?!0:e,context.moveTo(a.x,a.y),context.lineTo(b.x,b.y),context.lineTo(c.x,c.y),context.lineTo(d.x,d.y),e&&context.lineTo(a.x,a.y)},a.drawLens=function(a,b){if(b.x<a.x){var c=b.clone();b=a.clone(),a=c}if(b.x+b.z<=a.x+a.z)return void context.arc(b.x,b.y,b.z,0,TwoPi);if(a.x-a.z>=b.x-b.z)return void context.arc(a.x,a.y,a.z,0,TwoPi);var d=GeometryOperators.circlesLensAngles(a,b);context.arc(a.x,a.y,a.z,d[0],d[1]),context.arc(b.x,b.y,b.z,d[2],d[3])},a.drawAndCapture=function(a,b,c){var d=context;context=hiddenContext,context.canvas.setAttribute("width",b.width),context.canvas.setAttribute("height",b.height),context.clearRect(0,0,b.width,b.height),context.translate(-b.x,-b.y),a.call(c);var e=new Image;return e.src=context.canvas.toDataURL(),context=d,e}}),define("src/tools/graphic/DrawSimpleVis",function(){"use strict";function a(){}a.drawSimpleBarChart=function(a,b,c,d){d=null==d?ColorListOperators.colorListFromColorScale(new ColorScale):d,c=null==c?new Rectangle(10,10,400,300):c;var e,f=c.width/b.length,g=c.getBottom(),h=b.getNormalizedToMax(c.height);for(e=0;null!=b[e];e++)a.fillStyle=d[e],a.fillRect(c.x+e*f,g-h[e],f-1,h[e])},a.drawIntervalsFlowTable=function(a,b,d,e,f){c.log("[!] MOVED TO IntervalTableDraw.js")},a.drawIntervalsWordsFlowTable=function(a,b,d,e,f){c.log("[!] MOVED TO IntervalTableDraw.js")},a.drawStackBarsFlowTable=function(a,b,c,d){var e,f,g=b.length;d=null==d?ColorListOperators.colorListFromColorScale(new ColorScale(ColorOperators.temperatureScale),g):d,c=null==c?new Rectangle(10,10,400,300):c;var h,i,j,k,l,m=b[0].length,n=c.width/(m-1),o=c.height,p=b[g-1],q=0,r=0,s=c.x,t=c.y;for(a.strokeStyle="white",e=0;null!=b[e];e++){for(l=b[e],q=.5*(1-p[0].y)*o+e*r+t,f=1;m>f;f++)q=.5*(1-p[f].y)*o+e*r+t,h=new Point(f*n+s,l[f].x*o+q),i=new Point((f+1)*n+s,l[f].x*o+q),j=new Point((f+1)*n+s,l[f].y*o+q),k=new Point(f*n+s,l[f].y*o+q),a.fillStyle=d[e],a.beginPath(),a.moveTo(h.x,h.y),a.lineTo(i.x,i.y),a.lineTo(j.x,j.y),a.lineTo(k.x,k.y),a.lineTo(h.x,h.y),a.fill();a.fill()}}}),define("src/tools/graphic/DrawTexts",function(){"use strict";function a(){}a.POINT_TO_PIXEL=1.3333,a.PIXEL_TO_POINT=.75,a.fillTextRectangle=function(b,c,d,e,f,g,h,i){var j=a.textWordWrapReturnLines(b,e,f,g,i);return a.fillTextRectangleWithTextLines(j,c,d,f,g,h)},a.fillTextRotated=function(a,b,c,d){context.save(),context.translate(b,c),context.rotate(d),context.fillText(a,0,0),context.restore()},a.fillTextRectangleWithTextLines=function(a,b,c,d,e,f){d=0==d||null==d?99999:d;for(var g=0;null!=a[g]&&(context.fillText(a[g],b,c+g*e),!((g+2)*e>d));g++);return f?a.length*e:a.length},a.textWordWrapReturnLines=function(a,b,c,d,e){b=b||100,c=c||600,d=d||16;var f=0==d?-1:Math.floor(c/d),g=new StringList;if(0>=b)return g.push(a),g;var h,i,j,k,l,m,n=a.split(/\\n|\n/),o=0;for(h=0;h<n.length;h++)if(""!=n[h]){for(i=n[h].split(" "),j=1;i.length>0&&j<=i.length;)if(k=i.slice(0,j).join(" "),l=context.measureText(k).width,l>b){if(1==j&&(j=2),m=i.slice(0,j-1).join(" "),""!=m&&g.push(m),g.length==f){if(e){var p=g[g.length-1];context.measureText(p+"â¦").width<=b?g[g.length-1]+="â¦":(i=p.split(" "),m=i.slice(0,i.length-1).join(" ")+"â¦",g.push(m))}return g}o++,i=i.splice(j-1),j=1}else j++;j>0&&(m=i.join(" "),""!=m&&g.push(m)),o++}else g.push(""),o++;return g.width=1==g.length?l:b,g},a.getMaxTextWidth=function(a){for(var b=getTextW(a[0]),c=1;null!=a[c];c++)b=Math.max(b,getTextW(a[c]));return b},a.cropString=function(a,b,c){if(null!=b){if(c=c||0,0>=c||a.measureText(b).width<=c)return b;for(var d=b.split(""),e=1;d.length>0&&e<=d.length;){var f=d.slice(0,e).join(""),g=a.measureText(f).width;if(g>c)return 1==e&&(e=2),d.slice(0,e-1).join("");e++}}}}),define("src/tools/graphic/DrawTextsAdvanced",function(){"use strict";function a(){}a.characterOnQuadrilater=function(a,b,c,d,e,f,g){},a.textOnQuadrilater=function(b,c,d,e,f,g,h){if(h=null==h?0:h,1==h){var i=new Point(.5*(c.x+d.x),.5*(c.y+d.y)),j=new Point(.5*(c.x+f.x),.5*(c.y+f.y)),k=new Point(.5*(e.x+f.x),.5*(e.y+f.y)),l=new Point(.5*(d.x+e.x),.5*(d.y+e.y)),m=new Point(.5*(i.x+k.x),.5*(i.y+k.y));return a.textOnQuadrilater(b,c,i,m,j,g,2),a.textOnQuadrilater(b,i,d,l,m,g,3),a.textOnQuadrilater(b,m,l,e,k,g,4),void a.textOnQuadrilater(b,j,m,k,f,g,5)}var n=context.measureText(b),o=n.width,p=g;switch(h){case 0:var q=new Point(0,0),r=new Point(o,0),s=new Point(1e-6,p+1e-6);break;case 2:var q=new Point(0,0),r=new Point(.5*o,0),s=new Point(1e-6,.5*p+1e-6);break;case 3:var q=new Point(.5*o,0),r=new Point(o,0),s=new Point(.5*o+1e-6,.5*p+1e-6);break;case 4:var q=new Point(.5*o,.5*p),r=new Point(o,.5*p),s=new Point(.5*o+1e-6,p+1e-6);break;case 5:var q=new Point(0,.5*p),r=new Point(.5*o,.5*p),s=new Point(1e-6,p+1e-6)}context.save(),a.applyTransformationOnCanvasFromPoints(q,r,s,c,d,f),context.beginPath(),context.moveTo(q.x-2,q.y-2),context.lineTo(r.x+8,r.y-2),context.lineTo(s.x-2,s.y+8),context.clip(),context.fillText(b,0,0),context.restore(),q.x=r.x+1e-4,q.y=s.y+1e-4,context.save(),a.applyTransformationOnCanvasFromPoints(q,r,s,e,d,f),context.beginPath(),context.moveTo(q.x+4,q.y+2),context.lineTo(r.x+4,r.y-2),context.lineTo(s.x-2,s.y+2),context.clip(),context.fillText(b,0,0),context.restore()},a.applyTransformationOnCanvasFromPoints=function(a,b,c,d,e,f){var g=MatrixGenerators.createMatrixFromTrianglesMapping(a,b,c,d,e,f);context.transform(g.a,g.b,g.c,g.d,g.tx,g.ty)},a.mapRectangleIntoQuadrilater=function(a,b,c,d,e,f,g,h,i){context.save();var j=MatrixGenerators.createMatrixFromTrianglesMapping(new Point(0,0),new Point(100,0),new Point(100,100),f,g,h);context.transform(j.a,j.b,j.c,j.d,j.tx,j.ty),context.beginPath(),context.moveTo(0,0),context.lineTo(100,0),context.lineTo(100,100),context.lineTo(0,0),context.clip(),context.drawImage(a,b,c,d,e,0,0,100,100),context.restore(),context.save();var j=MatrixGenerators.createMatrixFromTrianglesMapping(new Point(0,0),new Point(0,2),new Point(2,2),f,i,h);context.transform(j.a,j.b,j.c,j.d,j.tx,j.ty),context.beginPath(),context.moveTo(0,0),context.lineTo(0,2),context.lineTo(2,2),context.lineTo(0,0),context.clip(),context.drawImage(a,b,c,d,e,0,0,2,2),context.restore()},a.getClippedTrianglesData=function(a,b,c,d,e){var f={};return context.clearRect(0,0,d,e),context.save(),context.beginPath(),context.moveTo(0,0),context.lineTo(d,0),context.lineTo(d,e),context.lineTo(0,0),context.clip(),context.drawImage(a,b,c,d,e,0,0,d,e),f.dataTriangle0=context.getImageData(0,0,d,e),context.restore(),context.clearRect(0,0,d,e),context.save(),context.beginPath(),context.moveTo(0,0),context.lineTo(0,e),context.lineTo(d,e),context.lineTo(0,0),context.clip(),context.drawImage(a,b,c,d,e,0,0,d,e),f.dataTriangle1=context.getImageData(0,0,d,e),context.restore(),f},a.typodeOnQuadrilater=function(a,b,c,d,e){var f=c.x-b.x,g=(c.y-b.y,e.y-b.y),h=d.y-c.y;if(context.lineWidth=.01+(g+h)/100,!(1.8>f))for(var i,j,k,l,m=typodeObject[a],n=0;null!=m[n];n++){for(i=m[n],context.beginPath(),k=i[0].x,l=1-k,context.moveTo(Math.floor(k*f+b.x)+.5,Math.floor(i[0].y*(l*g+k*h)+l*b.y+k*c.y)+.5),j=1;null!=i[j];j++)k=i[j].x,l=1-k,context.lineTo(Math.floor(k*f+b.x)+.5,Math.floor(i[j].y*(l*g+k*h)+l*b.y+k*c.y)+.5);context.stroke()}}}),define("src/tools/graphic/SimpleGraphics",function(){"use strict";fRect=function(a,b,c,d){"number"!=typeof a&&(b=a.y,c=a.width,d=a.height,a=a.x),context.fillRect(a,b,c,d)},sRect=function(a,b,c,d){"number"!=typeof a&&(b=a.y,c=a.width,d=a.height,a=a.x),context.strokeRect(a,b,c,d)},fsRect=function(a,b,c,d){"number"!=typeof a&&(b=a.y,c=a.width,d=a.height,a=a.x),context.fillRect(a,b,c,d),context.strokeRect(a,b,c,d)},fCircle=function(a,b,c){context.beginPath(),context.arc(a,b,c,0,TwoPi),context.fill()},sCircle=function(a,b,c){context.beginPath(),context.arc(a,b,c,0,TwoPi),context.stroke()},fsCircle=function(a,b,c){context.beginPath(),context.arc(a,b,c,0,TwoPi),context.fill(),context.stroke()},fEllipse=function(a,b,c,d){var e=.5522848,f=c*e,g=d*e,h=a+c,i=b+d;context.beginPath(),context.moveTo(a-c,b),context.bezierCurveTo(a-c,b-g,a-f,b-d,a,b-d),context.bezierCurveTo(a+f,b-d,h,b-g,h,b),context.bezierCurveTo(h,b+g,a+f,i,a,i),context.bezierCurveTo(a-f,i,a-c,b+g,a-c,b),context.moveTo(a-c,b),context.closePath(),context.fill()},sEllipse=function(a,b,c,d){var e=.5522848,f=c*e,g=d*e,h=a+c,i=b+d;context.beginPath(),context.moveTo(a-c,b),context.bezierCurveTo(a-c,b-g,a-f,b-d,a,b-d),context.bezierCurveTo(a+f,b-d,h,b-g,h,b),context.bezierCurveTo(h,b+g,a+f,i,a,i),context.bezierCurveTo(a-f,i,a-c,b+g,a-c,b),context.moveTo(a-c,b),context.closePath(),context.stroke()},fsEllipse=function(a,b,c,d){var e=.5522848,f=c*e,g=d*e,h=a+c,i=b+d;context.beginPath(),context.moveTo(a-c,b),context.bezierCurveTo(a-c,b-g,a-f,b-d,a,b-d),context.bezierCurveTo(a+f,b-d,h,b-g,h,b),context.bezierCurveTo(h,b+g,a+f,i,a,i),context.bezierCurveTo(a-f,i,a-c,b+g,a-c,b),context.moveTo(a-c,b),context.closePath(),context.fill(),context.stroke()},line=function(a,b,c,d){context.beginPath(),context.moveTo(a,b),context.lineTo(c,d),context.stroke()},bezier=function(a,b,c,d,e,f,g,h){context.beginPath(),context.moveTo(a,b),context.bezierCurveTo(c,d,e,f,g,h),context.stroke()},_lines=function(){if(null!=arguments){var a=arguments[0];context.beginPath(),context.moveTo(a[0],a[1]);for(var b=2;null!=a[b+1];b+=2)context.lineTo(a[b],a[b+1])}},_linesM=function(){if(null!=arguments){var a=arguments[0],b=new Polygon;context.beginPath(),context.moveTo(a[0],a[1]),b[0]=new Point(a[0],a[1]);for(var c=2;null!=a[c+1];c+=2)context.lineTo(a[c],a[c+1]),b.push(new Point(a[c],a[c+1]));return b.containsPoint(mP)}},fLines=function(){_lines(arguments),context.fill()},sLines=function(){_lines(arguments),context.stroke()},fsLines=function(){_lines(arguments),context.fill(),context.stroke()},fsLinesM=function(){var a=_linesM(arguments);return context.fill(),context.stroke(),a},_polygon=function(a){context.beginPath(),context.moveTo(a[0].x,a[0].y);for(var b=1;null!=a[b];b++)context.lineTo(a[b].x,a[b].y)},fPolygon=function(a){_polygon(a),context.fill()},sPolygon=function(a,b){_polygon(a),b&&context.closePath(),context.stroke()},fsPolygon=function(a,b){_polygon(a),b&&context.closePath(),context.fill(),context.stroke()},fEqTriangle=function(a,b,c,d){_eqTriangle(a,b,c,d),context.fill()},sEqTriangle=function(a,b,c,d){_eqTriangle(a,b,c,d),context.stroke()},fsEqTriangle=function(a,b,c,d){_eqTriangle(a,b,c,d),context.fill(),context.stroke()},_eqTriangle=function(a,b,c,d){context.beginPath(),c=c||0,context.moveTo(d*Math.cos(c)+a,d*Math.sin(c)+b),context.lineTo(d*Math.cos(c+2.0944)+a,d*Math.sin(c+2.0944)+b),context.lineTo(d*Math.cos(c+4.1888)+a,d*Math.sin(c+4.1888)+b),context.lineTo(d*Math.cos(c)+a,d*Math.sin(c)+b)},fRectM=function(a,b,c,d,e){return e=null==e?0:e,context.fillRect(a,b,c,d),mY>b-e&&mY<b+d+e&&mX>a-e&&mX<a+c+e},sRectM=function(a,b,c,d,e){return e=null==e?0:e,context.strokeRect(a,b,c,d),mY>b-e&&mY<b+d+e&&mX>a-e&&mX<a+c+e},fsRectM=function(a,b,c,d,e){return e=null==e?0:e,context.fillRect(a,b,c,d),context.strokeRect(a,b,c,d),mY>b-e&&mY<b+d+e&&mX>a-e&&mX<a+c+e},fCircleM=function(a,b,c,d){return d=null==d?0:d,context.beginPath(),context.arc(a,b,c,0,TwoPi),context.fill(),Math.pow(a-mX,2)+Math.pow(b-mY,2)<Math.pow(c+d,2)},sCircleM=function(a,b,c,d){return d=null==d?0:d,context.beginPath(),context.arc(a,b,c,0,TwoPi),context.stroke(),Math.pow(a-mX,2)+Math.pow(b-mY,2)<Math.pow(c+d,2)},fsCircleM=function(a,b,c,d){return d=null==d?0:d,context.beginPath(),context.arc(a,b,c,0,TwoPi),context.stroke(),context.fill(),Math.pow(a-mX,2)+Math.pow(b-mY,2)<Math.pow(c+d,2)},lineM=function(a,b,c,d,e){return e=e||4,context.beginPath(),context.moveTo(a,b),context.lineTo(c,d),context.stroke(),_distToSegmentSquared(a,b,c,d)<e*e},_distToSegmentSquared=function(a,b,c,d){var e=Math.pow(a-c,2)+Math.pow(b-d,2);if(0===e)return Math.pow(a-mX,2)+Math.pow(b-mY,2);var f=((mX-a)*(c-a)+(mY-b)*(d-b))/e;if(0>=f)return Math.pow(a-mX,2)+Math.pow(b-mY,2);if(f>=1)return Math.pow(c-mX,2)+Math.pow(d-mY,2);var g=a+f*(c-a),h=b+f*(d-b);return Math.pow(g-mX,2)+Math.pow(h-mY,2)},bezierM=function(a,b,c,d,e,f,g,h,i){return i=null==i?2:i,context.beginPath(),context.moveTo(a,b),context.bezierCurveTo(c,d,e,f,g,h),context.stroke(),mX<Math.min(a,g,c,e)-i||mX>Math.max(a,g,c,e)+i||mY<Math.min(b,h,d,f)-i||mY>Math.max(b,h,d,f)+i?!1:GeometryOperators.distanceToBezierCurve(a,b,c,d,e,f,g,h,mP,!1)<i},drawImage=function(a){if(null!=a)switch(arguments.length){case 3:context.drawImage(a,arguments[1],arguments[2]);break;case 5:context.drawImage(a,arguments[1],arguments[2],arguments[3],arguments[4]);break;case 9:context.drawImage(a,arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8])}},fitImage=function(a,b){if(null!=a&&null!=b){var c=a.width/a.height,d=b.width/b.height,e=c/d;c>d?context.drawImage(a,.5*(a.width-a.width/e),0,a.width/e,a.height,b.x,b.y,b.width,b.height):context.drawImage(a,0,.5*(a.height-a.height*e),a.width,a.height*e,b.x,b.y,b.width,b.height)}},setFill=function(a){return"number"==typeof a?arguments.length>3?void(context.fillStyle="rgba("+arguments[0]+","+arguments[1]+","+arguments[2]+","+arguments[3]+")"):void(context.fillStyle="rgb("+arguments[0]+","+arguments[1]+","+arguments[2]+")"):void(context.fillStyle=a)},setStroke=function(a,b){return"number"==typeof a?arguments.length>3?void(context.strokeStyle="rgba("+arguments[0]+","+arguments[1]+","+arguments[2]+","+arguments[3]+")"):void(context.strokeStyle="rgb("+arguments[0]+","+arguments[1]+","+arguments[2]+")"):(context.strokeStyle=a,void(b&&(context.lineWidth=b)))},setLW=function(a){context.lineWidth=a},clipCircle=function(a,b,c){context.save(),context.beginPath(),context.arc(a,b,c,0,TwoPi,!1),context.closePath(),context.clip()},clipRectangle=function(a,b,c,d){context.save(),context.beginPath(),context.moveTo(a,b),context.lineTo(a+c,b),context.lineTo(a+c,b+d),context.lineTo(a,b+d),context.clip()},restore=function(){context.restore()},fText=function(a,b,c){context.fillText(a,b,c)},sText=function(a,b,c){context.strokeText(a,b,c)},fsText=function(a,b,c){context.strokeText(a,b,c),context.fillText(a,b,c)},fTextRotated=function(a,b,c,d){context.save(),context.translate(b,c),context.rotate(d),context.fillText(a,0,0),context.restore()},fTextM=function(a,b,c,d){return d=d||12,context.fillText(a,b,c),mY>c&&mY<c+d&&mX>b&&mX<b+context.measureText(a).width},fsTextM=function(a,b,c,d){return d=d||12,context.strokeText(a,b,c),context.fillText(a,b,c),mY>c&&mY<c+d&&mX>b&&mX<b+context.measureText(a).width},fTextRotatedM=function(a,b,c,d,e){e=e||12,context.save(),context.translate(b,c),context.rotate(d),context.fillText(a,0,0),context.restore();var f=mX-b,g=mY-c,h=Math.sqrt(f*f+g*g),i=Math.atan2(g,f)-d,j=b+h*Math.cos(i),k=c+h*Math.sin(i);return k>c&&c+e>k&&j>b&&j<b+context.measureText(a).width},fTextW=function(a,b,c){return context.fillText(a,b,c),context.measureText(a).width},setText=function(a,b,c,d,e,f){a=a||"#000000",b=String(b)||"14",c=c||LOADED_FONT,d=null==d?"left":d,e=null==e?"top":e,f=null==f?"":f,""!=f&&(f+=" "),context.fillStyle=a,context.font=f+b+"px "+c,context.textAlign=d,context.textBaseline=e},getTextW=function(a){return context.measureText(a).width},getPixelData=function(a,b){return context.getImageData(a,b,1,1).data},getPixelColor=function(a,b){var c=context.getImageData(a,b,1,1).data;return"rgba("+c[0]+","+c[1]+","+c[2]+","+c[3]+")"},getPixelColorRGBA=function(a,b){return context.getImageData(a,b,1,1).data},captureCanvas=function(){var a=new Image;return a.src=canvas.toDataURL(),a},drawAndcapture=function(a,b,c,d){var e=context;context=hiddenContext,context.canvas.setAttribute("width",b),context.canvas.setAttribute("height",c),context.clearRect(0,0,b,c),null==d?a.call():a.call(d);var f=new Image;return f.src=context.canvas.toDataURL(),context=e,f},setCursor=function(a){a=null==a?"default":a,canvas.style.cursor=a},getMilliseconds=function(){var a=new Date;return _ms=a.getTime(),_ms}}),define("src/tools/interaction/DragDetection",function(){"use strict";function a(a){this.mode=a.mode||0,this.listenerFunction=a.listenerFunction,this.target=a.target,this.areaVerificationFunction=a.areaVerificationFunction,this.factor=null==a.factor?1:a.factor,this.center=new Point(0,0),addInteractionEventListener("mousedown",this.onMouse,this),addInteractionEventListener("mouseup",this.onMouse,this),this.dragging=!1,this.mouseClickPosition=new Point,this.mousePosition=new Point,this.r=0,this.a=0,this.idInterval=null,this.dragVector=new Point}a.prototype.constructor=a,a.prototype.enterframe=function(a){switch(a.mode){case 0:a.dragVector.x=(mX-a.mousePosition.x)*a.factor,a.dragVector.y=(mY-a.mousePosition.y)*a.factor,a.mousePosition.x=mX,a.mousePosition.y=mY;break;case 1:a.dragVector.x=mX-a.mouseClickPosition.x,a.dragVector.y=mY-a.mouseClickPosition.y;break;case 2:var b=mX-a.center.x,c=mY-a.center.y,d=Math.sqrt(Math.pow(b,2)+Math.pow(c,2)),e=Math.atan2(c,b);a.dragVector.x=d-a.r,a.dragVector.y=e-a.a,a.r=d,a.a=e}a.listenerFunction.call(a.target,a.dragVector)},a.prototype.onMouse=function(a){switch(a.type){case"mousedown":if(null!=this.areaVerificationFunction&&!this.areaVerificationFunction.call(this.target))return;this.dragging=!0,this.mouseClickPosition.x=mX,this.mouseClickPosition.y=mY,this.mousePosition.x=mX,this.mousePosition.y=mY;var b=mX-this.center.x,c=mY-this.center.y;this.r=Math.sqrt(Math.pow(b,2)+Math.pow(c,2)),this.a=Math.atan2(c,b),this.dragVector.x=0,this.dragVector.y=0,null!=this.idInterval&&clearInterval(this.idInterval),this.idInterval=setInterval(this.enterframe,30,this);break;case"mouseup":this.simulateMouseUp()}},a.prototype.simulateMouseUp=function(){this.dragging=!1,clearInterval(this.idInterval),this.idInterval=null}}),define("src/tools/interaction/InputTextFieldHTML",function(){"use strict";function b(a){this.id=null==a.id?0:a.id,this.target=a.target,this.x=null==a.x?0:a.x,this.y=null==a.y?0:a.y,this.width=null==a.width?200:a.width,this.height=null==a.height?20:a.height,this.fontSize=null==a.fontSize?16:a.fontSize,this.enterFunction=a.enterFunction,this.changeFunction=a.changeFunction,this.focusFunction=a.focusFunction,this.blurFunction=a.blurFunction,this.text=a.text,this.textarea=null==a.textarea?!0:a.textarea,this.readOnly=null==a.readOnly?!1:a.readOnly,this.border=null==a.border?!0:a.border,this.password=a.password,this._prevX,this._prevY,this._prevWidth,this._prevHeight,this._prevText,this.zIndex=30,this.enterFunctionTarget,this.changeFunctionTarget,this.focusFunctionTarget,this.blurFunctionTarget,this.textColor=null==a.textColor?"black":a.textColor,this.backgroundColor="#FFFFFF",this.main=document.getElementById("maindiv"),this.div=document.createElement("div2"),this.textarea?this.DOMtext=document.createElement("textarea"):this.DOMtext=document.createElement("input"),this.password?this.DOMtext.setAttribute("type","password"):this.DOMtext.setAttribute("type","text"),this.div.setAttribute("style","position:absolute;top:"+this.y+"px;left:"+this.x+"px;z-index:"+this.zIndex+";"),this.border||this.DOMtext.setAttribute("style","border:none"),this.div.setAttribute("rows","1"),this.main.appendChild(this.div),this.div.appendChild(this.DOMtext),this.DOMtext.parent=this,this.added=!0,this.DOMtext.readOnly=this.readOnly,this.DOMtext.onfocus=function(a){a.target=this.parent,this.parent._onFocus(this.parent)},this.DOMtext.onblur=function(a){a.target=this.parent,this.parent._onBlur(this.parent)},this.DOMtext.value="",addInteractionEventListener("keydown",this.onKeyDown,this),this._eKeyDown,this.timer,this.focus=!1,null!=this.changeFunction&&this.setChangeFunction(this.changeFunction,this.target),null!=this.enterFunction&&this.setEnterFunction(this.enterFunction,this.target),null!=this.focusFunction&&this.setFocusFunction(this.focusFunction,this.target),null!=this.blurFunction&&this.setBlurFunction(this.blurFunction,this.target),null!=this.text?this.setText(this.text):this.draw(),this.DOMtext.addEventListener("mousemove",_onMouse,!1),_cycleOnMouseMovement&&this.DOMtext.addEventListener("mousemove",onMoveCycle,!1)}b.prototype.constructor=b,b.prototype.setBorder=function(a){this.border=a,this.DOMtext.setAttribute("style","border:0; color: "+this.textColor+"; width:"+(this.width-7)+"px;height:"+(this.height-7)+"px; font-size:"+this.fontSize+"px; border:"+(a?"yes":"none"))},b.prototype.draw=function(){(this.x!=this._prevX||this.y!=this._prevY||this.width!=this._prevWidth||this.height!=this._prevHeight||this.text!=this._prevText)&&(this._prevX=this.x,this._prevY=this.y,this._prevWidth=this.width,this._prevHeight=this.height,this._prevText=this.text,this.DOMtext.style="none",this.DOMtext.style.padding="0px",this.DOMtext.style.border="0px",this.DOMtext.style.borderColor="#FFFFFF",this.DOMtext.style.background="transparent",this.DOMtext.style.resize="none",this.DOMtext.setAttribute("style","border: 0; color: "+this.textColor+"; width:"+(this.width-7)+"px;height:"+(this.height-7)+"px; font-size:"+this.fontSize+"px"),this.div.setAttribute("style","border: 0; position:absolute;top:"+this.y+"px;left:"+this.x+"px;z-index:"+this.zIndex+";"))},b.prototype.setText=function(a,b){b=null==b?!0:b,this.text=a,this.DOMtext.value=a,this.draw()},b.prototype.getText=function(){return this.DOMtext.value},b.prototype.getSelectionStart=function(){return this.DOMtext.selectionStart},b.prototype.onKeyDown=function(a){this._eKeyDown=a,this._keyCode=a.keyCode,this.timer=setTimeout(this.onKeyDownDelayed,4,this)},b.prototype.onKeyDownDelayed=function(a){
if(13==a._keyCode&&a.DOMtext==document.activeElement&&null!=a.enterFunction&&a.enterFunction.call(a.enterFunctionTarget,a.id),a.text!=a.DOMtext.value){a.text=a.DOMtext.value;a.text.charAt(a.text.length-1);13!=a._keyCode&&null!=a.changeFunction&&a.changeFunction.call(a.changeFunctionTarget,a.id)}_cycleOnMouseMovement&&reStartCycle(),this.timer=null},b.prototype.forceFocus=function(){this.DOMtext.focus(),this.focus=!0},b.prototype.forceUnfocus=function(){c.log("[!] use InputTextFieldHTML.prototype.forceBlur instead"),a.push(0)},b.prototype.forceBlur=function(){this.DOMtext.blur(),this.focus=!1},b.prototype.setEnterFunction=function(a,b){this.enterFunction=a,this.enterFunctionTarget=b},b.prototype.setChangeFunction=function(a,b){this.changeFunction=a,this.changeFunctionTarget=b},b.prototype.setFocusFunction=function(a,b){this.focusFunction=a,this.focusFunctionTarget=b},b.prototype.setBlurFunction=function(a,b){this.blurFunction=a,this.blurFunctionTarget=b},b.prototype.setSelection=function(a,b){a=null==a?0:a,b=null==b?this.DOMtext.value.length:b,this.DOMtext.selectionStart=a,this.DOMtext.selectionEnd=b},b.prototype.placeCursor=function(a){this.setSelection(a)},b.prototype.setScrollPosition=function(a){1>=a&&(a=Math.floor(a*this.DOMtext.scrollHeight)),this.DOMtext.scrollTop=a},b.prototype.getScrollPosition=function(){return this.DOMtext.scrollTop},b.prototype.getTextHeight=function(){return this.DOMtext.scrollHeight},b.prototype._onFocus=function(a){a.focus=!0,null!=a.focusFunction&&a.focusFunction.call(a.focusFunctionTarget,a.id)},b.prototype._onBlur=function(a){a.focus=!1,null!=a.blurFunction&&a.blurFunction.call(a.blurFunctionTarget,a.id)},b.prototype.remove=function(){this.added&&(this.div.removeChild(this.DOMtext),this.main.removeChild(this.div),this.added=!1)},b.prototype.readd=function(){this.added||(this.main.appendChild(this.div),this.div.appendChild(this.DOMtext),this.added=!0)},b.prototype.disappear=function(){c.log("[!] InputTextFieldHTML.prototype.disappear replaced by remove"),a.push(0),this.x=-1e4,this.draw()}}),define("src/tools/interaction/TextBox",function(){"use strict";function a(a){a=null==a?{}:a,this.x=null==a.x?300:a.x,this.y=null==a.y?2:a.y,this.width=null==a.width?200:a.width,this.text=null==a.text?"":a.text,this.fontColor=null==a.fontColor?"black":a.fontColor,this.fontSize=null==a.fontSize?"14":a.fontSize,this.fontName=null==a.fontName?LOADED_FONT:a.fontName,this.warnFunction=a.warnFunction,this.target=a.target,this.lineHeight=null==a.lineHeight?14:a.lineHeight,this.backgroundColor=a.backgroundColor,this.boxMargin=null==a.boxMargin?5:a.boxMargin,this.lineWidth=null==a.lineWidth?1:a.lineWidth,this.maxWidth,this.links,this.linksType,this.pointPairs,this.overLink,this.setText(this.text),addInteractionEventListener("mouseup",this.mouseUp,this)}a.prototype.constructor=a,a.prototype.getMaxWidth=function(){return DrawTexts.getMaxTextWidth(this.lines)},a.prototype.update=function(){this.setText(this.text)},a.prototype.setText=function(b){this.text=String(b),this.text=a.replaceWikiLinks(this.text);var c,d,e=this.text.split("<e");if(e.length>1){var f,g,h;this.links=new StringList,this.linksType=new StringList;var i,j,b,k,l,m=new List;for(c=1;null!=e[c];c++)if(f=e[c].indexOf("*"),h=e[c].indexOf(">"),g=e[c].indexOf("*",f+1),-1!=f&&-1!=h&&h>f){for(j=e[c].substr(0,f),this.links.push(j),-1!=g&&h>g&&"b"==!e[c].charAt(g+1)?(k=e[c].charAt(g+1),e[c]=e[c].substring(f+1,g)+e[c].substr(h+1),this.linksType.push("self")):(b=e[c].substring(f+1,h),l=e[c].substr(h+1),e[c]=b+l,this.linksType.push("blank")),i=e[c-1].length,i-=1*(e[c-1].split("\\n").length-1),d=0;c-1>d;d++)i+=e[d].length,i-=1*(e[d].split("\\n").length-1);m.push(new Interval(i,h-f-1))}this.text=e.join("")}else this.links=null,this.pointPairs=null;if(setText(this.fontColor,this.fontSize,this.fontName,null,null,this.fontStyle),this.lines=DrawTexts.textWordWrapReturnLines(this.text,this.width,0,this.lineHeight),this.height=this.lines.length*this.lineHeight,null!=this.links){var n,o=0;this.pointPairs=[];var p,q,r,s;for(c=0;null!=this.links[c];c++)for(n=m[c],o=0,d=0;null!=this.lines[d];d++){if(s=this.lines[d],n.x>=o&&n.x<o+s.length){p=context.measureText(s.substr(0,n.x-o)).width,q=context.measureText(s.substr(0,n.x+n.y-o)).width,r=d*this.lineHeight+.5,this.pointPairs.push({x0:p,x1:q,y:r});break}o+=s.length+1}}for(o=0,d=0;null!=this.lines[d];d++)s=this.lines[d],o+=s.length+1;for(setText(this.fontColor,this.fontSize,this.fontName,null,null,this.fontStyle),this.maxWidth=0,c=0;null!=this.lines[c];c++)this.maxWidth=Math.max(this.maxWidth,context.measureText(this.lines[c]).width)},a.prototype.draw=function(a){a=null==a?1:a,null!=this.backgroundColor&&(context.fillStyle=this.backgroundColor,context.fillRect(this.x-this.boxMargin,this.y-this.boxMargin,this.width+2*this.boxMargin,this.height+2*this.boxMargin)),setText(this.fontColor,this.fontSize*a,this.fontName,null,null,this.fontStyle),DrawTexts.fillTextRectangleWithTextLines(this.lines,this.x,this.y,0,this.lineHeight*a);var b,c,d,e;if(this.overLink=null,null!=this.pointPairs){context.lineWidth=this.lineWidth,context.strokeStyle=this.fontColor;for(var f=0;null!=this.pointPairs[f];f++)b=this.pointPairs[f].x0*a+this.x,c=this.pointPairs[f].x1*a+this.x,d=this.pointPairs[f].y*a+this.y,e=Math.floor(d+Number(this.fontSize*a)),this.line(b,c,e+.5),mY>d&&mY<e&&mX>b&&mX<c&&(context.canvas.style.cursor="pointer",this.overLink=f)}},a.prototype.line=function(a,b,c){context.beginPath(),context.moveTo(a,c),context.lineTo(b,c),context.stroke()},a.prototype.mouseUp=function(a){if(null!=this.overLink){var b=this.links[this.overLink],c=this.linksType[this.overLink];"http://"==b.substr(0,7)||"https://"==b.substr(0,8)||"www."==b.substr(0,4)?"blank"==c?window.open(b):window.open(b,"_self"):this.warnFunction.call(this.target,b),this.overLink=null}},a.prototype.deactivate=function(){removeInteractionEventListener("mouseup",this.mouseUp,this)},a.replaceWikiLinks=function(a){for(var b,d,e,f,g=a.indexOf("[");-1!=g;)b=a.indexOf("]",g+1),-1==b?g=-1:(d=a.substring(g+1,b),c.log("text inside brackets: {"+d+"}"),-1==d.indexOf("[")&&-1==d.indexOf("]")&&(-1!=d.indexOf(" ")&&(e=d.split(" "),StringOperators.validateUrl(e[0])&&(a=a.substr(0,g)+"<e"+e[0]+"*"+e.slice(1).join(" ")+">"+a.substr(b+1),f=!0)),f||(a=a.substr(0,g)+"<e"+d+"*"+d+">"+a.substr(b+1))),g=a.indexOf("[",b));return a}}),define("src/tools/interaction/TextFieldHTML",function(){"use strict";function a(a){a=null==a?{}:a,this.x=null==a.x?300:a.x,this.y=null==a.y?2:a.y,this.width=null==a.width?200:a.width,this.textColor=null==a.textColor?"black":a.textColor,this.backgroundColor=a.backgroundColor,this.linkFunction=a.linkFunction,this.target=a.target,this.fastHTMLactive=null==a.fastHTMLactive?!0:a.fastHTMLactive,this.text,this._prevX,this._prevY,this._prevWidth,this._prevHeight,this.zIndex=33,this.main=document.getElementById("maindiv"),this.div=document.createElement("div2"),this.div.setAttribute("style","position:absolute;top:"+this.y+"px;left:"+this.x+"px;z-index:"+this.zIndex+";"),this.main.appendChild(this.div),this.setText(null==a.text?"":a.text),this.draw();this.linkFunction,this.target;null!=this.target&&null!=this.linkFunction&&(FastHtml.target=this.target,FastHtml.linkFunction=this.linkFunction)}a.prototype.constructor=a,a.prototype.draw=function(){(this.x!=this._prevX||this.y!=this._prevY||this.width!=this._prevWidth||this.height!=this._prevHeight)&&(this._prevX=this.x,this._prevY=this.y,this._prevWidth=this.width,this._prevHeight=this.height,this.div.setAttribute("style","position:absolute;top:"+this.y+"px;left:"+this.x+"px;z-index:"+this.zIndex+"; width:"+this.width+"px; height:"+this.height+"px;"))},a.prototype.setText=function(a){this.text!=a&&(this.text=a,this.div.innerHTML=this.fastHTMLactive?FastHtml.expand(a):a)},a.prototype.getText=function(){return this.DOMtext.value}}),define("src/tools/loaders/LoadEvent",function(){"use strict";function a(){Object.apply(this),this.result=null,this.errorType=0,this.errorMessage="",this.url}a.prototype={},a.prototype.constructor=a}),define("src/tools/loaders/Loader",function(){"use strict";function a(){}a.proxy="",a.cacheActive=!1,a.associativeByUrls={},a.REPORT_LOADING=!1,a.n_loading=0,a.LOCAL_STORAGE_ENABLED=!1,a.PHPurl="http://intuitionanalytics.com/tests/proxy.php?url=",a.loadData=function(b,d,e,f,g){if(a.REPORT_LOADING&&c.log("load data:",b),a.n_loading++,a.LOCAL_STORAGE_ENABLED){var h=LocalStorage.getItem(b);if(h){var i=new LoadEvent;i.url=b,i.param=f,i.result=h,d.call(l,i)}}a.REPORT_LOADING&&c.log("Loader.loadData | url:",b);var j="http"==String(b).substr(0,4),k=new XMLHttpRequest,l=e?e:arguments.callee,m=function(){if(a.REPORT_LOADING&&c.log("Loader.loadData | onLoadComplete"),4==k.readyState){a.n_loading--;var e=new LoadEvent;e.url=b,e.param=f,200==k.status||0==k.status&&null!=k.responseText?(e.result=k.responseText,d.call(l,e)):(a.REPORT_LOADING&&c.log("[!] There was a problem retrieving the data ["+k.status+"]:\n"+k.statusText),e.errorType=k.status,e.errorMessage="[!] There was a problem retrieving the data ["+k.status+"]:"+k.statusText,d.call(l,e))}};if(window.XMLHttpRequest&&!window.ActiveXObject)try{k=new XMLHttpRequest}catch(i){k=!1}else if(window.ActiveXObject)try{k=new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(i){try{k=new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(i){try{k=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){try{k=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){k=!1}}}}k&&(k.onreadystatechange=m,j?k.open("GET",a.proxy+b,!0):k.open("GET",b,!0),g=g||"",k.send(g))},a.loadImage=function(b,d,e,f){a.n_loading++,a.REPORT_LOADING&&c.log("Loader.loadImage | url:",b);var g=e?e:arguments.callee,h=document.createElement("img");if(this.cacheActive)if(null!=this.associativeByUrls[b]){a.n_loading--;var i=new LoadEvent;i.result=this.associativeByUrls[b],i.url=b,i.param=f,d.call(g,i)}else var j=!0,k=this.associativeByUrls;h.onload=function(){a.n_loading--;var c=new LoadEvent;c.result=h,c.url=b,c.param=f,j&&(k[b]=h),d.call(g,c)},h.onerror=function(){a.n_loading--;var c=new LoadEvent;c.result=null,c.errorType=1,c.errorMessage="There was a problem retrieving the image ["+h.src+"]:",c.url=b,c.param=f,d.call(g,c)},h.src=a.proxy+b},a.loadXML=function(b,d){function e(){a.n_loading--,4==f.readyState&&(200==f.status||0==f.status?g(f.responseXML):c.log("There was a problem retrieving the XML data:\n"+f.statusText))}a.n_loading++;var f=new XMLHttpRequest,g=d;if(a.REPORT_LOADING&&c.log("loadXML, url:",b),window.XMLHttpRequest&&!window.ActiveXObject)try{f=new XMLHttpRequest}catch(h){f=!1}else if(window.ActiveXObject)try{f=new ActiveXObject("Msxml2.XMLHTTP")}catch(h){try{f=new ActiveXObject("Microsoft.XMLHTTP")}catch(h){f=!1}}f&&(f.onreadystatechange=e,f.open("GET",b,!0),f.send(""))},a.sendContentToVariableToPhp=function(b,c,d,e,f,g){var h=c+"="+encodeURIComponent(d);a.sendDataToPhp(b,h,e,f,g)},a.sendContentsToVariablesToPhp=function(b,c,d,e,f,g){for(var h=c[0]+"="+encodeURIComponent(d[0]),i=1;null!=c[i];i++)h+="&"+c[i]+"="+encodeURIComponent(d[i]);a.sendDataToPhp(b,h,e,f,g)},a.sendDataToPhp=function(b,d,e,f,g){var h=new XMLHttpRequest;h.open("POST",b,!0),h.setRequestHeader("Content-type","application/x-www-form-urlencoded"),h.send(d);var i=f?f:arguments.callee,j=function(){if(a.REPORT_LOADING&&c.log("Loader.loadData | onLoadComplete, req.responseText:",h.responseText),4==h.readyState){a.n_loading--;var d=new LoadEvent;d.url=b,d.param=g,200==h.status||0==h.status&&null!=h.responseText?(d.result=h.responseText,e.call(i,d)):(a.REPORT_LOADING&&c.log("[!] There was a problem retrieving the data ["+h.status+"]:\n"+h.statusText),d.errorType=h.status,d.errorMessage="[!] There was a problem retrieving the data ["+h.status+"]:"+h.statusText,e.call(i,d))}};h.onreadystatechange=j}}),define("src/tools/loaders/MultiLoader",function(){"use strict";function a(){this.urlList=null,this.onComplete=null,this.iLoaded=0,this.target=null,this.loading=!1,this.indexLoading,this.datasLoaded=null,this.imagesLoaded=null,this.priorityWeights,this.associativeArray=[],this.url_to_image={},this.simulateDelay=!1,this.DELAY_MILLISECONDS=1e3,this.timer}a.prototype={},a.prototype.constructor=a,a.prototype.loadDatas=function(a,b,c){this.urlList=a,this.target=c?c:arguments.callee,this.onComplete=b,this.datasLoaded=new List,this.nextDataLoading()},a.prototype.nextDataLoading=function(){this.iLoaded<this.urlList.length?(this.indexLoading=this.iLoaded,Loader.loadData(this.urlList[this.indexLoading],this.onCompleteLoadData,this),this.loading=!0):this.loading=!1},a.prototype.onCompleteLoadData=function(a){null!=this.priorityWeights?this.datasLoaded[this.urlList.indexOf(a.url)]=a.result:this.datasLoaded.push(a.result),this.associativeArray[this.indexLoading]=a.result;var b=new LoadEvent;b.errorType=a.errorType,b.result=this.datasLoaded,b.url=a.url,this.iLoaded+1>=this.urlList.length&&(this.loading=!1),this.onComplete.call(this.target,b),this.iLoaded++,this.nextDataLoading()},a.prototype.loadImages=function(a,b,c,d){this.urlList=a,this.target=c?c:arguments.callee,this.onComplete=b,this.priorityWeights=d,this.imagesLoaded=new List,this.nextImageLoading()},a.prototype.onCompleteLoadImage=function(a){1==a.errorType?(null!=this.priorityWeights?this.imagesLoaded[this.indexLoading]=null:this.imagesLoaded.push(null),this.associativeArray[this.indexLoading]=-1):(null!=this.priorityWeights?this.imagesLoaded[this.indexLoading]=a.result:this.imagesLoaded.push(a.result),this.associativeArray[this.indexLoading]=a.url,this.url_to_image[a.url]=a.result);var b=new LoadEvent;b.result=this.imagesLoaded,b.url=a.url,b.lastImage=a.result,b.indexImage=this.indexLoading,null!=this.onComplete&&this.onComplete.call(this.target,b),this.loading=!1,this.iLoaded++,this.nextImageLoading()},a.prototype.getImageFromUrl=function(a){return this.url_to_image[a]},a.prototype.setPriorityWeights=function(a){this.priorityWeights=a,this.loading||this.nextImageLoading()},a.prototype.nextImageLoading=function(a){if(this.simulateDelay||null!=a)return null==a?(this.loading=!0,void(this.timer=setTimeout(this.nextImageLoading,this.DELAY_MILLISECONDS,this))):(a.loading=!1,a.simulateDelay=!1,a.nextImageLoading(),void(a.simulateDelay=!0));if(this.iLoaded<this.urlList.length)if(null!=this.priorityWeights){var b,c,d=-99999999;for(c=0;null!=this.urlList[c];c++)this.priorityWeights[c]>d&&null==this.associativeArray[c]&&(d=this.priorityWeights[c],b=c);d>0&&(this.indexLoading=b,Loader.loadImage(this.urlList[this.indexLoading],this.onCompleteLoadImage,this),this.loading=!0)}else this.indexLoading=this.iLoaded,Loader.loadImage(this.urlList[this.indexLoading],this.onCompleteLoadImage,this),this.loading=!0;else this.loading=!1},a.prototype.destroy=function(){delete this.datasLoaded,delete this.imagesLoaded}}),define("src/tools/physics/Forces",function(){"use strict";function a(a){this.k=a.k?a.k:.01,this.dEqSprings=a.dEqSprings?a.dEqSprings:100,this.dEqRepulsors=a.dEqRepulsors?a.dEqRepulsors:500,this.friction=a.friction?a.friction:.8,this.nodeList=new NodeList,this.forcesList=new List,this.equilibriumDistances=new NumberList,this.forcesTypeList=new List,this.fromNodeList=new NodeList,this.toNodeList=new NodeList,this._i0=0}a.prototype.forcesForNetwork=function(a,b,c,d,e){b=b||0,c=c||new Point(0,0),d=null==d?0:d,e=null==e?!1:e,this.forcesList=new List,this.equilibriumDistances=new NumberList,this.forcesTypeList=new List,this.fromNodeList=new NodeList,this.toNodeList=new NodeList;var f,g,h,i,j,k=a.nodeList.length,l=a.relationList;for(h=0;k>h;h++)0==b?this.addNode(a.nodeList[h],new Point(a.nodeList[h].x,a.nodeList[h].y)):(j=Math.random()*TwoPi,this.addNode(a.nodeList[h],new Point(c.x+b*Math.cos(j),c.y+b*Math.sin(j))));for(h=0;k-1>h;h++)for(f=a.nodeList[h],i=h+1;k>i;i++)if(g=a.nodeList[i],l.nodesAreConnected(f,g)){switch(d){case 0:this.equilibriumDistances.push(this.dEqSprings);break;case 1:this.equilibriumDistances.push((1.1-l.getFirstRelationByIds(f.id,g.id,!1).weight)*this.dEqSprings);break;case 2:this.equilibriumDistances.push(Math.sqrt(Math.min(f.nodeList.length,g.nodeList.length))*this.dEqSprings*.1)}this.addForce(f,g,"Spring"),e&&(this.equilibriumDistances.push(.5*this.dEqRepulsors),this.addForce(f,g,"Repulsor"))}else this.equilibriumDistances.push(this.dEqRepulsors),this.addForce(f,g,"Repulsor")},a.prototype.addNode=function(a,b,c){b=null==b?new Point(200*Math.random()-100,200*Math.random()-100):b,c=null==c?new Point(0,0):c,this.nodeList.addNode(a),a.x=b.x,a.y=b.y,a.vx=c.x,a.vy=c.y,a.ax=0,a.ay=0},a.prototype.addForce=function(a,b,c,d){this.fromNodeList.addNode(a),this.toNodeList.addNode(b),this.forcesList.push(a.id+"*"+b.id+"*"+c),this.forcesTypeList.push(c),null!=d&&this.equilibriumDistances.push(d)},a.prototype.calculate=function(){var a,b,c,d,e,f,g,h,i;for(this._resetAccelerations(),a=0;null!=this.forcesList[a];a++)if(b=this.fromNodeList[a],c=this.toNodeList[a],d=this.forcesTypeList[a],f=c.x-b.x,g=c.y-b.y,h=Math.sqrt(Math.pow(f,2)+Math.pow(g,2)),i=this.equilibriumDistances[a],!("Repulsor"==d&&h>i||"Attractor"==d&&i>h))switch(d){case"Spring":case"Repulsor":case"Attractor":e=this.k*(h-i)/h,b.ax+=e*f,b.ay+=e*g,c.ax-=e*f,c.ay-=e*g;break;case"DirectedSpring":e=this.k*(h-i)/h,c.ax-=e*f,c.ay-=e*g;break;case"DirectedRepulsor":i>h&&(e=this.k*(h-i)/h,c.ax-=e*f,c.ay-=e*g)}},a.prototype.attractionToPoint=function(a,b,c){b=null==b?1:b;var d,e,f,g,h;for(i=0;null!=this.nodeList[i];i++)d=this.nodeList[i],f=a.x-d.x,g=a.y-d.y,h=Math.pow(f,2)+Math.pow(g,2),e=null!=c?Math.min(b/h,c):b/h,d.ax+=e*f,d.ay+=e*g},a.prototype.avoidOverlapping=function(a){a=a||0;var b,d,e,f,g,h,i,k,l,m,n,o,p,q=.5*a,r=this.nodeList.length;for(c.log(this.nodeList.length),b=0;null!=this.nodeList[b+1];b++)for(d=this.nodeList[(b+this._i0)%r],f=d.x-.5*d.width-q,h=d.x+.5*d.width+q,g=d.y-.5*d.height-q,i=d.y+.5*d.height+q,j=b+1;null!=this.nodeList[j];j++)e=this.nodeList[(j+this._i0+b)%r],k=e.x-.5*e.width-q,m=e.x+.5*e.width+q,l=e.y-.5*e.height-q,n=e.y+.5*e.height+q,(f>k&&m>f||h>k&&m>h)&&(g>l&&n>g||i>l&&n>i)&&(o=e.x-d.x,p=e.y-d.y,Math.abs(o)>Math.abs(p)?o>0?(d.x-=.5*(h-k),e.x+=.5*(h-k)):(d.x+=.5*(m-f),e.x-=.5*(m-f)):p>0?(d.y-=.5*(i-l),e.y+=.5*(i-l)):(d.y+=.5*(n-g),e.y-=.5*(n-g)));this._i0++},a.prototype.avoidOverlappingRadial=function(a,b){a=a||0,b=b||1;var c,d,e,f,g,h,i,k,l=this.nodeList.length,m=2*a;for(c=0;null!=this.nodeList[c+1];c++)for(d=this.nodeList[(c+this._i0)%l],j=c+1;null!=this.nodeList[j];j++)e=this.nodeList[(j+this._i0+c)%l],f=e.x-d.x,g=e.y-d.y,h=Math.pow(f,2)+Math.pow(g,2),i=Math.pow(d.r+e.r+m,2),i>h&&(i=Math.sqrt(i),h=Math.sqrt(h),k=.5*(i-h)/h,d.x-=b*k*f,d.y-=b*k*g,e.x+=b*k*f,e.y+=b*k*g);this._i0++},a.prototype.applyForces=function(){var a;for(i=0;null!=this.nodeList[i];i++)a=this.nodeList[i],a.vx+=a.ax,a.vy+=a.ay,a.vx*=this.friction,a.vy*=this.friction,a.x+=a.vx,a.y+=a.vy},a.prototype.deactivateForcesFromNode=function(a){a.vx=a.vy=a.ax=a.ay=0},a.prototype.destroy=function(){delete this.k,delete this.dEqSprings,delete this.dEqRepulsors,delete this.friction,this.nodeList.destroy(),delete this.nodeList,this.forcesList.destroy(),delete this.forcesList,this.equilibriumDistances.destroy(),delete this.equilibriumDistances,this.forcesTypeList.destroy(),delete this.forcesTypeList,this.fromNodeList.destroy(),delete this.fromNodeList,this.toNodeList.destroy(),delete this.toNodeList,delete this._i0},a.prototype._resetAccelerations=function(){var a;for(i=0;null!=this.nodeList[i];i++)a=this.nodeList[i],a.ax=0,a.ay=0}}),define("src/tools/threeD/Engine3D",function(){"use strict";function a(a){a=null==a?{}:a,this.lens=null==a.lens?300:a.lens,this._freeRotation=!1,this.setBasis(new Polygon3D(new Point3D(1,0,0),new Point3D(0,1,0),new Point3D(0,0,1))),this._cuttingPlane=10,null!=a.angles&&this.setAngles(a.angles)}a.prototype.constructor=a,a.prototype.setBasis=function(a){this._basis=a.clone(),this._basisBase=a.clone(),this._provisionalBase=a.clone()},a.prototype.setAngles=function(a){this._angles=a.clone(),this._freeRotation=!1,this._basis=this.basis3DRotation(this._basisBase,this._angles)},a.prototype.applyRotation=function(a){this._freeRotation||(this._freeRotation=!0,this.updateAngles(),this._provisionalBase[0]=this._basis[0].clone(),this._provisionalBase[1]=this._basis[1].clone(),this._provisionalBase[2]=this._basis[2].clone()),this._basis[0]=this.point3DRotation(this._provisionalBase[0],new Point3D(-a.y,a.x,0)),this._basis[1]=this.point3DRotation(this._provisionalBase[1],new Point3D(-a.y,a.x,0)),this._basis[2]=this.point3DRotation(this._provisionalBase[2],new Point3D(-a.y,a.x,0)),this._provisionalBase[0]=this._basis[0].clone(),this._provisionalBase[1]=this._basis[1].clone(),this._provisionalBase[2]=this._basis[2].clone()},a.prototype.projectPoint3D=function(a){var b=this.lens/(this.lens+(this._basis[0].z*a.x+this._basis[1].z*a.y+this._basis[2].z*a.z));return new Point3D((this._basis[0].x*a.x+this._basis[1].x*a.y+this._basis[2].x*a.z)*b,(this._basis[0].y*a.x+this._basis[1].y*a.y+this._basis[2].y*a.z)*b,b)},a.prototype.projectCoordinates=function(a,b,c){var d=this.lens/(this.lens+(this._basis[0].z*a+this._basis[1].z*b+this._basis[2].z*c));return new Point3D((this._basis[0].x*a+this._basis[1].x*b+this._basis[2].x*c)*d,(this._basis[0].y*a+this._basis[1].y*b+this._basis[2].y*c)*d,d)},a.prototype.projectPoint3DNode=function(a){var b=this.lens/(this.lens+(this._basis[0].z*a.x+this._basis[1].z*a.y+this._basis[2].z*a.z));return new Point3D((this._basis[0].x*a.x+this._basis[1].x*a.y+this._basis[2].x*a.z)*b,(this._basis[0].y*a.x+this._basis[1].y*a.y+this._basis[2].y*a.z)*b,b)},a.prototype.scale=function(a){return this.lens/(this.lens+(this._basis[0].z*a.x+this._basis[1].z*a.y+this._basis[2].z*a.z))},a.prototype.sortedIndexesByPointsScale=function(a){for(var b=new Array,c=0;null!=a[c];c++)b[c]=[a[c],c];UTLITARY_GLOBAL_VAR=this._basis,b=b.sort(this._sortingCriteria,this._basis),UTLITARY_GLOBAL_VAR=null;for(var d=new NumberList,c=0;null!=a[c];c++)d[c]=b[c][1];return d},a.prototype.sortListByPointsScale=function(a,b){for(var c=new Array,d=0;null!=a[d];d++)c[d]=[b[d],a[d]];UTLITARY_GLOBAL_VAR=this._basis,c=c.sort(this._sortingCriteria,this._basis),UTLITARY_GLOBAL_VAR=null;var e=instantiateWithSameType(a);e.name=a;for(var d=0;null!=a[d];d++)e[d]=c[d][1];return e},a.prototype._sortingCriteria=function(a,b,c){var d=a[0],e=b[0];return UTLITARY_GLOBAL_VAR[0].z*d.x+UTLITARY_GLOBAL_VAR[1].z*d.y+UTLITARY_GLOBAL_VAR[2].z*d.z<UTLITARY_GLOBAL_VAR[0].z*e.x+UTLITARY_GLOBAL_VAR[1].z*e.y+UTLITARY_GLOBAL_VAR[2].z*e.z?1:-1},a.prototype.updateAngles=function(){this._angles=this.getEulerAngles()},a.prototype.getEulerAngles=function(){return new Point3D(Math.atan2(-this._basis[1].z,this._basis[2].z),Math.asin(this._basis[0].z),Math.atan2(-this._basis[0].y,this._basis[0].x))},a.prototype.basis3DRotation=function(a,b){return ca=Math.cos(b.x),sa=Math.sin(b.x),cb=Math.cos(b.y),sb=Math.sin(b.y),cg=Math.cos(b.z),sg=Math.sin(b.z),new Polygon3D(new Point3D(a[0].x*cg*cb+a[0].y*(cg*sa*sb+sg*ca)+a[0].z*(sg*sa-cg*ca*sb),-a[0].x*sg*cb+a[0].y*(cg*ca-sg*sa*sb)+a[0].z*(sg*ca*sb+cg*sa),a[0].x*sb-a[0].y*sa*cb+a[0].z*cb*ca),new Point3D(a[1].x*cg*cb+a[1].y*(cg*sa*sb+sg*ca)+a[1].z*(sg*sa-cg*ca*sb),-a[1].x*sg*cb+a[1].y*(cg*ca-sg*sa*sb)+a[1].z*(sg*ca*sb+cg*sa),a[1].x*sb-a[1].y*sa*cb+a[1].z*cb*ca),new Point3D(a[2].x*cg*cb+a[2].y*(cg*sa*sb+sg*ca)+a[2].z*(sg*sa-cg*ca*sb),-a[2].x*sg*cb+a[2].y*(cg*ca-sg*sa*sb)+a[2].z*(sg*ca*sb+cg*sa),a[2].x*sb-a[2].y*sa*cb+a[2].z*cb*ca))},a.prototype.point3DRotation=function(a,b){var c=Math.cos(b.x),d=Math.sin(b.x),e=Math.cos(b.y),f=Math.sin(b.y),g=Math.cos(b.z),h=Math.sin(b.z);return new Point3D(a.x*g*e+a.y*(g*d*f+h*c)+a.z*(h*d-g*c*f),-a.x*h*e+a.y*(g*c-h*d*f)+a.z*(h*c*f+g*d),a.x*f-a.y*d*e+a.z*e*c)},a.prototype.line3D=function(a,b){var c=new Polygon,d=a,e=this.lens/(this.lens+(this._basis[0].z*d.x+this._basis[1].z*d.y+this._basis[2].z*d.z)),f=b,g=this.lens/(this.lens+(this._basis[0].z*f.x+this._basis[1].z*f.y+this._basis[2].z*f.z));if(e>0||g>0){if(e>0&&g>0)return c.push(new Point((this._basis[0].x*d.x+this._basis[1].x*d.y+this._basis[2].x*d.z)*e,(this._basis[0].y*d.x+this._basis[1].y*d.y+this._basis[2].y*d.z)*e)),c.push(new Point((this._basis[0].x*f.x+this._basis[1].x*f.y+this._basis[2].x*f.z)*g,(this._basis[0].y*f.x+this._basis[1].y*f.y+this._basis[2].y*f.z)*g)),c;var h=new Point3D(this._basis[0].x*d.x+this._basis[1].x*d.y+this._basis[2].x*d.z,this._basis[0].y*d.x+this._basis[1].y*d.y+this._basis[2].y*d.z,this._basis[0].z*d.x+this._basis[1].z*d.y+this._basis[2].z*d.z),i=new Point3D(this._basis[0].x*f.x+this._basis[1].x*f.y+this._basis[2].x*f.z,this._basis[0].y*f.x+this._basis[1].y*f.y+this._basis[2].y*f.z,this._basis[0].z*f.x+this._basis[1].z*f.y+this._basis[2].z*f.z),j=(-this.lens+this._cuttingPlane-h.z)/(i.z-h.z),k=new Point3D(h.x+j*(i.x-h.x),h.y+j*(i.y-h.y),-this.lens+this._cuttingPlane),l=this.lens/(this.lens+k.z);return e>0?(c.push(new Point(h.x*e,h.y*e)),c.push(new Point(k.x*l,k.y*l))):(c.push(new Point(k.x*l,k.y*l)),c.push(new Point(i.x*g,i.y*g))),c}return null},a.prototype.quadrilater=function(a,b,c,d){var e=new Polygon3D,f=this.line3D(a,b),g=this.line3D(b,c),h=this.line3D(c,d),i=this.line3D(d,a);return null!=f&&((null==i||f[0].x!=i[1].x&&f[0].y!=i[1].y)&&e.push(f[0]),e.push(f[1])),null!=g&&((null==f||g[0].x!=f[1].x&&g[0].y!=f[1].y)&&e.push(g[0]),e.push(g[1])),null!=h&&((null==g||h[0].x!=g[1].x&&h[0].y!=g[1].y)&&e.push(h[0]),e.push(h[1])),null!=i&&((null==h||i[0].x!=h[1].x&&i[0].y!=h[1].y)&&e.push(i[0]),e.push(i[1])),e}}),define("src/tools/utils/code/ClassUtils",function(){"use strict";function typeOf(a){var b=typeof a;if("object"!==b)return b;if(null===a)return"null";if(null!=a.getDate)return"date";if(null==a.getType)return"Object";var c=a.getType();return c}function VOID(){}function instantiate(a,b){switch(a){case"number":case"string":return window[a](b);case"date":if(!b||0==b.length)return new Date;if(1==b.length){if(b[0].match(/\d*.-\d*.-\d*\D\d*.:\d*.:\d*/)){var c=b[0].split(" ");return c[0]=c[0].split("-"),c[1]?c[1]=c[1].split(":"):c[1]=new Array(0,0,0),new Date(Date.UTC(c[0][0],Number(c[0][1])-1,c[0][2],c[1][0],c[1][1],c[1][2]))}return"NaN"!=Number(b[0])?new Date(Number(b[0])):new Date(b[0])}return new Date(Date.UTC.apply(null,b));case"boolean":return window[a]("false"==b||"0"==b?!1:!0);case"List":case"Table":case"StringList":case"NumberList":case"NumberTable":case"NodeList":case"RelationList":case"Polygon":case"Polygon3D":case"PolygonList":case"DateList":case"ColorList":return window[a].apply(window,b);case null:case void 0:case"undefined":return null}var d,e,f;return f=window[a],e=function(){},e.prototype=f.prototype,d=new e,f.apply(d,b),d}function instantiateWithSameType(a,b){return instantiate(typeOf(a),b)}function isArray(a){return-1==a.constructor.toString().indexOf("Array")?!1:!0}function argumentsToArray(a){return Array.prototype.slice.call(a,0)}function TimeLogger(a){var b=this;this.name=a,this.clocks={},this.tic=function(a){b.clocks[a]=(new Date).getTime()},this.tac=function(a){if(null==b.clocks[a])b.tic(a);else{var d=(new Date).getTime(),e=d-b.clocks[a];c.l("TimeLogger '"+a+"' took "+e+" ms")}}}var TYPES_SHORT_NAMES_DICTIONARY={Null:"Ã",Object:"{}",Function:"F",Boolean:"b",Number:"#",Interval:"##",Array:"[]",List:"L",Table:"T",BooleanList:"bL",NumberList:"#L",NumberTable:"#T",String:"s",StringList:"sL",StringTable:"sT",Date:"d",DateInterval:"dd",DateList:"dL",Point:".",Rectangle:"t",Polygon:".L",RectangleList:"tL",MultiPolygon:".T",Point3D:"3",Polygon3D:"3L",MultiPolygon3D:"3T",Color:"c",ColorScale:"cS",ColorList:"cL",Image:"i",ImageList:"iL",Node:"n",Relation:"r",NodeList:"nL",RelationList:"rL",Network:"Nt",Tree:"Tr"};getTextFromObject=function(a,b){if(null==a)return"Null";if(a.isList){if(0==a.length)return"[]";var c=a.toString();if(c.length>160){var d,e;for(c="[",d=0;null!=a[d]&&6>d;d++)e=getTextFromObject(a[d],typeOf(a[d])),e.length>40&&(e=e.substr(0,40)+(a[d].isList?"â¦]":"â¦")),c+=(0!=d?", ":"")+e;a.length>6&&(c+=",â¦"),c+="]"}return c}switch(b){case"date":return DateOperators.dateToString(a);case"DateInterval":return DateOperators.dateToString(a.date0)+" - "+DateOperators.dateToString(a.date1);case"string":return(a.length>160?a.substr(0,159)+"â¦":a).replace(/\n/g,"â©");case"number":return String(a);default:return"{}"}},Date.prototype.getType=function(){return"date"},evalJavaScriptFunction=function(functionText,args,scope){if(null!=functionText){var res,myFunction,good=!0,message="",realCode,lines=functionText.split("\n");for(i=0;null!=lines[i];i++)lines[i]=lines[i].trim(),(""==lines[i]||"/"==lines[i].substr(1))&&(lines.splice(i,1),i--);var isFunction=-1!=lines[0].indexOf("function");functionText=lines.join("\n"),realCode=isFunction?scope?"scope.myFunction = "+functionText:"myFunction = "+functionText:scope?"scope.myVar = "+functionText:"myVar = "+functionText;try{isFunction?(eval(realCode),res=scope?scope.myFunction.apply(scope,args):myFunction.apply(this,args)):(eval(realCode),res=scope?scope.myVar:myVar)}catch(err){good=!1,message=err.message,res=null}var resultObject={result:res,success:good,errorMessage:message};return resultObject}};var tl=new TimeLogger("Global Time Logger")}),define("src/tools/utils/strings/Consoletools",function(){"use strict";function a(){}a._ticTime,a._tacTime,a.NumberTableOnConsole=function(a){var b,d,e,f,g="";for(f=0;f<a[0].length;f++){for(b="|",e=0;null!=a[e];e++){for(d=String(Math.floor(100*a[e][f])/100).replace(/0./,".");d.length<3;)d=" "+d;b+=d+"|"}g+=b+"\n"}return c.l(g),g},a.tic=function(b){b=b||"",a._ticTime=a._tacTime=(new Date).getTime(),a._nTacs=0,c.l("Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â° tic Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â°Â° ["+b+"]")},a.tac=function(b){b=b||"";var d=a._tacTime;a._tacTime=(new Date).getTime(),c.l("Â°Â°Â°Â°Â°Â°Â° tac ["+b+"], t from tic:"+(a._tacTime-a._ticTime)+", t from last tac:"+(a._tacTime-d))}}),define("src/tools/utils/strings/FastHtml",function(){"use strict";function a(){}a.expand=function(a,b,c){if(null==a||""==a)return"";if(a.split("<").length!=a.split(">").length)return a;for(var d=a,e="";null!=e;)e=StringOperators.getFirstTextBetweenStrings(d,"<fs",">"),null!=e&&(d=d.replace("<fs"+e+">",'<font style="font-size:'+Number(e)+'px">')),-1==d.indexOf(">")&&(e=null);for(e="";null!=e;)e=StringOperators.getFirstTextBetweenStrings(d,"<ff",">"),null!=e&&(d=d.replace("<ff"+e+">",'<font face="'+e+'">'));for(d=d.replace(/Â¬/,"<br/>"),d=d.replace(/<fcBlack>/g,'<font color="#000000">'),d=d.replace(/<fcWhite>/g,'<font color="#FFFFFF">'),d=d.replace(/<fcRed>/g,'<font color="#FF0000">'),d=d.replace(/<fcGreen>/g,'<font color="#00FF00">'),d=d.replace(/<fcBlue>/g,'<font color="#0000FF">'),d=d.replace(/<fcOrange>/g,'<font color="#FFAA00">'),d=d.replace(/<fcCyan>/g,'<font color="#00FFFF">'),d=d.replace(/<fcYellow>/g,'<font color="#FFFF00">'),d=d.replace(/<fcMagenta>/g,'<font color="#FF00FF">'),e="";null!=e;)e=StringOperators.getFirstTextBetweenStrings(d,"<fcuint",">"),null!=e&&(d=d.replace("<fcuint"+e+">",'<font color="'+ColorOperators.uinttoHEX(e)+'">'));for(e="";null!=e;)if(e=StringOperators.getFirstTextBetweenStrings(d,"<frgb",">"),null!=e){var f=e.split(".");d=d.replace("<frgb"+e+">",'<font color="'+ColorOperators.RGBtoHEX(Number(f[0]),Number(f[1]),Number(f[2]))+'">')}for(e="";null!=e;)e=StringOperators.getFirstTextBetweenStrings(d,"<fc",">"),null!=e&&(d=d.replace("<fc"+e+">",'<font color="#'+e+'">'));for(e="";null!=e;)e=StringOperators.getFirstTextBetweenStrings(d,"<tl",">"),null!=e&&(d=d.replace("<tl"+e+">",'<textformat leftmargin="'+e+'">'));for(e="";null!=e;)e=StringOperators.getFirstTextBetweenStrings(d,"<tv",">"),null!=e&&(d=d.replace("<tv"+e+">",'<textformat leading="'+e+'">'));e="";for(var g,h,i;null!=e;)e=StringOperators.getFirstTextBetweenStrings(d,"<e",">"),null!=e&&(g=e.split("*")[0],h=e.split("*")[1],i=e.split("*").length>2&&"s"==e.split("*")[2]?"_self":"_blank",d="http://"==g.substr(0,7)||"https://"==g.substr(0,8)?d.replace("<e"+e+">","<u><a href='"+g+"' target='"+i+"'>"+h+"</a></u>"):d.replace("<e"+e+">","<u><a href='javascript:FastHtml.clickLink(\""+g+"\")' FastHtml.onclick='event.preventDefault(); clickLink(\""+g+"\"); return false; '>"+h+"</a></u>"));
return d=d.replace(/<pl>/g,'<p align="left">'),d=d.replace(/<pc>/g,'<p align="center">'),d=d.replace(/<pr>/g,'<p align="right">'),d=d.replace(/<pj>/g,'<p align="justify">'),d=d.replace(/<\/f>/g,"</font>"),d=d.replace(/<\/t>/g,"</textformat>")},a.clickLink=function(b){a.linkFunction.call(a.target,b)},a.findAndPlaceLinks=function(b){var c=a._findAndPlaceLinksPrefix(b,"http");return a._findAndPlaceLinksPrefix(c,"https")},a._findAndPlaceLinksPrefix=function(a,b){var c="http"==b?/http:\/\//g:/https:\/\//g,d=a.split(c);if(d.length>1){var e,f,g=[];g[0]=d[0];for(var h=1;null!=d[h];h++)e=d[h].search(/ |:|;/),e>-1?(f=b+"://"+d[h].substr(0,e),g[h]="<e"+f+"*"+f+">"+d[h].substr(e)):(f=b+"://"+d[h].substr(0),g[h]="<e"+f+"*"+f+">")}return 0==d.length||1==d.length?a:g.join("")},a.findAndPlaceTwitterAdresses=function(a){var b=a.split(/@/g);if(b.length>1){var c,d,e,f=[];f[0]=b[0];for(var g=1;null!=b[g];g++)c=b[g].search(/ |:|;/),c>-1?(e=b[g].substr(0,c),d="https://twitter.com/"+e,f[g]="<e"+d+"*@"+e+">"+b[g].substr(c)):(e=b[g].substr(0),d="https://twitter.com/"+e,f[g]="<e"+d+"*@"+e+">")}return 0==b.length||1==b.length?a:f.join("")},a.getColorTag=function(a){return a=ColorOperators.colorStringToHEX(a),'<font color="'+a+'">'}}),define("src/tools/utils/strings/JSONUtils",function(){"use strict";function a(){}a.stringifyAndPrint=function(a){var b=JSON.stringify(a);c.log("__________________________________________________________________________________________________________________________________________________________"),c.log(b),c.log("__________________________________________________________________________________________________________________________________________________________")},a.dummy2=function(){return null}}),define("src/tools/utils/strings/MD5",function(){"use strict";function a(){}a.hex_md5=function(a){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(a)))},a.b64_md5=function(a){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(a)))},a.any_md5=function(a,b){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(a)),b)},a.hex_hmac_md5=function(a,b){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(a),this.str2rstr_utf8(b)))},a.b64_hmac_md5=function(a,b){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(a),this.str2rstr_utf8(b)))},a.any_hmac_md5=function(a,b,c){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(a),this.str2rstr_utf8(b)),c)},a.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},a.rstr_md5=function(a){return this.binl2rstr(this.binl_md5(this.rstr2binl(a),8*a.length))},a.rstr_hmac_md5=function(a,b){var c=rstr2binl(a);c.length>16&&(c=this.binl_md5(c,8*a.length));for(var d=Array(16),e=Array(16),f=0;16>f;f++)d[f]=909522486^c[f],e[f]=1549556828^c[f];var g=this.binl_md5(d.concat(this.rstr2binl(b)),512+8*b.length);return this.binl2rstr(this.binl_md5(e.concat(g),640))},a.rstr2hex=function(a){var b=0;try{}catch(c){b=0}for(var d,e=b?"0123456789ABCDEF":"0123456789abcdef",f="",g=0;g<a.length;g++)d=a.charCodeAt(g),f+=e.charAt(d>>>4&15)+e.charAt(15&d);return f},a.rstr2b64=function(a){var b="";try{}catch(c){b=""}for(var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e="",f=a.length,g=0;f>g;g+=3)for(var h=a.charCodeAt(g)<<16|(f>g+1?a.charCodeAt(g+1)<<8:0)|(f>g+2?a.charCodeAt(g+2):0),i=0;4>i;i++)e+=8*g+6*i>8*a.length?b:d.charAt(h>>>6*(3-i)&63);return e},a.rstr2any=function(a,b){var c,d,e,f,g,h=b.length,i=Array(Math.ceil(a.length/2));for(c=0;c<i.length;c++)i[c]=a.charCodeAt(2*c)<<8|a.charCodeAt(2*c+1);var j=Math.ceil(8*a.length/(Math.log(b.length)/Math.log(2))),k=Array(j);for(d=0;j>d;d++){for(g=Array(),f=0,c=0;c<i.length;c++)f=(f<<16)+i[c],e=Math.floor(f/h),f-=e*h,(g.length>0||e>0)&&(g[g.length]=e);k[d]=f,i=g}var l="";for(c=k.length-1;c>=0;c--)l+=b.charAt(k[c]);return l},a.str2rstr_utf8=function(a){for(var b,c,d="",e=-1;++e<a.length;)b=a.charCodeAt(e),c=e+1<a.length?a.charCodeAt(e+1):0,b>=55296&&56319>=b&&c>=56320&&57343>=c&&(b=65536+((1023&b)<<10)+(1023&c),e++),127>=b?d+=String.fromCharCode(b):2047>=b?d+=String.fromCharCode(192|b>>>6&31,128|63&b):65535>=b?d+=String.fromCharCode(224|b>>>12&15,128|b>>>6&63,128|63&b):2097151>=b&&(d+=String.fromCharCode(240|b>>>18&7,128|b>>>12&63,128|b>>>6&63,128|63&b));return d},a.str2rstr_utf16le=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(255&a.charCodeAt(c),a.charCodeAt(c)>>>8&255);return b},a.str2rstr_utf16be=function(a){for(var b="",c=0;c<a.length;c++)b+=String.fromCharCode(a.charCodeAt(c)>>>8&255,255&a.charCodeAt(c));return b},a.rstr2binl=function(a){for(var b=Array(a.length>>2),c=0;c<b.length;c++)b[c]=0;for(var c=0;c<8*a.length;c+=8)b[c>>5]|=(255&a.charCodeAt(c/8))<<c%32;return b},a.binl2rstr=function(a){for(var b="",c=0;c<32*a.length;c+=8)b+=String.fromCharCode(a[c>>5]>>>c%32&255);return b},a.binl_md5=function(a,b){a[b>>5]|=128<<b%32,a[(b+64>>>9<<4)+14]=b;for(var c=1732584193,d=-271733879,e=-1732584194,f=271733878,g=0;g<a.length;g+=16){var h=c,i=d,j=e,k=f;c=this.md5_ff(c,d,e,f,a[g+0],7,-680876936),f=this.md5_ff(f,c,d,e,a[g+1],12,-389564586),e=this.md5_ff(e,f,c,d,a[g+2],17,606105819),d=this.md5_ff(d,e,f,c,a[g+3],22,-1044525330),c=this.md5_ff(c,d,e,f,a[g+4],7,-176418897),f=this.md5_ff(f,c,d,e,a[g+5],12,1200080426),e=this.md5_ff(e,f,c,d,a[g+6],17,-1473231341),d=this.md5_ff(d,e,f,c,a[g+7],22,-45705983),c=this.md5_ff(c,d,e,f,a[g+8],7,1770035416),f=this.md5_ff(f,c,d,e,a[g+9],12,-1958414417),e=this.md5_ff(e,f,c,d,a[g+10],17,-42063),d=this.md5_ff(d,e,f,c,a[g+11],22,-1990404162),c=this.md5_ff(c,d,e,f,a[g+12],7,1804603682),f=this.md5_ff(f,c,d,e,a[g+13],12,-40341101),e=this.md5_ff(e,f,c,d,a[g+14],17,-1502002290),d=this.md5_ff(d,e,f,c,a[g+15],22,1236535329),c=this.md5_gg(c,d,e,f,a[g+1],5,-165796510),f=this.md5_gg(f,c,d,e,a[g+6],9,-1069501632),e=this.md5_gg(e,f,c,d,a[g+11],14,643717713),d=this.md5_gg(d,e,f,c,a[g+0],20,-373897302),c=this.md5_gg(c,d,e,f,a[g+5],5,-701558691),f=this.md5_gg(f,c,d,e,a[g+10],9,38016083),e=this.md5_gg(e,f,c,d,a[g+15],14,-660478335),d=this.md5_gg(d,e,f,c,a[g+4],20,-405537848),c=this.md5_gg(c,d,e,f,a[g+9],5,568446438),f=this.md5_gg(f,c,d,e,a[g+14],9,-1019803690),e=this.md5_gg(e,f,c,d,a[g+3],14,-187363961),d=this.md5_gg(d,e,f,c,a[g+8],20,1163531501),c=this.md5_gg(c,d,e,f,a[g+13],5,-1444681467),f=this.md5_gg(f,c,d,e,a[g+2],9,-51403784),e=this.md5_gg(e,f,c,d,a[g+7],14,1735328473),d=this.md5_gg(d,e,f,c,a[g+12],20,-1926607734),c=this.md5_hh(c,d,e,f,a[g+5],4,-378558),f=this.md5_hh(f,c,d,e,a[g+8],11,-2022574463),e=this.md5_hh(e,f,c,d,a[g+11],16,1839030562),d=this.md5_hh(d,e,f,c,a[g+14],23,-35309556),c=this.md5_hh(c,d,e,f,a[g+1],4,-1530992060),f=this.md5_hh(f,c,d,e,a[g+4],11,1272893353),e=this.md5_hh(e,f,c,d,a[g+7],16,-155497632),d=this.md5_hh(d,e,f,c,a[g+10],23,-1094730640),c=this.md5_hh(c,d,e,f,a[g+13],4,681279174),f=this.md5_hh(f,c,d,e,a[g+0],11,-358537222),e=this.md5_hh(e,f,c,d,a[g+3],16,-722521979),d=this.md5_hh(d,e,f,c,a[g+6],23,76029189),c=this.md5_hh(c,d,e,f,a[g+9],4,-640364487),f=this.md5_hh(f,c,d,e,a[g+12],11,-421815835),e=this.md5_hh(e,f,c,d,a[g+15],16,530742520),d=this.md5_hh(d,e,f,c,a[g+2],23,-995338651),c=this.md5_ii(c,d,e,f,a[g+0],6,-198630844),f=this.md5_ii(f,c,d,e,a[g+7],10,1126891415),e=this.md5_ii(e,f,c,d,a[g+14],15,-1416354905),d=this.md5_ii(d,e,f,c,a[g+5],21,-57434055),c=this.md5_ii(c,d,e,f,a[g+12],6,1700485571),f=this.md5_ii(f,c,d,e,a[g+3],10,-1894986606),e=this.md5_ii(e,f,c,d,a[g+10],15,-1051523),d=this.md5_ii(d,e,f,c,a[g+1],21,-2054922799),c=this.md5_ii(c,d,e,f,a[g+8],6,1873313359),f=this.md5_ii(f,c,d,e,a[g+15],10,-30611744),e=this.md5_ii(e,f,c,d,a[g+6],15,-1560198380),d=this.md5_ii(d,e,f,c,a[g+13],21,1309151649),c=this.md5_ii(c,d,e,f,a[g+4],6,-145523070),f=this.md5_ii(f,c,d,e,a[g+11],10,-1120210379),e=this.md5_ii(e,f,c,d,a[g+2],15,718787259),d=this.md5_ii(d,e,f,c,a[g+9],21,-343485551),c=this.safe_add(c,h),d=this.safe_add(d,i),e=this.safe_add(e,j),f=this.safe_add(f,k)}return Array(c,d,e,f)},a.md5_cmn=function(a,b,c,d,e,f){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(b,a),this.safe_add(d,f)),e),c)},a.md5_ff=function(a,b,c,d,e,f,g){return this.md5_cmn(b&c|~b&d,a,b,e,f,g)},a.md5_gg=function(a,b,c,d,e,f,g){return this.md5_cmn(b&d|c&~d,a,b,e,f,g)},a.md5_hh=function(a,b,c,d,e,f,g){return this.md5_cmn(b^c^d,a,b,e,f,g)},a.md5_ii=function(a,b,c,d,e,f,g){return this.md5_cmn(c^(b|~d),a,b,e,f,g)},a.safe_add=function(a,b){var c=(65535&a)+(65535&b),d=(a>>16)+(b>>16)+(c>>16);return d<<16|65535&c},a.bit_rol=function(a,b){return a<<b|a>>>32-b}}),define("src/tools/utils/strings/StringUtils",function(){"use strict";function a(){}a.stringtoXML=function(a){if(window.ActiveXObject){var b=new ActiveXObject("Microsoft.XMLDOM");b.async="false",b.loadXML(a)}else var c=new DOMParser,b=c.parseFromString(a,"text/xml");return b}}),define("src/tools/utils/system/Navigator",function(){"use strict";function a(){}var b,c;a.IE="IE",a.NS="NS",a.IOS="IOS",detectUserAgent=function(){/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&(b=a.IE,c=Number(RegExp.$1)),null!=navigator.userAgent.match(/iPad/i)&&(b=a.IOS),/Firefox[\/\s](\d+\.\d+)/.test(navigator.userAgent)&&(b=a.NS,c=Number(RegExp.$1))},a.getUserAgent=function(){return b},a.getUserAgentVersion=function(){return c}}),define("src/visualization/geo/CountryListDraw",function(){"use strict";function a(){}a.drawCountriesAsCircles=function(a,b,c,d,e,f){e=null==e?new Rectangle(-180,-90,360,180):e,f=null==f?ColorListGenerators.createColorListWithSingleColor(b.length,"rgba(100,100,100,0.6)"):f;for(var g,h=d.width/e.width,i=d.height/e.height,j=0;null!=b[j];j++)c[j]<.5||(g=b[j],a.fillStyle=f[j],a.beginPath(),a.arc(d.x+h*(g.geoCenter.x-e.x),d.getBottom()-i*(g.geoCenter.y-e.y),c[j],0,TwoPi),a.fill())},a.drawCountriesPolygons=function(a,b,c,d,e,f,g){d=null==d?new Rectangle(-180,-90,360,180):d,e=null==e?ColorListGenerators.createColorListWithSingleColor(b.length,"rgba(100,100,100,0.6)"):e;var h,i,j,k=c.width/d.width,l=c.height/d.height;null!=f&&(a.lineWidth=f),null!=g&&(a.strokeStyle=g);for(var m=0;null!=b[m];m++){h=b[m],i=h.polygonList,a.fillStyle=e[m];for(var n=0;null!=i[n];n++){j=i[n],a.beginPath(),a.moveTo(c.x+k*(j[0].x-d.x),c.getBottom()-l*(j[0].y-d.y));for(var o=1;null!=j[o];o++)a.lineTo(c.x+k*(j[o].x-d.x),c.getBottom()-l*(j[o].y-d.y));a.fill(),null!=f&&a.stroke()}}}}),define("src/visualization/geometry/CirclesVisOperators",function(){"use strict";function a(){}a.circlesCloud=function(b,d,e){if(null==b||0==b.length)return null;e=null==e?0:e;var f=b.getNormalizedToMax().sqrt(),g=new Polygon3D;c.l("  o",b.length,f);for(var h,i,j=0,k=0,l=0,m=0,n=d.getCenter(),o=100*f[0],p=d.width/d.height,q=0;null!=f[q];q++){if(h=100*f[q],0==q)l=n.x,m=n.y,i=h;else{for(j=0,k=i+h+e+.1;a._pointInCircles(g,l,m,h,e);)k+=.1,j+=.005*k,l=n.x+p*k*Math.cos(j),m=n.y+k*Math.sin(j);o=Math.max(o,p*k+100*f[q])}g[q]=new Point3D(l,m,h)}var r;for(p=.5*d.width/(o+.001),q=0;null!=g[q];q++)r=g[q],r.x=n.x+(r.x-n.x)*p,r.y=n.y+(r.y-n.y)*p,r.z*=p;return g},a._pointInCircles=function(a,b,c,d,e){for(var f,g=0;null!=a[g];g++)if(f=a[g],Math.pow(f.x-b,2)+Math.pow(f.y-c,2)<Math.pow(f.z+d+e,2))return!0;return!1}}),define("src/visualization/graphic/ColorsDraw",function(){"use strict";function a(){}a.drawColorScaleLegend=function(a,b,c,d){var e=null==a.memory||a.width!=a.memory.w||a.height!=a.memory.h||b!=a.memory.cS||c!=a.memory.min||d!=a.memory.max;if(e){a.memory={w:a.width,h:a.height,cS:b,min:c,max:d};var f=document.createElement("canvas");f.width=a.width,f.height=a.height;var g=f.getContext("2d");g.clearRect(0,0,a.width,a.height);var h=context;context=g;var i;if(a.width>a.height){for(i=0;i<a.width;i+=2)setFill(b(i/a.width)),fRect(i,0,2,a.height);setStroke("rgba(0,0,0,0.8)",3),null!=c&&(setText("white",12,null,"left","middle"),fsText(c,2,.5*a.height)),null!=d&&(setText("white",12,null,"right","middle"),fsText(d,a.width-2,.5*a.height))}else for(i=0;i<a.height;i+=2)setFill(b(i/a.height)),fRect(0,i,a.width,2);context=h,a.memory.image=new Image,a.memory.image.src=f.toDataURL()}a.memory.image&&drawImage(a.memory.image,a.x,a.y)}}),define("src/visualization/graphic/ImageDraw",function(){"use strict";function a(){}a.drawImage=function(a,b,c){c=c||0,Draw.fillRectangleWithImage(a,b,c)},a.captureVisualizationImage=function(a,b,d){if(c.log("visFunctionName",a),!(null==a||null==b||!b>0||null==d)&&d>0){var e=new Rectangle(0,0,b,d),f=Array.prototype.slice.call(arguments);f=[e].concat(f.slice(3));var g;if(-1==a.indexOf("."))g=this[a];else{if(c.log(a.split(".")[0],this[a.split(".")[0]],this.mY),null==this[a.split(".")[0]])return;g=this[a.split(".")[0]][a.split(".")[1]]}if(null==g)return null;c.log("ImageDraw.captureVisualizationImage | args",f),c.log("ImageDraw.captureVisualizationImage | visFunction==null",null==g);var h=document.createElement("canvas");h.width=b,h.height=d;var i=h.getContext("2d");i.clearRect(0,0,b,d);var j=context;context=i,g.apply(this,f),context=j;var k=new Image;return k.src=h.toDataURL(),k}}}),define("src/visualization/lists/ListDraw",function(){"use strict";function a(){}a.drawList=function(a,b,c,d,e,f,g){if(!(null==b||!b.length>0)){e=e||14,c=null==c?0:c,null==a.memory&&(a.memory={selected:0,y:0,multiSelected:new List});var h=a.memory.list!=b,i=h&&null!=g||a.memory.selectedInit!=g;i&&(3==c?(a.memory.multiSelected=new List,g.forEach(function(c){a.memory.multiSelected.push(b[c])})):2==c?a.memory.multiSelected=List.fromArray(g).getImproved():a.memory.selected=g,a.memory.selectedInit=g),h&&(a.memory.list=b);var j,k,l,m,n,o,p=a.x+5,q=p+(d?15:0),r=e+4,s=b.length,t=a.getBottom(),u=a.containsPoint(mP),v=0,w=2==c||3==c,x=b.length*r;for(x<=a.height-20?l=a.y+10:(v=u?Math.min(10-(x-a.height+20)*((mY-(a.y+10))/(a.height-20)),10):10-(x-a.height+20)*a.memory.selected/b.length,a.memory.y=.95*a.memory.y+.05*v,l=a.y+a.memory.y),setText("black",e),j=0;null!=b[j];j++)if(k=l+r*j,!(k<a.y)){if(k+12>t)break;-1!=c?(n=a.memory.multiSelected.indexOf(j),o=w&&-1!=n,m=w?o:a.memory.selected==j,m?(setFill("black"),fRect(a.x+2,k,a.width-4,r),setFill("white")):setFill("black"),fText(b[j].toString(),q,k+2),u&&mY>=k&&mY<k+r&&(setFill("rgba(150,150,150,0.3)"),fRectM(a.x+2,k,a.width-4,r)&&setCursor("pointer"),MOUSE_DOWN&&(w?o?a.memory.multiSelected=a.memory.multiSelected.getWithoutElementAtIndex(n):(a.memory.multiSelected=a.memory.multiSelected.clone(),a.memory.multiSelected.push(2==c?j:b[j]),a.memory.multiSelected=a.memory.multiSelected.getImproved()):a.memory.selected=j))):setFill("black"),d&&(setFill(null==d?"rgb(200, 200, 200)":d[j%s]),fRect(p,k+4,10,10))}return 1==c?b[a.memory.selected]:w?a.memory.multiSelected:a.memory.selected}}}),define("src/visualization/numeric/IntervalTableDraw",function(){"use strict";function a(){}a.MIN_CHARACTERS_SIZE=1,a.drawIntervalsFlowTable=function(a,b,c,d,e){b=null==b?new Rectangle(10,10,400,300):b,c=null==c?ColorListGenerators.createCategoricalColors(0,a.length,ColorScales.temperature):c,d=d||!1,e=null==e?.45:e;var f,g,h,i,j,k,l=a.length,m=a[0].length,n=b.width/(m-1),o=b.height,p=(a[l-1],0),q=b.x,r=b.y;for(f=0;null!=a[f];f++){for(i=a[f],context.fillStyle=c[f],context.beginPath(),p=r,h=new Point(q,i[0].y*o+p),context.moveTo(h.x,h.y),j=h,g=1;m>g;g++)p=r,h=new Point(g*n+q,i[g].y*o+p),d?(k=(h.x-j.x)*e,context.bezierCurveTo(j.x+k,j.y,h.x-k,h.y,h.x,h.y)):context.lineTo(h.x,h.y),j=h;for(h=new Point((m-1)*n+q,i[m-1].x*o+p),context.lineTo(h.x,h.y),j=h,g=m-2;g>=0;g--)p=r,h=new Point(g*n+q,i[g].x*o+p),d?(k=(h.x-j.x)*e,context.bezierCurveTo(j.x+k,j.y,h.x-k,h.y,h.x,h.y)):context.lineTo(h.x,h.y),j=h;h=new Point(q,i[0].x*o+p),context.lineTo(h.x,h.y),context.fill()}},a._isOnShape=function(a,b,c,d,e,f,g){var h=(f-a.x)/(b.x-a.x),i=1-h;this.p0.x=a.x+h*e,this.p0.y=a.y,this.p1.x=i*(a.x+e)+h*(b.x-e),this.p1.y=i*a.y+h*b.y,this.p2.x=b.x-i*e,this.p2.y=b.y,this.P0.x=i*this.p0.x+h*this.p1.x,this.P0.y=i*this.p0.y+h*this.p1.y,this.P1.x=i*this.p1.x+h*this.p2.x,this.P1.y=i*this.p1.y+h*this.p2.y;var j=i*this.P0.y+h*this.P1.y;this.p0.y=c,this.p1.y=i*c+h*d,this.p2.y=d,this.P0.y=i*this.p0.y+h*this.p1.y,this.P1.y=i*this.p1.y+h*this.p2.y;var k=i*this.P0.y+h*this.P1.y;return g>k&&j>g},a.drawCircularIntervalsFlowTable=function(a,b,c,d,e,f,g,h,i){var j,k,l=a.length;e=null==e?ColorListOperators.colorListFromColorScale(new ColorScale(ColorOperators.temperatureScale),l):e,b=null==b?new Point(100,100):b,c=null==c?200:c,d=null==d?10:d,i=null==i?0:i;var m,n,o,p,q,r,s,t,p,u,v=a[0].length,w=TwoPi/v,x=c-d,y=(a[l-1],.3*w),z=Math.cos(y),A=-1,B=[],C=[],D=[],E=[],F=[];for(j=0;l>j;j++){for(n=a[j],context.fillStyle=e[j%l],context.beginPath(),m=new Point(null==h?0:h[0]+i,(1-n[0].y)*x+d),context.moveTo(m.y*Math.cos(m.x)+b.x,m.y*Math.sin(m.x)+b.y),r=m,k=1;v>=k;k++)o=n[k%v],m=new Point(null==h?k*w:h[k%v]+i,(1-o.y)*x+d),s=r.y/z,t=m.y/z,context.bezierCurveTo(s*Math.cos(r.x+y)+b.x,s*Math.sin(r.x+y)+b.y,t*Math.cos(m.x-y)+b.x,t*Math.sin(m.x-y)+b.y,m.y*Math.cos(m.x)+b.x,m.y*Math.sin(m.x)+b.y),g&&-1==A&&this._isOnRadialShape(b,mP,r.x,m.x,x*(1-n[(k-1)%v].y)+d,x*(1-n[(k-1)%v].x)+d,x*(1-n[k%v].y)+d,x*(1-n[k%v].x)+d)&&(A=j),r=m,null!=f&&(p=o.getAmplitude(),q=Math.min(3*Math.sqrt(p*c),28),q>=8&&(u=m.y+.5*p*x,E.push(q),F.push(m.x+.5*Math.PI),C.push(u*Math.cos(m.x)+b.x),D.push(u*Math.sin(m.x)+b.y),B.push(f[j])));for(m=new Point(null==h?0:h[0]+i,(1-n[0].x)*x+d),context.lineTo(m.y*Math.cos(m.x)+b.x,m.y*Math.sin(m.x)+b.y),r=m,k=v-1;k>=0;k--)m=new Point(null==h?k*w:h[k]+i,(1-n[k].x)*x+d),s=r.y/z,t=m.y/z,context.bezierCurveTo(s*Math.cos(r.x-y)+b.x,s*Math.sin(r.x-y)+b.y,t*Math.cos(m.x+y)+b.x,t*Math.sin(m.x+y)+b.y,m.y*Math.cos(m.x)+b.x,m.y*Math.sin(m.x)+b.y),r=m;m=new Point(null==h?0:h[0]+i,(1-n[0].x)*x+d),context.lineTo(m.y*Math.cos(m.x)+b.x,m.y*Math.sin(m.x)+b.y),context.fill()}for(j=0;null!=B[j];j++)setText("black",E[j],null,"center","middle"),fTextRotated(B[j],C[j],D[j],F[j]);return A},a._isOnRadialShape=function(a,b,c,d,e,f,g,h){c>d&&(d+=TwoPi);var i=a.angleToPoint(b);if(0>i&&(i+=TwoPi),i>TwoPi&&(i-=TwoPi),i+TwoPi<d&&(i+=TwoPi),i-TwoPi>c&&(i-=TwoPi),c>i||i>d)return!1;var j=d-c,k=(i-c)/j,l=GeometryOperators.bezierCurvePoints(c,e,c+.5*j,e,d-.5*j,g,d,g,k),m=GeometryOperators.bezierCurvePoints(c,f,c+.25*j,f,d-.25*j,h,d,h,k);return r=b.subtract(a).getNorm(),r>l.y&&r<m.y},a.drawIntervalsWordsFlowTable=function(b,c,d,e,f){var g,h,i=c.length;e=null==e?ColorListGenerators.createCategoricalColors(0,c.length,ColorScales.temperature):e,b=null==b?new Rectangle(10,10,400,300):b;var j,k,l,m,n,o,p,q=c[0].length,r=b.width/(q-1),s=b.height,t=new Point,u=new Point,v=c[i-1],w=0,x=b.x,y=b.y;f||(context.strokeStyle="rgba(255,255,255,0.4)"),context.textBaseline="top",context.textAlign="left";var z,A,B,C,D,E,F,G,H,I,o,J,K,L=r,M=(q-1)/b.width;for(g=0;null!=c[g];g++){n=c[g],p=" "+d[g],A=0,F=0,z=0,h=0,B=0,w=.5*(1-v[0].y)*s+y,j=new Point(x,n[0].x*s+w),k=new Point(x,n[0].y*s+w);do F++,m=k.y-j.y,I=Math.floor(.3*m+1),f||(context.font=I+"px "+LOADED_FONT),G=p.charAt(F%p.length),H=f?I*widthsTypode[G]:context.measureText(G).width+2,L=.9*H||1,A+=L,z=M*A,h=Math.floor(z),B=z-h,h+2>q||(J=h/M,K=(h+1)/M,o=.45*M,C=a._bezierValue(J,K,v[h].y,v[h+1].y,B,o),prevsY=w,w=.5*(1-C)*s+y,t.x=j.x,t.y=j.y,u.x=k.x,u.y=k.y,D=a._bezierValue(J,K,n[h].x,n[h+1].x,B,o),E=a._bezierValue(J,K,n[h].y,n[h+1].y,B,o),j=new Point(A+x,D*s+w),k=new Point(A+x,E*s+w),l=new Point(t.x+.5*L,.25*(j.y+k.y+t.y+u.y)),f?context.strokeStyle=e[g]:context.fillStyle=e[g],m>a.MIN_CHARACTERS_SIZE&&(f?DrawTextsAdvanced.typodeOnQuadrilater(G,t,j,k,u):(context.save(),context.globalAlpha=m/15,DrawTextsAdvanced.textOnQuadrilater(context,G,t,j,k,u,I,1),context.restore())));while(q>h+1)}},a._bezierValue=function(a,b,c,d,e,f){var g=1-e,h=new Point(a+e*f,c),i=new Point(g*(a+f)+e*(b-f),g*c+e*d),j=new Point(b-g*f,d),k=new Point(g*h.x+e*i.x,g*h.y+e*i.y),l=new Point(g*i.x+e*j.x,g*i.y+e*j.y);return g*k.y+e*l.y}}),define("src/visualization/numeric/NumberListDraw",function(){"use strict";NumberListDraw=function(){},NumberListDraw.drawSimpleGraph=function(a,b,c,d){if(null!=b&&null!=b.getNormalized){if(c=c||0,null==a.memory||b!=a.memory.numberList){if(a.memory={numberList:b,minmax:b.getMinMaxInterval(),zero:null},a.memory.minmax.x>0&&a.memory.minmax.y>0?a.memory.normalizedList=b.getNormalizedToMax():(a.memory.normalizedList=b.getNormalized(),a.memory.zero=-a.memory.minmax.x/a.memory.minmax.getAmplitude()),a.memory.xTexts=new StringList,null!=d&&"Interval"==d.type)var e=(d.getAmplitude()+1)/b.length;b.forEach(function(c,f){a.memory.xTexts[f]=null==d?String(b[f]):(null==e?d[f]:d.x+f*e)+":"+b[f]})}var f,g=new Rectangle(a.x+c,a.y+c,a.width-2*c,a.height-2*c);g.bottom=g.getBottom();var h,i=g.width/b.length,j=-1,k=g.containsPoint(mP),l=k?"rgb(160,160,160)":"black";if(a.memory.zero){var m=g.bottom-g.height*a.memory.zero;for(f=0;null!=b[f];f++)h=g.x+f*i,k&&mX>h&&mX<h+i?(j=f,setFill("black")):setFill(l),fRect(g.x+f*i,m,i,-g.height*(a.memory.normalizedList[f]-a.memory.zero))}else for(f=0;null!=b[f];f++)h=g.x+f*i,k&&mX>h&&mX<h+i?(j=f,setFill("black")):setFill(l),fRect(h,g.bottom,i,-g.height*a.memory.normalizedList[f]);var n;if(-1!=j){setText("white",12);var o=a.memory.xTexts[j],p=getTextW(o);setFill("rgb(100,100,100)"),fLines(mX,mY,mX+16,mY-10,mX+p+16,mY-10,mX+p+16,mY-30,mX+6,mY-30,mX+6,mY-10),setFill("white"),fText(o,mX+10,mY-26),MOUSE_DOWN&&(n=j)}return n}}}),define("src/visualization/numeric/NumberTableDraw",function(){"use strict";function a(){}a.drawNumberTable=function(a,b,c,d,e){if(null==a||null==b||null==b.type||"NumberTable"!=b.type||b.length<2)return null;c=null==c?ColorScales.blueToRed:c,d=d||!1,e=null==e?2:e;var f,g,h,i,j,k,l,m=a.width/b.length,n=a.height/b[0].length;d||(k=b.getMinMaxInterval(),l=k.getAmplitude());var o;for(f=0;null!=b[f];f++)for(h=b[f],i=Math.round(a.x+f*m),o=mX>i&&mX<=i+m,d&&(k=h.getMinMaxInterval(),l=k.getAmplitude()),g=0;null!=h[g];g++)context.fillStyle=c((h[g]-k.x)/l),context.fillRect(i,Math.round(a.y+g*n),Math.ceil(m)-e,Math.ceil(n)-e),o&&mY>a.y+g*n&&mY<=a.y+(g+1)*n&&(j=new Point(f,g));return j},a.drawSimpleScatterPlot=function(b,c,d,e,f,g,h){if(!(null==b||null==c||"NumberTable"!=c.type||c.length<2||0==c[0].length||0==c[1].length||c.length<2)){f=f||20,g=g||!1,h=h||0;var i=new Rectangle(b.x+h,b.y+h,b.width-2*h,b.height-2*h);i.bottom=i.getBottom();var j,k,l,m,n=(g?c[0].log(1):c[0]).getNormalized(),o=(g?c[1].log(1):c[1]).getNormalized(),p=c.length<=2?null:c[2].getNormalized().sqrt().factor(f),q=null==e?null:e.length,r=Math.min(n.length,o.length,null==p?3e5:p.length,null==d?3e5:d.length);for(j=0;r>j;j++)k=i.x+n[j]*i.width,l=i.bottom-o[j]*i.height,null==p?a._drawCrossScatterPlot(k,l,null==e?"rgb(150,150,150)":e[j%q])&&(m=j):(setFill(null==e?"rgb(150,150,150)":e[j%q]),fCircleM(k,l,p[j],p[j]+1)&&(m=j)),null!=d&&(setText("black",10),fText(d[j],k,l));return h>7&&""!=n.name&&""!=o.name&&(setText("black",10,null,"right","middle"),fText(n.name,i.getRight()-2,i.bottom+.5*h),fTextRotated(o.name,i.x-.5*h,i.y+1,-HalfPi)),null!=m?(setCursor("pointer"),m):void 0}},a._drawCrossScatterPlot=function(a,b,c){return setStroke(c,1),line(a,b-2,a,b+2),line(a-2,b,a+2,b),Math.pow(mX-a,2)+Math.pow(mY-b,2)<25},a.drawSlopeGraph=function(a,b,c){if(null!=a&&null!=b&&"NumberTable"==b.type&&!(b.length<2)){var d=16,e=new Rectangle(a.x+d,a.y+d,a.width-2*d,a.height-2*d);e.bottom=e.getBottom();var f,g,h,i=b[0].getNormalized(),j=b[1].getNormalized(),k=Math.min(i.length,j.length,null==c?2e3:c.length),l=e.x+(null==c?10:.25*e.width),m=e.getRight()-(null==c?10:.25*e.width);for(setStroke("black",1),f=0;k>f;f++)g=e.bottom-i[f]*e.height,h=e.bottom-j[f]*e.height,line(l,g,m,h),null!=c&&e.bottom-g>=9&&(setText("black",9,null,"right","middle"),fText(c[f],l-2,g)),null!=c&&e.bottom-h>=9&&(setText("black",9,null,"left","middle"),fText(c[f],m+2,h))}},a.drawDensityMatrix=function(a,b,c,d){if(null!=b&&null!=b[0]){c=null==c?ColorScales.whiteToRed:"string"==typeof c?ColorScales[c]:c,d=d||0;var e,f,g,h,i,j,k;if(null==a.memory||b!=a.memory.coordinates||c!=a.memory.colorScale){var l=null==b[0].x;if(l){var m=b;if(null==m||m.length<2||"NumberTable"!=m.type)return}else var n=b;var o=0,p=0,q=0,r=new NumberTable,s=l?m[0].length:n.length;if(k=new Table,l)i=m[0].getMin(),j=m[1].getMin();else for(i=n[0].x,j=n[0].y,e=1;s>e;e++)i=Math.min(n[e].x,i),j=Math.min(n[e].y,j);for(e=0;s>e;e++)l?(g=Math.floor(m[0][e]-i),h=Math.floor(m[1][e]-j)):(g=Math.floor(n[e].x-i),h=Math.floor(n[e].y-j)),null==r[g]&&(r[g]=new NumberList),null==r[g][h]&&(r[g][h]=0),r[g][h]++,o=Math.max(o,r[g][h]),p=Math.max(p,g+1),q=Math.max(q,h+1);for(e=0;p>e;e++)for(null==r[e]&&(r[e]=new NumberList),k[e]=new ColorList,f=0;q>f;f++)null==r[e][f]&&(r[e][f]=0),k[e][f]=c(r[e][f]/o);a.memory={matrixColors:k,coordinates:b,colorScale:c,selected:null}}else k=a.memory.matrixColors;var t=new Rectangle(a.x+d,a.y+d,a.width-2*d,a.height-2*d);t.bottom=t.getBottom();var u=t.width/k.length,v=t.height/k[0].length,w=a.memory.selected;for(MOUSE_UP_FAST&&(a.memory.selected=null),e=0;null!=k[e];e++)for(f=0;null!=k[0][f];f++)setFill(k[e][f]),fRectM(t.x+e*u,t.bottom-(f+1)*v,u+.5,v+.5)&&MOUSE_UP_FAST&&(a.memory.selected=[e,f]);if(a.memory.selected&&(setStroke("white",5),sRect(t.x+a.memory.selected[0]*u-1,t.bottom-(a.memory.selected[1]+1)*v-1,u+1,v+1),setStroke("black",1),sRect(t.x+a.memory.selected[0]*u-1,t.bottom-(a.memory.selected[1]+1)*v-1,u+1,v+1)),w!=a.memory.selected)if(null==a.memory.selected)a.memory.indexes=null;else for(i=m[0].getMin(),j=m[1].getMin(),g=a.memory.selected[0]+i,h=a.memory.selected[1]+j,a.memory.indexes=new NumberList,e=0;null!=m[0][e];e++)m[0][e]==g&&m[1][e]==h&&a.memory.indexes.push(e);return a.memory.selected?a.memory.indexes:void 0}},a.drawStreamgraph=function(b,c,d,e,f,g,h,i,j,k){if(!(null==c||c.length<2||"NumberTable"!=c.type)){if(g=null==g?!0:g,f=null==f?1:f,null==b.memory||c!=b.memory.numberTable||d!=b.memory.normalized||e!=b.memory.sorted||f!=b.memory.intervalsFactor||g!=b.memory.bezier||b.width!=b.memory.width||b.height!=b.memory.height||k!=b.memory.logFactor){var l=k?c.applyFunction(function(a){return Math.log(k*a+1)}):c;b.memory={numberTable:c,normalized:d,sorted:e,intervalsFactor:f,bezier:g,flowIntervals:IntervalTableOperators.scaleIntervals(NumberTableFlowOperators.getFlowTableIntervals(l,d,e),f),fOpen:1,names:c.getNames(),mXF:mX,width:b.width,height:b.height,logFactor:k,image:null}}h&&b.memory.colorList!=h&&(b.memory.image=null),(b.memory.colorList!=h||null==b.memory.colorList)&&(b.memory.actualColorList=null==h?ColorListGenerators.createDefaultCategoricalColorList(c.length,.7):h,b.memory.colorList=h);var m=new Rectangle(0,0,b.width,null==i?b.height:b.height-14);if(null==b.memory.image){var n=document.createElement("canvas");n.width=b.width,n.height=b.height;var o=n.getContext("2d");o.clearRect(0,0,b.width,b.height);var p=context;context=o,IntervalTableDraw.drawIntervalsFlowTable(b.memory.flowIntervals,m,b.memory.actualColorList,g,.3),context=p,b.memory.image=new Image,b.memory.image.src=n.toDataURL()}if(b.memory.image)if(b.memory.fOpen=.8*b.memory.fOpen+.2*(b.containsPoint(mP)?.8:1),b.memory.mXF=.7*b.memory.mXF+.3*mX,b.memory.mXF=Math.min(Math.max(b.memory.mXF,b.x),b.getRight()),b.memory.fOpen<.999){context.save(),context.translate(b.x,b.y);var q=b.memory.mXF-b.x,r=Math.floor(q*b.memory.fOpen),s=Math.ceil(b.width-(b.width-q)*b.memory.fOpen);drawImage(b.memory.image,0,0,q,m.height,0,0,r,m.height),drawImage(b.memory.image,q,0,b.width-q,m.height,s,0,(b.width-q)*b.memory.fOpen,m.height),a._drawPartialFlow(m,b.memory.flowIntervals,b.memory.names,b.memory.actualColorList,q,r,s,.3,e,j?c:null),context.restore()}else drawImage(b.memory.image,b.x,b.y,b.width,b.height);i&&a._drawHorizontalLabels(b,b.getBottom()-5,c,i,r,s)}},a._drawHorizontalLabels=function(a,b,c,d,e,f){var g,h=a.width/(c[0].length-1),i=Math.min(Math.max(mX,a.x+1),a.getRight()-1),j=(i-a.x)/h,k=Math.round(j);e=null==e?a.x:e+a.x,f=null==f?a.x:f+a.x,d.forEach(function(c,l){setText("black",l==k&&f>e+4?14:10,null,"center","middle"),e>f-5?g=a.x+l*h:k==l?g=.5*(e+f)-(f-e)*(j-k):(g=a.x+l*h,i>g?g=a.x+l*h*a.memory.fOpen:g>i&&(g=a.x+l*h*a.memory.fOpen+(f-e))),fText(d[l],g,b)})},a._drawPartialFlow=function(a,b,c,d,e,f,g,h,i,j){var k,l,m,n,o,p,q,r,s,t,u,v,w,x=g-f,y=null==j?g-f:.85*(g-f),z=b[0].length,A=a.width/(z-1),B=(e-a.x)/A,B=Math.max(Math.min(B,z-1),0),C=Math.floor(B),D=Math.ceil(B),E=h*A,F=-1;for(k=0;null!=b[k];k++)setFill(d[k]),l=b[k][C],m=b[k][D],s=Math.floor(B)*A,t=Math.floor(B+1)*A,u=e,n=GeometryOperators.trueBezierCurveHeightHorizontalControlPoints(s,t,l.x,m.x,s+E,t-E,u),o=GeometryOperators.trueBezierCurveHeightHorizontalControlPoints(s,t,l.y,m.y,s+E,t-E,u)-n,n=n*a.height+a.y,o*=a.height,fRectM(f,n,x,o)&&(F=k),o>=5&&x>40&&(setText("white",o,null,null,"middle"),r=c[k],p=getTextW(r),q=p/y,q>1&&setText("white",o/q,null,null,"middle"),context.fillText(r,f,n+.5*o),j&&(p=getTextW(r),v=Math.min(o,o/q),w=Math.max(.6*v,8),setText("white",w,null,null,"middle"),fText(Math.round(j[k][C]),f+p+.03*x,n+.5*(o+.5*(v-w)))));return F},a.drawCircularStreamgraph=function(a,b,c,d,e,f,g){if(!(null==b||b.length<2||b[0].length<2||"NumberTable"!=b.type)){if(e=null==e?1:e,null==a.memory||b!=a.memory.numberTable||c!=a.memory.normalized||d!=a.memory.sorted||e!=a.memory.intervalsFactor||a.width!=a.memory.width||a.height!=a.memory.height){a.memory={numberTable:b,normalized:c,sorted:d,intervalsFactor:e,flowIntervals:IntervalTableOperators.scaleIntervals(NumberTableFlowOperators.getFlowTableIntervals(b,c,d),e),fOpen:1,names:b.getNames(),mXF:mX,width:a.width,height:a.height,radius:.46*Math.min(a.width,a.height)-(null==g?0:8),r0:.05*Math.min(a.width,a.height),angles:new NumberList,zoom:1,angle0:0,image:null};var h=TwoPi/b[0].length;b[0].forEach(function(b,c){a.memory.angles[c]=c*h})}(a.memory.colorList!=f||null==a.memory.colorList)&&(a.memory.actualColorList=null==f?ColorListGenerators.createDefaultCategoricalColorList(b.length,.4):f,a.memory.colorList=f);var i=a.containsPoint(mP);if(i&&(MOUSE_DOWN&&(a.memory.downX=mX,a.memory.downY=mY,a.memory.pressed=!0,a.memory.zoomPressed=a.memory.zoom,a.memory.anglePressed=a.memory.angle0),a.memory.zoom*=1-.4*WHEEL_CHANGE),MOUSE_UP&&(a.memory.pressed=!1),a.memory.pressed){var j=a.getCenter(),k=a.memory.downX-j.x,l=a.memory.downY-j.y,m=Math.sqrt(Math.pow(k,2)+Math.pow(l,2)),n=mX-j.x,o=mY-j.y,p=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));a.memory.zoom=a.memory.zoomPressed*((p+5)/(m+5));var q=Math.atan2(l,k),r=Math.atan2(o,n);a.memory.angle0=a.memory.anglePressed+r-q}i&&(a.memory.image=null);var s=null==a.memory.image&&!i,t=!i&&null!=a.memory.image&&!s;if(t)drawImage(a.memory.image,a.x,a.y,a.width,a.height);else{if(s){var u=document.createElement("canvas");u.width=a.width,u.height=a.height;var v=u.getContext("2d");v.clearRect(0,0,a.width,a.height);var w=context;context=v;var x=a.x,y=a.y;a.x=0,a.y=0,setFill("white"),fRect(0,0,a.width,a.height)}if(context.save(),clipRectangle(a.x,a.y,a.width,a.height),IntervalTableDraw.drawCircularIntervalsFlowTable(a.memory.flowIntervals,a.getCenter(),a.memory.radius*a.memory.zoom,a.memory.r0,a.memory.actualColorList,a.memory.names,!0,a.memory.angles,a.memory.angle0),context.restore(),g){var z,A=a.memory.radius*a.memory.zoom+8;setText("black",14,null,"center","middle"),g.forEach(function(b,c){z=a.memory.angle0+a.memory.angles[c],fTextRotated(String(b),a.getCenter().x+A*Math.cos(z),a.getCenter().y+A*Math.sin(z),z+HalfPi)})}s&&(context=w,a.memory.image=new Image,a.memory.image.src=u.toDataURL(),a.x=x,a.y=y,drawImage(a.memory.image,a.x,a.y,a.width,a.height))}}}}),define("src/visualization/objects/ObjectDraw",function(){"use strict";function a(){}a.count=function(a,b){null==a.memory&&(a.memory={n:1,object:b}),a.memory.object!=b&&(a.memory.object=b,a.memory.n++),MOUSE_DOWN&&a.containsPoint(mP)&&(a.memory.n=0),setText("black",12),fText(a.memory.n,a.x+10,a.y+10)}}),define("src/visualization/strings/StringDraw",function(){"use strict";function a(){}a.drawText=function(a,b,c,d,e){e=e||10,c=c||12;var f=new Rectangle(a.x+e,a.y+e,a.width-2*e,a.height-2*e);f.bottom=f.getBottom();var g=Math.floor(1.2*c);if(setText("black",c,null,null,null,d),significantChange=null==a.memory||b!=a.memory.object||c!=a.memory.fontSize||d!=a.memory.fontStyle||e!=a.memory.margin||a.width!=a.memory.width||a.height!=a.memory.height,
significantChange){var h=null==b?"":"string"==typeof b?b:JSON.stringify(b,null,"	");a.memory={textLines:DrawTexts.textWordWrapReturnLines(h,f.width,f.height,g,!0),object:b,fontSize:c,fontStyle:d,margin:e,width:a.width,height:a.height}}DrawTexts.fillTextRectangleWithTextLines(a.memory.textLines,f.x,f.y,f.height,g)}}),define("src/visualization/strings/StringListDraw",function(){"use strict";function a(){}a.tagCloudRectangles=function(b,c,d){table[1].sqrt().getNormalizedToMax();rectangles=new List,textPositions=new Polygon,textSizes=new NumberList;for(var e,f,g=new List,h=6,i=new Point(0,0),j=0;null!=words[j];j++){for(textSizes[j]=Math.round(16*c[j])*h,DrawTexts.setContextTextProperties("black",textSizes[j],"Arial",null,null,"bold"),e=Math.ceil((2+context.measureText(b[j]).width)/h)*h,f=textSizes[j];a._pointInRectangles(g,i,e,f);)i.x+=h,i.y-=h,i.y<0&&(i.y=i.x,i.x=0);rectangles[j]=new Rectangle(i.x,i.y,e,f),g.push(rectangles[j])}},a._pointInRectangles=function(a,b,c,d){for(var e,f=0;null!=a[f];f++)if(e=a[f],b.x+c>e.x&&b.x<e.x+e.width&&b.y+d>e.y&&b.y<e.y+e.height)return!0;return!1}}),define("src/visualization/strings/StringListVisOperators",function(){"use strict";function a(){}a.simpleTagCloud=function(a,b,c,d,e){d=null==d?"Arial":d,e=null==e?1.2:e;for(var f,g,h,i,j,k,l,m,n,o,p,q=20,r=b.getNormalizedToMax(),s=!0,t=0;s;){for(interLine=q*e,h=0,i=0,m=0,n=0,o=new NumberList,p=new Polygon,f=0;null!=a[f];f++){if(j=a[f],l=Math.floor(Math.sqrt(r[f])*q),o.push(l),context.font=String(l)+"px "+d,k=context.measureText(j).width,h+k>c.width){for(h=0,i+=m*e+1,m=0,g=n;f>g;g++)p[g].y=i;n=f}m=Math.max(m,l),p.push(new Point(h,i)),h+=k+.2*l}for(i+=m*e+1,g=n;null!=a[g];g++)p[g].y=i;s=!1,i<.97*c.height&&(q=.5*q+.5*q*c.height/(i+interLine),s=!0),i>=.995*c.height&&(q=.5*q+.5*q*c.height/(i+interLine),s=!0),t++,t>10&&(s=!1)}return table=new Table,table[0]=a,table[1]=p,table[2]=o,table},a.tagCloudRectangles=function(b,c,d,e,f){e=null==e?0:e,f=null==f?0:f;var g=c.sqrt().getNormalizedToMax(),h=0==e;rectangles=new List,textPositions=new Polygon,textSizes=new NumberList;var i,j,k,l=new List,m=6,n=0,o=0,q=0;switch(e){case 0:i=d.x,j=d.y;break;case 2:var r=5,s=0,t=1,u=new Point;case 1:i=0,j=0,k=d.getCenter()}for(var v,w,x=d.width/d.height,y=0;null!=b[y];y++){switch(textSizes[y]=h?Math.round(12*g[y])*m:12*g[y]*m,DrawTexts.setContextTextProperties("black",textSizes[y],LOADED_FONT,null,null,"bold"),v=Math.ceil((2+context.measureText(b[y]).width)/m)*m,w=textSizes[y],e){case 0:for(;a._pointInRectangles(l,i,j,v,w,f);)i+=m,j-=m,j<d.y&&(j=p.x,i=d.x);break;case 1:if(0==y)i=k.x-.5*v,j=k.y-.5*w;else{for(n=.1*y,o=0;a._pointInRectangles(l,i,j,v,w,f);)o+=1,n+=.005*o,i=k.x+x*o*Math.cos(n)-.5*v,j=k.y+o*Math.sin(n)-.5*w;q=Math.max(q,x*o+.5*v)}break;case 2:if(0==y)u=k.clone(),i=u.x-.5*v,j=u.y-.5*w;else{for(s=0,t=1,n=0,u=k.clone();a._pointInRectangles(l,i,j,v,w,f);)s++,u.x+=x*r*Math.cos(n),u.y+=r*Math.sin(n),i=u.x-.5*v,j=u.y-.5*w,s>=t&&(n+=.5*Math.PI,t+=.5,s=0);q=Math.max(Math.abs(u.x-k.x)+.5*v,q)}}rectangles[y]=new Rectangle(i,j,v,w),l.push(rectangles[y])}if(1==e||2==e){var z;for(x=.5*d.width/q,y=0;null!=rectangles[y];y++)z=rectangles[y],z.x=k.x+(z.x-k.x)*x,z.y=k.y+(z.y-k.y)*x,z.width*=x,z.height*=x,textSizes[y]*=x}var A=new Table;return A[0]=b,A[1]=rectangles,A[2]=textSizes,A},a._pointInRectangles=function(a,b,c,d,e,f){for(var g,h=0;null!=a[h];h++)if(g=a[h],b+d>g.x-f&&b<g.x+g.width+f&&c+e>g.y-f&&c<g.y+g.height+f)return!0;return!1}}),define("src/visualization/structures/NetworkDraw",function(){"use strict";function a(){}a._drawNode=function(a,b,c,d){var e=!1;return a.image?(clipCircle(b,c,d),drawImage(a.image,b-d,c-1.3*d,2*d,3*d),restore(),e=Math.pow(b-mX,2)+Math.pow(c-mY,2)<=d*d):(setFill(null==a.color?"rgb(50,50,50)":a.color),e=fCircleM(b,c,d)),e&&setCursor("pointer"),e},a.drawRadialNetwork=function(b,c){var d,e,f,g,h=1.1*Math.min(b.width,b.height)/c.nodeList.length,i=.5*b.width-h,j=.5*b.height-h,k=b.x+.5*b.width,l=b.y+.5*b.height,m=TwoPi/c.nodeList.length;new Polygon;return setFill("black"),c.nodeList.forEach(function(a,b){a._drawRadialNetwork_x=k+i*Math.cos(b*m),a._drawRadialNetwork_y=l+j*Math.sin(b*m)}),c.relationList.forEach(function(a){setStroke("black",.25*a.weight),d=.5*(a.node0._drawRadialNetwork_x+a.node1._drawRadialNetwork_x),e=.5*(a.node0._drawRadialNetwork_y+a.node1._drawRadialNetwork_y),f=Math.sqrt(Math.pow(a.node0._drawRadialNetwork_x-a.node1._drawRadialNetwork_x,2),Math.pow(a.node0._drawRadialNetwork_y-a.node1._drawRadialNetwork_y,2))+1,d=(1-.5*(f/i))*d+.5*(f/i)*k,e=(1-.5*(f/j))*e+.5*(f/j)*l,bezier(a.node0._drawRadialNetwork_x,a.node0._drawRadialNetwork_y,d,e,d,e,a.node1._drawRadialNetwork_x,a.node1._drawRadialNetwork_y)}),c.nodeList.forEach(function(b){a._drawNode(b,b._drawRadialNetwork_x,b._drawRadialNetwork_y,h)&&(g=b)}),g},a.drawNetwork2D=function(b,c,d,e,f,g,h){if(null!=c&&null!=d&&"Polygon"==d.type){e=e||!1,f=f||!1,g=g||!1,h=h||0;var i,j,k,l,m,n=1.1*Math.min(b.width,b.height)/c.nodeList.length,o=b.memory,p=null==o||!o.frame.isEqual(b);if(null==o||o.network!=c||o.nNodes!=c.nodeList.length||o.polygon!=d||p||o.respectProportions!=e||o.margin!=h||o.logScale!=f||o.drawGrid!=g){null==o&&(b.memory={},o=b.memory),o.frame=b.clone(),o.network=c;var q=null!=o.polygon&&o.polygon.length!=d.length;o.polygon=d,o.respectProportions=e,o.logScale=f,o.drawGrid=g,o.margin=h,o.nNodes=c.nodeList.length,b.bottom=b.getBottom(),b.right=b.getRight(),o.frameMargin=new Rectangle(b.x+h,b.y+h,b.width-2*h,b.height-2*h),m=o.frameMargin,o.frameMargin.right=o.frameMargin.getRight(),o.frameMargin.bottom=o.frameMargin.getBottom(),o.frameP=d.getFrame(),l=o.frameP,l.right=l.getRight(),l.bottom=l.getBottom(),e&&(j=k=Math.min(j,k));var r;o.actualLogScale=f&&l.x>=0&&l.y>=0,o.actualLogScale?(j=m.width/Math.log((l.right+1)/(l.x+1)),k=m.height/Math.log((l.bottom+1)/(l.y+1)),r=function(a){return new Point((Math.log(a.x+1)-Math.log(l.x+1))*j+m.x,m.bottom-(Math.log(a.y+1)-Math.log(l.y+1))*k)}):(j=m.width/l.width,k=m.height/l.height,r=function(a){return new Point((a.x-l.x)*j+m.x,m.bottom-(a.y-l.y)*k)}),o.projectedPolygon=new Polygon,d.forEach(function(a,b){o.projectedPolygon[b]=r(a)}),l.x<=0&&l.getRight()>=0&&(o.yAxis=-l.x*j+m.x),l.y<=0&&l.getBottom()>=0&&(o.xAxis=m.bottom- -l.y*k),(null==b.memory.projectPolygonConvergent||p||q)&&(b.memory.projectPolygonConvergent=o.projectedPolygon.clone())}else l=o.frameP,m=o.frameMargin;if(setStroke("rgb(50,50,50)",2),o.xAxis&&line(m.x,o.xAxis,o.frameMargin.right,o.xAxis),o.yAxis&&line(o.yAxis,o.frameMargin.y,o.yAxis,o.frameMargin.bottom),b.containsPoint(mP)&&(setStroke("rgb(50,50,50)",.5),line(b.x+2,mY+.5,b.right-4,mY+.5),line(mX+.5,b.y+2,mX+.5,b.bottom-4)),o.projectPolygonConvergent.approach(o.projectedPolygon,.1),c.nodeList.forEach(function(a,b){a.x=o.projectPolygonConvergent[b].x,a.y=o.projectPolygonConvergent[b].y}),c.relationList.forEach(function(a){setStroke("black",.25*a.weight),line(a.node0.x,a.node0.y,a.node1.x,a.node1.y)}),c.nodeList.forEach(function(b){a._drawNode(b,b.x,b.y,n)&&(i=b)}),b.containsPoint(mP))if(null==i)o.actualLogScale?a._drawNodeValues(Math.floor(10*(Math.pow(Math.E,Math.log((l.right+1)/(l.x+1))*(mX-m.x)/m.width)-1))/10,Math.floor(10*(Math.pow(Math.E,Math.log((l.bottom+1)/(l.y+1))*(m.bottom-mY)/m.height)-1))/10):a._drawNodeValues(Math.floor(10*(l.x+l.width*(mX-o.frameMargin.x)/o.frameMargin.width))/10,Math.floor(10*(l.y+l.height*(o.frameMargin.bottom-mY)/o.frameMargin.height))/10);else{var s=c.nodeList.indexOf(i);a._drawNodeValues(d[s].x,d[s].y,i.name)}return i}},a._drawNodeValues=function(a,b,c){var d=(null==c?"":c+": ")+a+", "+b;setFill("rgba(50,50,50,0.8)"),fRect(mX-2,mY-2,-getTextW(d)-4,-14),setText("white",12,null,"right","bottom"),fText(d,mX-4,mY-2)},a.drawNetworkMatrix=function(a,b,c,d,e,f,g,h){d=null==d?ColorOperators.grayScale:d,e=null==e?2:e,f=null==f?!1:f;var i,j,k,l,m=b.nodeList,n=b.relationList,o=null!=g,p=a.width/(m.length+1),q=a.height/(m.length+1),r=p-e,s=q-e,t=p,u=q;if(h=h&&a.pointIsInside(mousePoint))var v=new Point(-1,-1);if(o){p=a.width-p,q=a.height-q;var w,x,y=[],z=[],A=[],B=[]}for(i=0;null!=m[i];i++)context.fillStyle=c[i],o?(w=p*g[i],x=q*g[i],context.fillRect(a.x+t,a.y,w-e,s),context.fillRect(a.x,a.y+u,r,x-e),h&&(mouseX>a.x+t&&mouseX<a.x+t+w&&(v.x=i),mouseY>a.y+u&&mouseY<a.y+u+x&&(v.y=i)),y[m[i].id]=t,z[m[i].id]=u,A[m[i].id]=w,B[m[i].id]=x,t+=w,u+=x):(context.fillRect(a.x+(i+1)*p,a.y,r,s),context.fillRect(a.x,a.y+(i+1)*q,r,s));for(i=0;null!=n[i];i++)j=n[i],context.fillStyle=d(j.weight),o?(context.fillRect(a.x+y[j.node0.id],a.y+z[j.node1.id],A[j.node0.id]-e,B[j.node1.id]-e),f||context.fillRect(a.x+z[j.node1.id],a.y+y[j.node0.id],B[j.node1.id]-e,A[j.node0.id]-e)):(k=m.indexOf(j.node0)+1,l=m.indexOf(j.node1)+1,context.fillRect(a.x+k*p,a.y+l*q,r,s),f||k==l||context.fillRect(a.x+l*p,a.y+k*q,r,s));return v}}),define("src/visualization/structures/TreeDraw",function(){"use strict";function a(){}a.drawRectanglesTree=function(b,c,d,e){d=null==d?ColorListGenerators.createCategoricalColors(1,c.nLevels):d,e=e||1;var f=b.width/c.nLevels;a._drawRectanglesTreeChildren(c.nodeList[0],new Rectangle(b.x,b.y,f,b.height),d,e)},a._drawRectanglesTreeChildren=function(b,c,d,e){context.fillStyle=d[b.level],context.fillRect(c.x+e,c.y+e,c.width-2*e,c.height-2*e);var f=b.toNodeList;if(f.length>0){var g,h,i=c.height/(b.descentWeight-1),j=c.y;for(g=0;null!=f[g];g++)h=i*f[g].descentWeight,a._drawRectanglesTreeChildren(f[g],new Rectangle(c.x+c.width,j,c.width,h),d,e),j+=h}},a.drawTreemap=function(b,c,d,e,f,g){var h=null==b.memory||b.memory.tree!=c||b.memory.width!=b.width||b.memory.height!=b.height||b.memory.weights!=e;null!=g&&(g=c.nodeList.getNodeById(g.id));var i=null!=g&&(null==b.memory||g!=b.memory.nodeSelected);if(h){var j=null!=b.memory&&null!=b.memory.tree!=c;null!=b.memory&&b.memory.weights!=e;b.memory={tree:c,width:b.width,height:b.height,weights:e,nodeSelected:c.nodeList[0],nFLastChange:nF,image:null};var k=!j&&b.memory.leaves?b.memory.leaves:c.getLeaves();if(b.memory.leaves=k,null==e)c.nodeList.forEach(function(a){a._treeMapWeight=a.descentWeight});else{k.forEach(function(a,b){a._treeMapWeight=e[b]});var l=function(a){var b;if(0==a.toNodeList.length)return a._treeMapWeight;for(a._treeMapWeight=0,b=0;null!=a.toNodeList[b];b++)a._treeMapWeight+=l(a.toNodeList[b]);return a._treeMapWeight};l(c.nodeList[0])}c.nodeList[0]._outRectangle=new Rectangle(0,0,b.width,b.height),c.nodeList[0]._inRectangle=a._inRectFromOutRect(c.nodeList[0]._outRectangle),a._generateRectangles(c.nodeList[0]),b.memory.focusFrame=a._expandRect(c.nodeList[0]._outRectangle),b.memory.kx=b.width/b.memory.focusFrame.width,b.memory.mx=-b.memory.kx*b.memory.focusFrame.x,b.memory.ky=b.height/b.memory.focusFrame.height,b.memory.my=-b.memory.ky*b.memory.focusFrame.y,setText("black",12),c.nodeList.forEach(function(a){a._textWidth=getTextW(a.name)})}if(b.memory.colorList!=d||null==b.memory.colorList){if(b.memory.nFLastChange=nF,b.memory.image=null,b.memory.actualColorList=null==d?ColorListGenerators.createCategoricalColors(0,c.nLevels,ColorScales.grayToOrange,.1):d,b.memory.nodesColorList=new ColorList,null==f&&(b.memory.textsColorList=new ColorList),b.memory.actualColorList.length<=c.nLevels)c.nodeList.forEach(function(a,c){b.memory.nodesColorList[c]=a._color=b.memory.actualColorList[a.level%b.memory.actualColorList.length]});else if(b.memory.actualColorList.length==b.memory.leaves.length){b.memory.leaves.forEach(function(a,c){a._color=b.memory.actualColorList[c],a._rgb=ColorOperators.colorStringToRGB(a._color)});var m=function(a){var b;if(0!=a.toNodeList.length){for(a._rgb=[0,0,0],b=0;null!=a.toNodeList[b];b++)m(a.toNodeList[b]),a._rgb[0]+=a.toNodeList[b]._rgb[0],a._rgb[1]+=a.toNodeList[b]._rgb[1],a._rgb[2]+=a.toNodeList[b]._rgb[2];a._rgb[0]=Math.floor(a._rgb[0]/a.toNodeList.length),a._rgb[1]=Math.floor(a._rgb[1]/a.toNodeList.length),a._rgb[2]=Math.floor(a._rgb[2]/a.toNodeList.length)}};m(c.nodeList[0]),c.nodeList.forEach(function(a,c){a._rgb&&null==a._rgbF&&(a._rgbF=[a._rgb[0],a._rgb[1],a._rgb[2]]),b.memory.nodesColorList[c]="rgb("+a._rgb[0]+","+a._rgb[1]+","+a._rgb[2]+")"})}else c.nodeList.forEach(function(a,c){a._color=b.memory.nodesColorList[c]=b.memory.actualColorList[c%b.memory.actualColorList.length]});if(null==f){var n;c.nodeList.forEach(function(a,c){n=a._color?ColorOperators.colorStringToRGB(a._color):[0,0,0],b.memory.textsColorList[c]=n[0]+n[1]+n[2]>360?"black":"white"})}b.memory.colorList=d}null==f&&(f="black");var o=b.width/b.memory.focusFrame.width,p=-o*b.memory.focusFrame.x,q=b.height/b.memory.focusFrame.height,r=-q*b.memory.focusFrame.y,s=o>b.memory.kx?.05:.1,t=1-s;b.memory.kx=t*b.memory.kx+s*o,b.memory.mx=t*b.memory.mx+s*p,b.memory.ky=t*b.memory.ky+s*q,b.memory.my=t*b.memory.my+s*r;var u,v,w,x,y,z,A,B,C=b.memory.kx,D=b.memory.mx,E=b.memory.ky,F=b.memory.my,G=function(a){return C*a+D},H=function(a){return E*a+F},I=null,J=b.containsPoint(mP),K=nF-b.memory.nFLastChange<50||Math.pow(b.memory.kx-o,2)+Math.pow(b.memory.ky-q,2)+Math.pow(b.memory.mx-p,2)+Math.pow(b.memory.my-r,2)>.01,L=!K&&null==b.memory.image&&!J,M=!K&&!J&&null!=b.memory.image&&!L&&b.memory.image.width>0&&!i;if(M)drawImage(b.memory.image,b.x,b.y,b.width,b.height);else{if(L){var N=document.createElement("canvas");N.width=b.width,N.height=b.height;var O=N.getContext("2d");O.clearRect(0,0,b.width,b.height);var P=context;context=O;var Q=b.x,R=b.y;b.x=0,b.y=0,setFill("white"),fRect(0,0,b.width,b.height),setText("black",12)}else context.save(),clipRectangle(b.x,b.y,b.width,b.height);setStroke("black",.2),c.nodeList.forEach(function(c,d){A=new Rectangle(G(c._outRectangle.x),H(c._outRectangle.y),c._outRectangle.width*C,c._outRectangle.height*E),A.width>5&&A.height>4&&A.x<b.width&&A.getRight()>0&&A.y<b.height&&A.getBottom()>0&&(u=Math.round(b.x+A.x)+.5,v=Math.round(b.y+A.y)+.5,c._rgbF?(c._rgbF[0]=.95*c._rgbF[0]+.05*c._rgb[0],c._rgbF[1]=.95*c._rgbF[1]+.05*c._rgb[1],c._rgbF[2]=.95*c._rgbF[2]+.05*c._rgb[2],setFill("rgb("+Math.floor(c._rgbF[0])+","+Math.floor(c._rgbF[1])+","+Math.floor(c._rgbF[2])+")")):setFill(b.memory.nodesColorList[d]),fsRectM(u,v,Math.floor(A.width),Math.floor(A.height))&&(I=c,B=d),A.width>20&&(w=A.width*a.PROP_RECT_MARGIN*.8,x=A.height*a.PROP_RECT_MARGIN*.15,y=A.height*a.PROP_RECT_LABEL-2,y>=5&&(propTextSpace=(A.width-2*w)/(c._textWidth*y/12),z=propTextSpace<1,z?setText(f?f:b.memory.textsColorList[d],y*propTextSpace):setText(f?f:b.memory.textsColorList[d],y),fText(c.name,u+w,v+x))))}),L&&(context=P,b.memory.image=new Image,b.memory.image.src=N.toDataURL(),b.x=Q,b.y=R,drawImage(b.memory.image,b.x,b.y,b.width,b.height))}if(J){if(I&&(setCursor("pointer"),A=new Rectangle(G(I._outRectangle.x),H(I._outRectangle.y),I._outRectangle.width*C,I._outRectangle.height*E),u=Math.round(b.x+A.x)+.5,v=Math.round(b.y+A.y)+.5,setStroke(f?f:b.memory.textsColorList[B],2),sRect(u,v,Math.floor(A.width),Math.floor(A.height)),MOUSE_UP_FAST&&(b.memory.focusFrame=a._expandRect(I._outRectangle),b.memory.nodeSelected=I,b.memory.image=null)),MOUSE_DOWN&&(b.memory.prevMX=mX,b.memory.prevMY=mY),MOUSE_PRESSED&&(scale=5*b.memory.focusFrame.width/b.width,b.memory.focusFrame.x-=(mX-b.memory.prevMX)*scale,b.memory.focusFrame.y-=(mY-b.memory.prevMY)*scale,b.memory.prevMX=mX,b.memory.prevMY=mY),0!=WHEEL_CHANGE){var S=b.memory.focusFrame.getCenter(),T=1-.1*WHEEL_CHANGE;b.memory.focusFrame.x=S.x-.5*b.memory.focusFrame.width*T,b.memory.focusFrame.y=S.y-.5*b.memory.focusFrame.height*T,b.memory.focusFrame.width*=T,b.memory.focusFrame.height*=T}(MOUSE_PRESSED||0!=WHEEL_CHANGE)&&(b.memory.image=null)}return i&&(b.memory.focusFrame=a._expandRect(g._outRectangle),b.memory.nodeSelected=g,b.memory.image=null),L||M||context.restore(),b.memory.nodeSelected},a._generateRectangles=function(b){var c=new NumberList;b.toNodeList.forEach(function(a){c.push(a._treeMapWeight)});var d=RectangleOperators.squarify(b._inRectangle,c,!1,!1);b.toNodeList.forEach(function(b,c){b._outRectangle=a._reduceRect(d[c]),b._inRectangle=a._inRectFromOutRect(b._outRectangle),a._generateRectangles(b)})},a._reduceRect=function(b){return new Rectangle(b.x+b.width*a.PROP_RECT_REDUCTION_MARGIN,b.y+b.height*a.PROP_RECT_REDUCTION_MARGIN,b.width*(1-2*a.PROP_RECT_REDUCTION_MARGIN),b.height*(1-2*a.PROP_RECT_REDUCTION_MARGIN))},a._expandRect=function(b){return new Rectangle(b.x-b.width*a.PROP_RECT_EXPANTION_MARGIN,b.y-b.height*a.PROP_RECT_EXPANTION_MARGIN,b.width*(1+2*a.PROP_RECT_EXPANTION_MARGIN),b.height*(1+2*a.PROP_RECT_EXPANTION_MARGIN))},a._inRectFromOutRect=function(b){return new Rectangle(b.x+b.width*a.PROP_RECT_MARGIN,b.y+b.height*a.PROP_RECT_LABEL,b.width*(1-2*a.PROP_RECT_MARGIN),b.height*(1-a.PROP_RECT_MARGIN-a.PROP_RECT_LABEL))},a.PROP_RECT_MARGIN=.03,a.PROP_RECT_LABEL=.2,a.PROP_RECT_REDUCTION_MARGIN=.01,a.PROP_RECT_EXPANTION_MARGIN=.05,a.drawDecisionTree=function(b,d){var e=null==b.memory||b.memory.tree!=d||b.memory.width!=b.width||b.memory.height!=b.height,f=.06*b.height,g=d.nLevels*(b.height-f)/(d.nLevels+1),h=g/d.nLevels,i=!1;if(e){var j=null!=b.memory&&null!=b.memory.tree&&b.memory.tree!=d;b.memory={tree:d,width:b.width,height:b.height,nodeSelected:d.nodeList[0],nFLastChange:nF,leaves:null,image:null},(j||null==b.memory.leaves)&&(b.memory.leaves=d.getLeaves().getSortedByProperty("valueFollowingProbability",!1)),d.nodeList[0]._outRectangle=new Rectangle(0,0,b.width,g),d.nodeList[0]._inRectangle=a._inRectFromOutRectDecision(d.nodeList[0]._outRectangle,h),a._generateRectanglesDecision(d.nodeList[0],h),b.memory.focusFrame=new Rectangle(0,0,b.width,b.height),b.memory.kx=b.width/b.memory.focusFrame.width,b.memory.mx=-b.memory.kx*b.memory.focusFrame.x,b.memory.ky=b.height/b.memory.focusFrame.height,b.memory.my=-b.memory.ky*b.memory.focusFrame.y,setText("black",12),d.nodeList.forEach(function(a){a.label=0==a.toNodeList.length?Math.round(100*a.valueFollowingProbability)/100:a.bestFeatureName,a._textWidth=getTextW(a.label)})}b.memory.followingWeights&&d.nodeList.forEach(function(a){a._treeMapWeight=a.descentWeight});var k="black",l=b.width/b.memory.focusFrame.width,m=-l*b.memory.focusFrame.x,n=l>b.memory.kx?.05:.1,o=1-n;b.memory.kx=o*b.memory.kx+n*l,b.memory.mx=o*b.memory.mx+n*m;var p,q,r,s,t,u,v,w,x=b.memory.kx,y=b.memory.mx,z=function(a){return x*a+y},A=null,B=b.containsPoint(mP),C=nF-b.memory.nFLastChange<80||Math.pow(b.memory.kx-l,2)+Math.pow(b.memory.mx-m,2)>.001,D=!C&&null==b.memory.image&&!B,E=!C&&!B&&null!=b.memory.image&&!D&&b.memory.image.width>0;if(E)drawImage(b.memory.image,b.x,b.y,b.width,b.height);else{if(c.l("drawing"),D){var F=document.createElement("canvas");F.width=b.width,F.height=b.height;var G=F.getContext("2d");G.clearRect(0,0,b.width,b.height);var H=context;context=G;var I=b.x,J=b.y;b.x=0,b.y=0,setFill("white"),fRect(0,0,b.width,b.height),setText("black",12)}else context.save(),clipRectangle(b.x,b.y,b.width,b.height);var K=b.y+g+f;setStroke("black",.2),d.nodeList.forEach(function(c,d){if(v=new Rectangle(z(c._outRectangle.x),c._outRectangle.y,c._outRectangle.width*x,c._outRectangle.height),v.x<b.width&&v.getRight()>0&&v.y<b.height&&v.getBottom()>0){p=Math.round(b.x+v.x)+.5,q=Math.round(b.y+v.y)+.5,c.pattern?(context.fillStyle=c.pattern,context.fillRect(p,q,Math.floor(v.width),Math.floor(v.height)),sRectM(p,q,Math.floor(v.width),Math.floor(v.height))&&(A=c,w=d)):(setFill(c._color),fsRectM(p,q,Math.floor(v.width),Math.floor(v.height))&&(A=c,w=d));var e=Math.min(v.getRight(),b.width)-Math.max(v.x,0);e>16&&(r=v.width*a.PROP_RECT_MARGIN*.8,s=v.height*a.PROP_RECT_MARGIN*.15,tC=k?k:b.memory.textsColorList[d],t=18,setText(tC,t),u=!0,u&&clipRectangle(p,q-17,v.width,v.height),fText(c.label,Math.max(p,b.x)+8,q+1),c.value&&(t=14,setText(tC,t),fText(c.value,Math.max(p,b.x)+8,q-17)),e-c._textWidth>60&&(t=12,setText(tC,t,null,"right"),fText("s="+c.weight,Math.min(b.x+v.getRight(),b.getRight())-2,q+1),fText("e="+Math.round(100*c.entropy)/100,Math.min(b.x+v.getRight(),b.getRight())-2,q+12),c.toNodeList.length>0&&fText("P="+Math.round(100*c.valueFollowingProbability)/100,Math.min(b.x+v.getRight(),b.getRight())-2,q+23),fText("l="+Math.round(100*c.lift)/100,Math.min(b.x+v.getRight(),b.getRight())-2,q+23+(c.toNodeList.length>0?11:0))),u&&context.restore())}});var L,M=b.x,N=b.width/d.nodeList[0].weight,O=!0,P=!0,Q=!0,R=!0,S=!0;b.memory.leaves.forEach(function(a){setStroke("black",.2),L=N*a.weight,a.pattern?(context.fillStyle=a.pattern,context.fillRect(M,K,L,h),sRectM(M,K,L,h)&&(A=a,w=d.nodeList.indexOf(a))):(setFill(a._color),fsRectM(M,K,L,h)&&(A=a,w=d.nodeList.indexOf(a))),a._xLeaf=M,a._wLeaf=L,setStroke("black",1),O&&a.valueFollowingProbability<d.nodeList[0].valueFollowingProbability&&(O=!1,setFill("black"),fLines(M,K-14,M+4,K-8,M,K-2,M-4,K-8)),P&&a.valueFollowingProbability<=2*d.nodeList[0].valueFollowingProbability&&(P=!1,line(M,K-14,M,K-2)),Q&&a.valueFollowingProbability<.5*d.nodeList[0].valueFollowingProbability&&(Q=!1,line(M,K-14,M,K-2)),R&&a.valueFollowingProbability<=1.5*d.nodeList[0].valueFollowingProbability&&(R=!1,line(M,K-8,M,K-2)),S&&a.valueFollowingProbability<.66667*d.nodeList[0].valueFollowingProbability&&(S=!1,line(M,K-8,M,K-2)),M+=L}),D&&(context=H,b.memory.image=new Image,b.memory.image.src=F.toDataURL(),b.x=I,b.y=J,drawImage(b.memory.image,b.x,b.y,b.width,b.height))}if(B){if(A&&(setCursor("pointer"),v=new Rectangle(z(A._outRectangle.x),A._outRectangle.y,A._outRectangle.width*x,A._outRectangle.height),p=Math.round(b.x+v.x)+.5,q=Math.round(b.y+v.y)+.5,setStroke(k?k:b.memory.textsColorList[w],2),A._wLeaf&&(setFill("rgba(0,0,0,0.5)"),context.beginPath(),context.moveTo(p,K-f),context.bezierCurveTo(p,K-.65*f,A._xLeaf,K-.35*f,A._xLeaf,K),context.lineTo(A._xLeaf+A._wLeaf,K),context.bezierCurveTo(A._xLeaf+A._wLeaf,K-.35*f,p+v.width,K-.65*f,p+v.width,K-f),context.fill(),sRect(A._xLeaf,K,A._wLeaf,h)),sRect(p,q,Math.floor(v.width),Math.floor(v.height)),MOUSE_UP_FAST&&(b.memory.focusFrame=new Rectangle(A._outRectangle.x-.025*A._outRectangle.width,0,1.05*A._outRectangle.width,b.height),b.memory.focusFrame.x<0&&(b.memory.focusFrame.width+=b.memory.focusFrame.x,b.memory.focusFrame.x=0),b.memory.focusFrame.getRight()>b.width&&(b.memory.focusFrame.width-=b.memory.focusFrame.getRight()-b.width,b.memory.focusFrame.x=b.width-b.memory.focusFrame.width),b.memory.nodeSelected=A,i=!0,b.memory.image=null)),MOUSE_DOWN&&(b.memory.prevMX=mX),MOUSE_PRESSED&&(scale=5*b.memory.focusFrame.width/b.width,b.memory.focusFrame.x-=(mX-b.memory.prevMX)*scale,b.memory.prevMX=mX),0!=WHEEL_CHANGE){var T=b.memory.focusFrame.getCenter(),U=1+.1*WHEEL_CHANGE;b.memory.focusFrame.x=T.x-.5*b.memory.focusFrame.width*U,b.memory.focusFrame.width*=U}(MOUSE_PRESSED||0!=WHEEL_CHANGE)&&(b.memory.image=null)}return D||E||context.restore(),b.memory.overNode!=A&&(b.memory.overNode=A,i=!0),(i||null==b.memory.result)&&(b.memory.result=[{value:b.memory.nodeSelected,type:"Node"},{value:b.memory.overNode,type:"Node"}]),b.memory.result},a._generateRectanglesDecision=function(b,c){var d=new NumberList;b.toNodeList.forEach(function(a){d.push(a.weight)});var e=a._horizontalRectanglesDecision(b._inRectangle,d);b.toNodeList.forEach(function(b,d){b._outRectangle=e[d],b._inRectangle=a._inRectFromOutRectDecision(b._outRectangle,c),a._generateRectanglesDecision(b,c)})},a._inRectFromOutRectDecision=function(a,b){return new Rectangle(a.x,a.y+b,a.width,a.height-b)},a._horizontalRectanglesDecision=function(a,b){var c,d=new List,e=a.x,f=b.getNormalizedToSum();return f.forEach(function(b){c=b*a.width,d.push(new Rectangle(e,a.y,c,a.height)),e+=c}),d}}),window.MF=requireModule("src/index")}(window);